var Cc=r=>{throw TypeError(r)};var cl=(r,t,e)=>t.has(r)||Cc("Cannot "+e);var Ve=(r,t,e)=>(cl(r,t,"read from private field"),e?e.call(r):t.get(r)),On=(r,t,e)=>t.has(r)?Cc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),qi=(r,t,e,i)=>(cl(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),Ln=(r,t,e)=>(cl(r,t,"access private method"),e);var Tc=(r,t,e,i)=>({set _(n){qi(r,t,n,e)},get _(){return Ve(r,t,i)}});function Yh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bo={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Jh=bo.exports,kc;function Qh(){return kc||(kc=1,(function(r){(function(t,e){r.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:Jh,function(t,e){var i=[],n=Object.getPrototypeOf,s=i.slice,a=i.flat?function(l){return i.flat.call(l)}:function(l){return i.concat.apply([],l)},o=i.push,u=i.indexOf,d={},p=d.toString,b=d.hasOwnProperty,y=b.toString,x=y.call(Object),A={},w=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},T=function(h){return h!=null&&h===h.window},E=t.document,R={type:!0,src:!0,nonce:!0,noModule:!0};function M(l,h,m){m=m||E;var v,S,C=m.createElement("script");if(C.text=l,h)for(v in R)S=h[v]||h.getAttribute&&h.getAttribute(v),S&&C.setAttribute(v,S);m.head.appendChild(C).parentNode.removeChild(C)}function B(l){return l==null?l+"":typeof l=="object"||typeof l=="function"?d[p.call(l)]||"object":typeof l}var U="3.7.1",z=/HTML$/i,f=function(l,h){return new f.fn.init(l,h)};f.fn=f.prototype={jquery:U,constructor:f,length:0,toArray:function(){return s.call(this)},get:function(l){return l==null?s.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var h=f.merge(this.constructor(),l);return h.prevObject=this,h},each:function(l){return f.each(this,l)},map:function(l){return this.pushStack(f.map(this,function(h,m){return l.call(h,m,h)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(f.grep(this,function(l,h){return(h+1)%2}))},odd:function(){return this.pushStack(f.grep(this,function(l,h){return h%2}))},eq:function(l){var h=this.length,m=+l+(l<0?h:0);return this.pushStack(m>=0&&m<h?[this[m]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},f.extend=f.fn.extend=function(){var l,h,m,v,S,C,k=arguments[0]||{},$=1,j=arguments.length,G=!1;for(typeof k=="boolean"&&(G=k,k=arguments[$]||{},$++),typeof k!="object"&&!w(k)&&(k={}),$===j&&(k=this,$--);$<j;$++)if((l=arguments[$])!=null)for(h in l)v=l[h],!(h==="__proto__"||k===v)&&(G&&v&&(f.isPlainObject(v)||(S=Array.isArray(v)))?(m=k[h],S&&!Array.isArray(m)?C=[]:!S&&!f.isPlainObject(m)?C={}:C=m,S=!1,k[h]=f.extend(G,C,v)):v!==void 0&&(k[h]=v));return k},f.extend({expando:"jQuery"+(U+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var h,m;return!l||p.call(l)!=="[object Object]"?!1:(h=n(l),h?(m=b.call(h,"constructor")&&h.constructor,typeof m=="function"&&y.call(m)===x):!0)},isEmptyObject:function(l){var h;for(h in l)return!1;return!0},globalEval:function(l,h,m){M(l,{nonce:h&&h.nonce},m)},each:function(l,h){var m,v=0;if(H(l))for(m=l.length;v<m&&h.call(l[v],v,l[v])!==!1;v++);else for(v in l)if(h.call(l[v],v,l[v])===!1)break;return l},text:function(l){var h,m="",v=0,S=l.nodeType;if(!S)for(;h=l[v++];)m+=f.text(h);return S===1||S===11?l.textContent:S===9?l.documentElement.textContent:S===3||S===4?l.nodeValue:m},makeArray:function(l,h){var m=h||[];return l!=null&&(H(Object(l))?f.merge(m,typeof l=="string"?[l]:l):o.call(m,l)),m},inArray:function(l,h,m){return h==null?-1:u.call(h,l,m)},isXMLDoc:function(l){var h=l&&l.namespaceURI,m=l&&(l.ownerDocument||l).documentElement;return!z.test(h||m&&m.nodeName||"HTML")},merge:function(l,h){for(var m=+h.length,v=0,S=l.length;v<m;v++)l[S++]=h[v];return l.length=S,l},grep:function(l,h,m){for(var v,S=[],C=0,k=l.length,$=!m;C<k;C++)v=!h(l[C],C),v!==$&&S.push(l[C]);return S},map:function(l,h,m){var v,S,C=0,k=[];if(H(l))for(v=l.length;C<v;C++)S=h(l[C],C,m),S!=null&&k.push(S);else for(C in l)S=h(l[C],C,m),S!=null&&k.push(S);return a(k)},guid:1,support:A}),typeof Symbol=="function"&&(f.fn[Symbol.iterator]=i[Symbol.iterator]),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,h){d["[object "+h+"]"]=h.toLowerCase()});function H(l){var h=!!l&&"length"in l&&l.length,m=B(l);return w(l)||T(l)?!1:m==="array"||h===0||typeof h=="number"&&h>0&&h-1 in l}function V(l,h){return l.nodeName&&l.nodeName.toLowerCase()===h.toLowerCase()}var at=i.pop,st=i.sort,ht=i.splice,dt="[\\x20\\t\\r\\n\\f]",Ht=new RegExp("^"+dt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+dt+"+$","g");f.contains=function(l,h){var m=h&&h.parentNode;return l===m||!!(m&&m.nodeType===1&&(l.contains?l.contains(m):l.compareDocumentPosition&&l.compareDocumentPosition(m)&16))};var te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function kt(l,h){return h?l==="\0"?"ï¿½":l.slice(0,-1)+"\\"+l.charCodeAt(l.length-1).toString(16)+" ":"\\"+l}f.escapeSelector=function(l){return(l+"").replace(te,kt)};var vt=E,re=o;(function(){var l,h,m,v,S,C=re,k,$,j,G,Z,it=f.expando,K=0,gt=0,Zt=Js(),xe=Js(),fe=Js(),fi=Js(),Qe=function(L,q){return L===q&&(S=!0),0},en="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nn="(?:\\\\[\\da-fA-F]{1,6}"+dt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",me="\\["+dt+"*("+nn+")(?:"+dt+"*([*^$|!~]?=)"+dt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+nn+"))|)"+dt+"*\\]",kn=":("+nn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+me+")*)|.*)\\)|)",Te=new RegExp(dt+"+","g"),We=new RegExp("^"+dt+"*,"+dt+"*"),ys=new RegExp("^"+dt+"*([>+~]|"+dt+")"+dt+"*"),Kn=new RegExp(dt+"|>"),Li=new RegExp(kn),ws=new RegExp("^"+nn+"$"),$i={ID:new RegExp("^#("+nn+")"),CLASS:new RegExp("^\\.("+nn+")"),TAG:new RegExp("^("+nn+"|[*])"),ATTR:new RegExp("^"+me),PSEUDO:new RegExp("^"+kn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+dt+"*(even|odd|(([+-]|)(\\d*)n|)"+dt+"*(?:([+-]|)"+dt+"*(\\d+)|))"+dt+"*\\)|)","i"),bool:new RegExp("^(?:"+en+")$","i"),needsContext:new RegExp("^"+dt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+dt+"*((?:-\\d)?\\d*)"+dt+"*\\)|)(?=[^-]|$)","i")},gn=/^(?:input|select|textarea|button)$/i,Pn=/^h\d$/i,Ui=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qr=/[+~]/,sn=new RegExp("\\\\[\\da-fA-F]{1,6}"+dt+"?|\\\\([^\\r\\n\\f])","g"),mn=function(L,q){var c="0x"+L.slice(1)-65536;return q||(c<0?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320))},Ha=function(){rn()},$a=Ss(function(L){return L.disabled===!0&&V(L,"fieldset")},{dir:"parentNode",next:"legend"});function zr(){try{return k.activeElement}catch{}}try{C.apply(i=s.call(vt.childNodes),vt.childNodes),i[vt.childNodes.length].nodeType}catch{C={apply:function(q,c){re.apply(q,s.call(c))},call:function(q){re.apply(q,s.call(arguments,1))}}}function De(L,q,c,g){var _,P,D,I,F,X,Y,ot=q&&q.ownerDocument,_t=q?q.nodeType:9;if(c=c||[],typeof L!="string"||!L||_t!==1&&_t!==9&&_t!==11)return c;if(!g&&(rn(q),q=q||k,j)){if(_t!==11&&(F=Ui.exec(L)))if(_=F[1]){if(_t===9)if(D=q.getElementById(_)){if(D.id===_)return C.call(c,D),c}else return c;else if(ot&&(D=ot.getElementById(_))&&De.contains(q,D)&&D.id===_)return C.call(c,D),c}else{if(F[2])return C.apply(c,q.getElementsByTagName(L)),c;if((_=F[3])&&q.getElementsByClassName)return C.apply(c,q.getElementsByClassName(_)),c}if(!fi[L+" "]&&(!G||!G.test(L))){if(Y=L,ot=q,_t===1&&(Kn.test(L)||ys.test(L))){for(ot=qr.test(L)&&_s(q.parentNode)||q,(ot!=q||!A.scope)&&((I=q.getAttribute("id"))?I=f.escapeSelector(I):q.setAttribute("id",I=it)),X=As(L),P=X.length;P--;)X[P]=(I?"#"+I:":scope")+" "+xs(X[P]);Y=X.join(",")}try{return C.apply(c,ot.querySelectorAll(Y)),c}catch{fi(L,!0)}finally{I===it&&q.removeAttribute("id")}}}return Es(L.replace(Ht,"$1"),q,c,g)}function Js(){var L=[];function q(c,g){return L.push(c+" ")>h.cacheLength&&delete q[L.shift()],q[c+" "]=g}return q}function Pi(L){return L[it]=!0,L}function os(L){var q=k.createElement("fieldset");try{return!!L(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function Go(L){return function(q){return V(q,"input")&&q.type===L}}function Ua(L){return function(q){return(V(q,"input")||V(q,"button"))&&q.type===L}}function qa(L){return function(q){return"form"in q?q.parentNode&&q.disabled===!1?"label"in q?"label"in q.parentNode?q.parentNode.disabled===L:q.disabled===L:q.isDisabled===L||q.isDisabled!==!L&&$a(q)===L:q.disabled===L:"label"in q?q.disabled===L:!1}}function Rn(L){return Pi(function(q){return q=+q,Pi(function(c,g){for(var _,P=L([],c.length,q),D=P.length;D--;)c[_=P[D]]&&(c[_]=!(g[_]=c[_]))})})}function _s(L){return L&&typeof L.getElementsByTagName<"u"&&L}function rn(L){var q,c=L?L.ownerDocument||L:vt;return c==k||c.nodeType!==9||!c.documentElement||(k=c,$=k.documentElement,j=!f.isXMLDoc(k),Z=$.matches||$.webkitMatchesSelector||$.msMatchesSelector,$.msMatchesSelector&&vt!=k&&(q=k.defaultView)&&q.top!==q&&q.addEventListener("unload",Ha),A.getById=os(function(g){return $.appendChild(g).id=f.expando,!k.getElementsByName||!k.getElementsByName(f.expando).length}),A.disconnectedMatch=os(function(g){return Z.call(g,"*")}),A.scope=os(function(){return k.querySelectorAll(":scope")}),A.cssHas=os(function(){try{return k.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),A.getById?(h.filter.ID=function(g){var _=g.replace(sn,mn);return function(P){return P.getAttribute("id")===_}},h.find.ID=function(g,_){if(typeof _.getElementById<"u"&&j){var P=_.getElementById(g);return P?[P]:[]}}):(h.filter.ID=function(g){var _=g.replace(sn,mn);return function(P){var D=typeof P.getAttributeNode<"u"&&P.getAttributeNode("id");return D&&D.value===_}},h.find.ID=function(g,_){if(typeof _.getElementById<"u"&&j){var P,D,I,F=_.getElementById(g);if(F){if(P=F.getAttributeNode("id"),P&&P.value===g)return[F];for(I=_.getElementsByName(g),D=0;F=I[D++];)if(P=F.getAttributeNode("id"),P&&P.value===g)return[F]}return[]}}),h.find.TAG=function(g,_){return typeof _.getElementsByTagName<"u"?_.getElementsByTagName(g):_.querySelectorAll(g)},h.find.CLASS=function(g,_){if(typeof _.getElementsByClassName<"u"&&j)return _.getElementsByClassName(g)},G=[],os(function(g){var _;$.appendChild(g).innerHTML="<a id='"+it+"' href='' disabled='disabled'></a><select id='"+it+"-\r\\' disabled='disabled'><option selected=''></option></select>",g.querySelectorAll("[selected]").length||G.push("\\["+dt+"*(?:value|"+en+")"),g.querySelectorAll("[id~="+it+"-]").length||G.push("~="),g.querySelectorAll("a#"+it+"+*").length||G.push(".#.+[+~]"),g.querySelectorAll(":checked").length||G.push(":checked"),_=k.createElement("input"),_.setAttribute("type","hidden"),g.appendChild(_).setAttribute("name","D"),$.appendChild(g).disabled=!0,g.querySelectorAll(":disabled").length!==2&&G.push(":enabled",":disabled"),_=k.createElement("input"),_.setAttribute("name",""),g.appendChild(_),g.querySelectorAll("[name='']").length||G.push("\\["+dt+"*name"+dt+"*="+dt+`*(?:''|"")`)}),A.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),Qe=function(g,_){if(g===_)return S=!0,0;var P=!g.compareDocumentPosition-!_.compareDocumentPosition;return P||(P=(g.ownerDocument||g)==(_.ownerDocument||_)?g.compareDocumentPosition(_):1,P&1||!A.sortDetached&&_.compareDocumentPosition(g)===P?g===k||g.ownerDocument==vt&&De.contains(vt,g)?-1:_===k||_.ownerDocument==vt&&De.contains(vt,_)?1:v?u.call(v,g)-u.call(v,_):0:P&4?-1:1)}),k}De.matches=function(L,q){return De(L,null,null,q)},De.matchesSelector=function(L,q){if(rn(L),j&&!fi[q+" "]&&(!G||!G.test(q)))try{var c=Z.call(L,q);if(c||A.disconnectedMatch||L.document&&L.document.nodeType!==11)return c}catch{fi(q,!0)}return De(q,k,null,[L]).length>0},De.contains=function(L,q){return(L.ownerDocument||L)!=k&&rn(L),f.contains(L,q)},De.attr=function(L,q){(L.ownerDocument||L)!=k&&rn(L);var c=h.attrHandle[q.toLowerCase()],g=c&&b.call(h.attrHandle,q.toLowerCase())?c(L,q,!j):void 0;return g!==void 0?g:L.getAttribute(q)},De.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},f.uniqueSort=function(L){var q,c=[],g=0,_=0;if(S=!A.sortStable,v=!A.sortStable&&s.call(L,0),st.call(L,Qe),S){for(;q=L[_++];)q===L[_]&&(g=c.push(_));for(;g--;)ht.call(L,c[g],1)}return v=null,L},f.fn.uniqueSort=function(){return this.pushStack(f.uniqueSort(s.apply(this)))},h=f.expr={cacheLength:50,createPseudo:Pi,match:$i,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(sn,mn),L[3]=(L[3]||L[4]||L[5]||"").replace(sn,mn),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||De.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&De.error(L[0]),L},PSEUDO:function(L){var q,c=!L[6]&&L[2];return $i.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":c&&Li.test(c)&&(q=As(c,!0))&&(q=c.indexOf(")",c.length-q)-c.length)&&(L[0]=L[0].slice(0,q),L[2]=c.slice(0,q)),L.slice(0,3))}},filter:{TAG:function(L){var q=L.replace(sn,mn).toLowerCase();return L==="*"?function(){return!0}:function(c){return V(c,q)}},CLASS:function(L){var q=Zt[L+" "];return q||(q=new RegExp("(^|"+dt+")"+L+"("+dt+"|$)"))&&Zt(L,function(c){return q.test(typeof c.className=="string"&&c.className||typeof c.getAttribute<"u"&&c.getAttribute("class")||"")})},ATTR:function(L,q,c){return function(g){var _=De.attr(g,L);return _==null?q==="!=":q?(_+="",q==="="?_===c:q==="!="?_!==c:q==="^="?c&&_.indexOf(c)===0:q==="*="?c&&_.indexOf(c)>-1:q==="$="?c&&_.slice(-c.length)===c:q==="~="?(" "+_.replace(Te," ")+" ").indexOf(c)>-1:q==="|="?_===c||_.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(L,q,c,g,_){var P=L.slice(0,3)!=="nth",D=L.slice(-4)!=="last",I=q==="of-type";return g===1&&_===0?function(F){return!!F.parentNode}:function(F,X,Y){var ot,_t,xt,$t,pe,Oe=P!==D?"nextSibling":"previousSibling",Ye=F.parentNode,zt=I&&F.nodeName.toLowerCase(),_e=!Y&&!I,Kt=!1;if(Ye){if(P){for(;Oe;){for(xt=F;xt=xt[Oe];)if(I?V(xt,zt):xt.nodeType===1)return!1;pe=Oe=L==="only"&&!pe&&"nextSibling"}return!0}if(pe=[D?Ye.firstChild:Ye.lastChild],D&&_e){for(_t=Ye[it]||(Ye[it]={}),ot=_t[L]||[],$t=ot[0]===K&&ot[1],Kt=$t&&ot[2],xt=$t&&Ye.childNodes[$t];xt=++$t&&xt&&xt[Oe]||(Kt=$t=0)||pe.pop();)if(xt.nodeType===1&&++Kt&&xt===F){_t[L]=[K,$t,Kt];break}}else if(_e&&(_t=F[it]||(F[it]={}),ot=_t[L]||[],$t=ot[0]===K&&ot[1],Kt=$t),Kt===!1)for(;(xt=++$t&&xt&&xt[Oe]||(Kt=$t=0)||pe.pop())&&!((I?V(xt,zt):xt.nodeType===1)&&++Kt&&(_e&&(_t=xt[it]||(xt[it]={}),_t[L]=[K,Kt]),xt===F)););return Kt-=_,Kt===g||Kt%g===0&&Kt/g>=0}}},PSEUDO:function(L,q){var c,g=h.pseudos[L]||h.setFilters[L.toLowerCase()]||De.error("unsupported pseudo: "+L);return g[it]?g(q):g.length>1?(c=[L,L,"",q],h.setFilters.hasOwnProperty(L.toLowerCase())?Pi(function(_,P){for(var D,I=g(_,q),F=I.length;F--;)D=u.call(_,I[F]),_[D]=!(P[D]=I[F])}):function(_){return g(_,0,c)}):g}},pseudos:{not:Pi(function(L){var q=[],c=[],g=tr(L.replace(Ht,"$1"));return g[it]?Pi(function(_,P,D,I){for(var F,X=g(_,null,I,[]),Y=_.length;Y--;)(F=X[Y])&&(_[Y]=!(P[Y]=F))}):function(_,P,D){return q[0]=_,g(q,null,D,c),q[0]=null,!c.pop()}}),has:Pi(function(L){return function(q){return De(L,q).length>0}}),contains:Pi(function(L){return L=L.replace(sn,mn),function(q){return(q.textContent||f.text(q)).indexOf(L)>-1}}),lang:Pi(function(L){return ws.test(L||"")||De.error("unsupported lang: "+L),L=L.replace(sn,mn).toLowerCase(),function(q){var c;do if(c=j?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return c=c.toLowerCase(),c===L||c.indexOf(L+"-")===0;while((q=q.parentNode)&&q.nodeType===1);return!1}}),target:function(L){var q=t.location&&t.location.hash;return q&&q.slice(1)===L.id},root:function(L){return L===$},focus:function(L){return L===zr()&&k.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:qa(!1),disabled:qa(!0),checked:function(L){return V(L,"input")&&!!L.checked||V(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!h.pseudos.empty(L)},header:function(L){return Pn.test(L.nodeName)},input:function(L){return gn.test(L.nodeName)},button:function(L){return V(L,"input")&&L.type==="button"||V(L,"button")},text:function(L){var q;return V(L,"input")&&L.type==="text"&&((q=L.getAttribute("type"))==null||q.toLowerCase()==="text")},first:Rn(function(){return[0]}),last:Rn(function(L,q){return[q-1]}),eq:Rn(function(L,q,c){return[c<0?c+q:c]}),even:Rn(function(L,q){for(var c=0;c<q;c+=2)L.push(c);return L}),odd:Rn(function(L,q){for(var c=1;c<q;c+=2)L.push(c);return L}),lt:Rn(function(L,q,c){var g;for(c<0?g=c+q:c>q?g=q:g=c;--g>=0;)L.push(g);return L}),gt:Rn(function(L,q,c){for(var g=c<0?c+q:c;++g<q;)L.push(g);return L})}},h.pseudos.nth=h.pseudos.eq;for(l in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[l]=Go(l);for(l in{submit:!0,reset:!0})h.pseudos[l]=Ua(l);function za(){}za.prototype=h.filters=h.pseudos,h.setFilters=new za;function As(L,q){var c,g,_,P,D,I,F,X=xe[L+" "];if(X)return q?0:X.slice(0);for(D=L,I=[],F=h.preFilter;D;){(!c||(g=We.exec(D)))&&(g&&(D=D.slice(g[0].length)||D),I.push(_=[])),c=!1,(g=ys.exec(D))&&(c=g.shift(),_.push({value:c,type:g[0].replace(Ht," ")}),D=D.slice(c.length));for(P in h.filter)(g=$i[P].exec(D))&&(!F[P]||(g=F[P](g)))&&(c=g.shift(),_.push({value:c,type:P,matches:g}),D=D.slice(c.length));if(!c)break}return q?D.length:D?De.error(L):xe(L,I).slice(0)}function xs(L){for(var q=0,c=L.length,g="";q<c;q++)g+=L[q].value;return g}function Ss(L,q,c){var g=q.dir,_=q.next,P=_||g,D=c&&P==="parentNode",I=gt++;return q.first?function(F,X,Y){for(;F=F[g];)if(F.nodeType===1||D)return L(F,X,Y);return!1}:function(F,X,Y){var ot,_t,xt=[K,I];if(Y){for(;F=F[g];)if((F.nodeType===1||D)&&L(F,X,Y))return!0}else for(;F=F[g];)if(F.nodeType===1||D)if(_t=F[it]||(F[it]={}),_&&V(F,_))F=F[g]||F;else{if((ot=_t[P])&&ot[0]===K&&ot[1]===I)return xt[2]=ot[2];if(_t[P]=xt,xt[2]=L(F,X,Y))return!0}return!1}}function Wr(L){return L.length>1?function(q,c,g){for(var _=L.length;_--;)if(!L[_](q,c,g))return!1;return!0}:L[0]}function Vo(L,q,c){for(var g=0,_=q.length;g<_;g++)De(L,q[g],c);return c}function Qs(L,q,c,g,_){for(var P,D=[],I=0,F=L.length,X=q!=null;I<F;I++)(P=L[I])&&(!c||c(P,g,_))&&(D.push(P),X&&q.push(I));return D}function Gr(L,q,c,g,_,P){return g&&!g[it]&&(g=Gr(g)),_&&!_[it]&&(_=Gr(_,P)),Pi(function(D,I,F,X){var Y,ot,_t,xt,$t=[],pe=[],Oe=I.length,Ye=D||Vo(q||"*",F.nodeType?[F]:F,[]),zt=L&&(D||!q)?Qs(Ye,$t,L,F,X):Ye;if(c?(xt=_||(D?L:Oe||g)?[]:I,c(zt,xt,F,X)):xt=zt,g)for(Y=Qs(xt,pe),g(Y,[],F,X),ot=Y.length;ot--;)(_t=Y[ot])&&(xt[pe[ot]]=!(zt[pe[ot]]=_t));if(D){if(_||L){if(_){for(Y=[],ot=xt.length;ot--;)(_t=xt[ot])&&Y.push(zt[ot]=_t);_(null,xt=[],Y,X)}for(ot=xt.length;ot--;)(_t=xt[ot])&&(Y=_?u.call(D,_t):$t[ot])>-1&&(D[Y]=!(I[Y]=_t))}}else xt=Qs(xt===I?xt.splice(Oe,xt.length):xt),_?_(null,I,xt,X):C.apply(I,xt)})}function Zs(L){for(var q,c,g,_=L.length,P=h.relative[L[0].type],D=P||h.relative[" "],I=P?1:0,F=Ss(function(ot){return ot===q},D,!0),X=Ss(function(ot){return u.call(q,ot)>-1},D,!0),Y=[function(ot,_t,xt){var $t=!P&&(xt||_t!=m)||((q=_t).nodeType?F(ot,_t,xt):X(ot,_t,xt));return q=null,$t}];I<_;I++)if(c=h.relative[L[I].type])Y=[Ss(Wr(Y),c)];else{if(c=h.filter[L[I].type].apply(null,L[I].matches),c[it]){for(g=++I;g<_&&!h.relative[L[g].type];g++);return Gr(I>1&&Wr(Y),I>1&&xs(L.slice(0,I-1).concat({value:L[I-2].type===" "?"*":""})).replace(Ht,"$1"),c,I<g&&Zs(L.slice(I,g)),g<_&&Zs(L=L.slice(g)),g<_&&xs(L))}Y.push(c)}return Wr(Y)}function Xo(L,q){var c=q.length>0,g=L.length>0,_=function(P,D,I,F,X){var Y,ot,_t,xt=0,$t="0",pe=P&&[],Oe=[],Ye=m,zt=P||g&&h.find.TAG("*",X),_e=K+=Ye==null?1:Math.random()||.1,Kt=zt.length;for(X&&(m=D==k||D||X);$t!==Kt&&(Y=zt[$t])!=null;$t++){if(g&&Y){for(ot=0,!D&&Y.ownerDocument!=k&&(rn(Y),I=!j);_t=L[ot++];)if(_t(Y,D||k,I)){C.call(F,Y);break}X&&(K=_e)}c&&((Y=!_t&&Y)&&xt--,P&&pe.push(Y))}if(xt+=$t,c&&$t!==xt){for(ot=0;_t=q[ot++];)_t(pe,Oe,D,I);if(P){if(xt>0)for(;$t--;)pe[$t]||Oe[$t]||(Oe[$t]=at.call(F));Oe=Qs(Oe)}C.apply(F,Oe),X&&!P&&Oe.length>0&&xt+q.length>1&&f.uniqueSort(F)}return X&&(K=_e,m=Ye),pe};return c?Pi(_):_}function tr(L,q){var c,g=[],_=[],P=fe[L+" "];if(!P){for(q||(q=As(L)),c=q.length;c--;)P=Zs(q[c]),P[it]?g.push(P):_.push(P);P=fe(L,Xo(_,g)),P.selector=L}return P}function Es(L,q,c,g){var _,P,D,I,F,X=typeof L=="function"&&L,Y=!g&&As(L=X.selector||L);if(c=c||[],Y.length===1){if(P=Y[0]=Y[0].slice(0),P.length>2&&(D=P[0]).type==="ID"&&q.nodeType===9&&j&&h.relative[P[1].type]){if(q=(h.find.ID(D.matches[0].replace(sn,mn),q)||[])[0],q)X&&(q=q.parentNode);else return c;L=L.slice(P.shift().value.length)}for(_=$i.needsContext.test(L)?0:P.length;_--&&(D=P[_],!h.relative[I=D.type]);)if((F=h.find[I])&&(g=F(D.matches[0].replace(sn,mn),qr.test(P[0].type)&&_s(q.parentNode)||q))){if(P.splice(_,1),L=g.length&&xs(P),!L)return C.apply(c,g),c;break}}return(X||tr(L,Y))(g,q,!j,c,!q||qr.test(L)&&_s(q.parentNode)||q),c}A.sortStable=it.split("").sort(Qe).join("")===it,rn(),A.sortDetached=os(function(L){return L.compareDocumentPosition(k.createElement("fieldset"))&1}),f.find=De,f.expr[":"]=f.expr.pseudos,f.unique=f.uniqueSort,De.compile=tr,De.select=Es,De.setDocument=rn,De.tokenize=As,De.escape=f.escapeSelector,De.getText=f.text,De.isXML=f.isXMLDoc,De.selectors=f.expr,De.support=f.support,De.uniqueSort=f.uniqueSort})();var ge=function(l,h,m){for(var v=[],S=m!==void 0;(l=l[h])&&l.nodeType!==9;)if(l.nodeType===1){if(S&&f(l).is(m))break;v.push(l)}return v},Le=function(l,h){for(var m=[];l;l=l.nextSibling)l.nodeType===1&&l!==h&&m.push(l);return m},Ut=f.expr.match.needsContext,Pt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Rt(l,h,m){return w(h)?f.grep(l,function(v,S){return!!h.call(v,S,v)!==m}):h.nodeType?f.grep(l,function(v){return v===h!==m}):typeof h!="string"?f.grep(l,function(v){return u.call(h,v)>-1!==m}):f.filter(h,l,m)}f.filter=function(l,h,m){var v=h[0];return m&&(l=":not("+l+")"),h.length===1&&v.nodeType===1?f.find.matchesSelector(v,l)?[v]:[]:f.find.matches(l,f.grep(h,function(S){return S.nodeType===1}))},f.fn.extend({find:function(l){var h,m,v=this.length,S=this;if(typeof l!="string")return this.pushStack(f(l).filter(function(){for(h=0;h<v;h++)if(f.contains(S[h],this))return!0}));for(m=this.pushStack([]),h=0;h<v;h++)f.find(l,S[h],m);return v>1?f.uniqueSort(m):m},filter:function(l){return this.pushStack(Rt(this,l||[],!1))},not:function(l){return this.pushStack(Rt(this,l||[],!0))},is:function(l){return!!Rt(this,typeof l=="string"&&Ut.test(l)?f(l):l||[],!1).length}});var Vt,Bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,yt=f.fn.init=function(l,h,m){var v,S;if(!l)return this;if(m=m||Vt,typeof l=="string")if(l[0]==="<"&&l[l.length-1]===">"&&l.length>=3?v=[null,l,null]:v=Bt.exec(l),v&&(v[1]||!h))if(v[1]){if(h=h instanceof f?h[0]:h,f.merge(this,f.parseHTML(v[1],h&&h.nodeType?h.ownerDocument||h:E,!0)),Pt.test(v[1])&&f.isPlainObject(h))for(v in h)w(this[v])?this[v](h[v]):this.attr(v,h[v]);return this}else return S=E.getElementById(v[2]),S&&(this[0]=S,this.length=1),this;else return!h||h.jquery?(h||m).find(l):this.constructor(h).find(l);else{if(l.nodeType)return this[0]=l,this.length=1,this;if(w(l))return m.ready!==void 0?m.ready(l):l(f)}return f.makeArray(l,this)};yt.prototype=f.fn,Vt=f(E);var Jt=/^(?:parents|prev(?:Until|All))/,Ne={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({has:function(l){var h=f(l,this),m=h.length;return this.filter(function(){for(var v=0;v<m;v++)if(f.contains(this,h[v]))return!0})},closest:function(l,h){var m,v=0,S=this.length,C=[],k=typeof l!="string"&&f(l);if(!Ut.test(l)){for(;v<S;v++)for(m=this[v];m&&m!==h;m=m.parentNode)if(m.nodeType<11&&(k?k.index(m)>-1:m.nodeType===1&&f.find.matchesSelector(m,l))){C.push(m);break}}return this.pushStack(C.length>1?f.uniqueSort(C):C)},index:function(l){return l?typeof l=="string"?u.call(f(l),this[0]):u.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,h){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(l,h))))},addBack:function(l){return this.add(l==null?this.prevObject:this.prevObject.filter(l))}});function wt(l,h){for(;(l=l[h])&&l.nodeType!==1;);return l}f.each({parent:function(l){var h=l.parentNode;return h&&h.nodeType!==11?h:null},parents:function(l){return ge(l,"parentNode")},parentsUntil:function(l,h,m){return ge(l,"parentNode",m)},next:function(l){return wt(l,"nextSibling")},prev:function(l){return wt(l,"previousSibling")},nextAll:function(l){return ge(l,"nextSibling")},prevAll:function(l){return ge(l,"previousSibling")},nextUntil:function(l,h,m){return ge(l,"nextSibling",m)},prevUntil:function(l,h,m){return ge(l,"previousSibling",m)},siblings:function(l){return Le((l.parentNode||{}).firstChild,l)},children:function(l){return Le(l.firstChild)},contents:function(l){return l.contentDocument!=null&&n(l.contentDocument)?l.contentDocument:(V(l,"template")&&(l=l.content||l),f.merge([],l.childNodes))}},function(l,h){f.fn[l]=function(m,v){var S=f.map(this,h,m);return l.slice(-5)!=="Until"&&(v=m),v&&typeof v=="string"&&(S=f.filter(v,S)),this.length>1&&(Ne[l]||f.uniqueSort(S),Jt.test(l)&&S.reverse()),this.pushStack(S)}});var At=/[^\x20\t\r\n\f]+/g;function ae(l){var h={};return f.each(l.match(At)||[],function(m,v){h[v]=!0}),h}f.Callbacks=function(l){l=typeof l=="string"?ae(l):f.extend({},l);var h,m,v,S,C=[],k=[],$=-1,j=function(){for(S=S||l.once,v=h=!0;k.length;$=-1)for(m=k.shift();++$<C.length;)C[$].apply(m[0],m[1])===!1&&l.stopOnFalse&&($=C.length,m=!1);l.memory||(m=!1),h=!1,S&&(m?C=[]:C="")},G={add:function(){return C&&(m&&!h&&($=C.length-1,k.push(m)),(function Z(it){f.each(it,function(K,gt){w(gt)?(!l.unique||!G.has(gt))&&C.push(gt):gt&&gt.length&&B(gt)!=="string"&&Z(gt)})})(arguments),m&&!h&&j()),this},remove:function(){return f.each(arguments,function(Z,it){for(var K;(K=f.inArray(it,C,K))>-1;)C.splice(K,1),K<=$&&$--}),this},has:function(Z){return Z?f.inArray(Z,C)>-1:C.length>0},empty:function(){return C&&(C=[]),this},disable:function(){return S=k=[],C=m="",this},disabled:function(){return!C},lock:function(){return S=k=[],!m&&!h&&(C=m=""),this},locked:function(){return!!S},fireWith:function(Z,it){return S||(it=it||[],it=[Z,it.slice?it.slice():it],k.push(it),h||j()),this},fire:function(){return G.fireWith(this,arguments),this},fired:function(){return!!v}};return G};function ee(l){return l}function Xt(l){throw l}function Mt(l,h,m,v){var S;try{l&&w(S=l.promise)?S.call(l).done(h).fail(m):l&&w(S=l.then)?S.call(l,h,m):h.apply(void 0,[l].slice(v))}catch(C){m.apply(void 0,[C])}}f.extend({Deferred:function(l){var h=[["notify","progress",f.Callbacks("memory"),f.Callbacks("memory"),2],["resolve","done",f.Callbacks("once memory"),f.Callbacks("once memory"),0,"resolved"],["reject","fail",f.Callbacks("once memory"),f.Callbacks("once memory"),1,"rejected"]],m="pending",v={state:function(){return m},always:function(){return S.done(arguments).fail(arguments),this},catch:function(C){return v.then(null,C)},pipe:function(){var C=arguments;return f.Deferred(function(k){f.each(h,function($,j){var G=w(C[j[4]])&&C[j[4]];S[j[1]](function(){var Z=G&&G.apply(this,arguments);Z&&w(Z.promise)?Z.promise().progress(k.notify).done(k.resolve).fail(k.reject):k[j[0]+"With"](this,G?[Z]:arguments)})}),C=null}).promise()},then:function(C,k,$){var j=0;function G(Z,it,K,gt){return function(){var Zt=this,xe=arguments,fe=function(){var Qe,en;if(!(Z<j)){if(Qe=K.apply(Zt,xe),Qe===it.promise())throw new TypeError("Thenable self-resolution");en=Qe&&(typeof Qe=="object"||typeof Qe=="function")&&Qe.then,w(en)?gt?en.call(Qe,G(j,it,ee,gt),G(j,it,Xt,gt)):(j++,en.call(Qe,G(j,it,ee,gt),G(j,it,Xt,gt),G(j,it,ee,it.notifyWith))):(K!==ee&&(Zt=void 0,xe=[Qe]),(gt||it.resolveWith)(Zt,xe))}},fi=gt?fe:function(){try{fe()}catch(Qe){f.Deferred.exceptionHook&&f.Deferred.exceptionHook(Qe,fi.error),Z+1>=j&&(K!==Xt&&(Zt=void 0,xe=[Qe]),it.rejectWith(Zt,xe))}};Z?fi():(f.Deferred.getErrorHook?fi.error=f.Deferred.getErrorHook():f.Deferred.getStackHook&&(fi.error=f.Deferred.getStackHook()),t.setTimeout(fi))}}return f.Deferred(function(Z){h[0][3].add(G(0,Z,w($)?$:ee,Z.notifyWith)),h[1][3].add(G(0,Z,w(C)?C:ee)),h[2][3].add(G(0,Z,w(k)?k:Xt))}).promise()},promise:function(C){return C!=null?f.extend(C,v):v}},S={};return f.each(h,function(C,k){var $=k[2],j=k[5];v[k[1]]=$.add,j&&$.add(function(){m=j},h[3-C][2].disable,h[3-C][3].disable,h[0][2].lock,h[0][3].lock),$.add(k[3].fire),S[k[0]]=function(){return S[k[0]+"With"](this===S?void 0:this,arguments),this},S[k[0]+"With"]=$.fireWith}),v.promise(S),l&&l.call(S,S),S},when:function(l){var h=arguments.length,m=h,v=Array(m),S=s.call(arguments),C=f.Deferred(),k=function($){return function(j){v[$]=this,S[$]=arguments.length>1?s.call(arguments):j,--h||C.resolveWith(v,S)}};if(h<=1&&(Mt(l,C.done(k(m)).resolve,C.reject,!h),C.state()==="pending"||w(S[m]&&S[m].then)))return C.then();for(;m--;)Mt(S[m],k(m),C.reject);return C.promise()}});var ui=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;f.Deferred.exceptionHook=function(l,h){t.console&&t.console.warn&&l&&ui.test(l.name)&&t.console.warn("jQuery.Deferred exception: "+l.message,l.stack,h)},f.readyException=function(l){t.setTimeout(function(){throw l})};var Et=f.Deferred();f.fn.ready=function(l){return Et.then(l).catch(function(h){f.readyException(h)}),this},f.extend({isReady:!1,readyWait:1,ready:function(l){(l===!0?--f.readyWait:f.isReady)||(f.isReady=!0,!(l!==!0&&--f.readyWait>0)&&Et.resolveWith(E,[f]))}}),f.ready.then=Et.then;function et(){E.removeEventListener("DOMContentLoaded",et),t.removeEventListener("load",et),f.ready()}E.readyState==="complete"||E.readyState!=="loading"&&!E.documentElement.doScroll?t.setTimeout(f.ready):(E.addEventListener("DOMContentLoaded",et),t.addEventListener("load",et));var ct=function(l,h,m,v,S,C,k){var $=0,j=l.length,G=m==null;if(B(m)==="object"){S=!0;for($ in m)ct(l,h,$,m[$],!0,C,k)}else if(v!==void 0&&(S=!0,w(v)||(k=!0),G&&(k?(h.call(l,v),h=null):(G=h,h=function(Z,it,K){return G.call(f(Z),K)})),h))for(;$<j;$++)h(l[$],m,k?v:v.call(l[$],$,h(l[$],m)));return S?l:G?h.call(l):j?h(l[0],m):C},Wt=/^-ms-/,ie=/-([a-z])/g;function qt(l,h){return h.toUpperCase()}function Dt(l){return l.replace(Wt,"ms-").replace(ie,qt)}var ft=function(l){return l.nodeType===1||l.nodeType===9||!+l.nodeType};function bt(){this.expando=f.expando+bt.uid++}bt.uid=1,bt.prototype={cache:function(l){var h=l[this.expando];return h||(h={},ft(l)&&(l.nodeType?l[this.expando]=h:Object.defineProperty(l,this.expando,{value:h,configurable:!0}))),h},set:function(l,h,m){var v,S=this.cache(l);if(typeof h=="string")S[Dt(h)]=m;else for(v in h)S[Dt(v)]=h[v];return S},get:function(l,h){return h===void 0?this.cache(l):l[this.expando]&&l[this.expando][Dt(h)]},access:function(l,h,m){return h===void 0||h&&typeof h=="string"&&m===void 0?this.get(l,h):(this.set(l,h,m),m!==void 0?m:h)},remove:function(l,h){var m,v=l[this.expando];if(v!==void 0){if(h!==void 0)for(Array.isArray(h)?h=h.map(Dt):(h=Dt(h),h=h in v?[h]:h.match(At)||[]),m=h.length;m--;)delete v[h[m]];(h===void 0||f.isEmptyObject(v))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var h=l[this.expando];return h!==void 0&&!f.isEmptyObject(h)}};var rt=new bt,oe=new bt,Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/[A-Z]/g;function He(l){return l==="true"?!0:l==="false"?!1:l==="null"?null:l===+l+""?+l:Se.test(l)?JSON.parse(l):l}function Di(l,h,m){var v;if(m===void 0&&l.nodeType===1)if(v="data-"+h.replace(Ee,"-$&").toLowerCase(),m=l.getAttribute(v),typeof m=="string"){try{m=He(m)}catch{}oe.set(l,h,m)}else m=void 0;return m}f.extend({hasData:function(l){return oe.hasData(l)||rt.hasData(l)},data:function(l,h,m){return oe.access(l,h,m)},removeData:function(l,h){oe.remove(l,h)},_data:function(l,h,m){return rt.access(l,h,m)},_removeData:function(l,h){rt.remove(l,h)}}),f.fn.extend({data:function(l,h){var m,v,S,C=this[0],k=C&&C.attributes;if(l===void 0){if(this.length&&(S=oe.get(C),C.nodeType===1&&!rt.get(C,"hasDataAttrs"))){for(m=k.length;m--;)k[m]&&(v=k[m].name,v.indexOf("data-")===0&&(v=Dt(v.slice(5)),Di(C,v,S[v])));rt.set(C,"hasDataAttrs",!0)}return S}return typeof l=="object"?this.each(function(){oe.set(this,l)}):ct(this,function($){var j;if(C&&$===void 0)return j=oe.get(C,l),j!==void 0||(j=Di(C,l),j!==void 0)?j:void 0;this.each(function(){oe.set(this,l,$)})},null,h,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){oe.remove(this,l)})}}),f.extend({queue:function(l,h,m){var v;if(l)return h=(h||"fx")+"queue",v=rt.get(l,h),m&&(!v||Array.isArray(m)?v=rt.access(l,h,f.makeArray(m)):v.push(m)),v||[]},dequeue:function(l,h){h=h||"fx";var m=f.queue(l,h),v=m.length,S=m.shift(),C=f._queueHooks(l,h),k=function(){f.dequeue(l,h)};S==="inprogress"&&(S=m.shift(),v--),S&&(h==="fx"&&m.unshift("inprogress"),delete C.stop,S.call(l,k,C)),!v&&C&&C.empty.fire()},_queueHooks:function(l,h){var m=h+"queueHooks";return rt.get(l,m)||rt.access(l,m,{empty:f.Callbacks("once memory").add(function(){rt.remove(l,[h+"queue",m])})})}}),f.fn.extend({queue:function(l,h){var m=2;return typeof l!="string"&&(h=l,l="fx",m--),arguments.length<m?f.queue(this[0],l):h===void 0?this:this.each(function(){var v=f.queue(this,l,h);f._queueHooks(this,l),l==="fx"&&v[0]!=="inprogress"&&f.dequeue(this,l)})},dequeue:function(l){return this.each(function(){f.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,h){var m,v=1,S=f.Deferred(),C=this,k=this.length,$=function(){--v||S.resolveWith(C,[C])};for(typeof l!="string"&&(h=l,l=void 0),l=l||"fx";k--;)m=rt.get(C[k],l+"queueHooks"),m&&m.empty&&(v++,m.empty.add($));return $(),S.promise(h)}});var Fi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Gi=new RegExp("^(?:([+-])=|)("+Fi+")([a-z%]*)$","i"),$e=["Top","Right","Bottom","Left"],yi=E.documentElement,Bi=function(l){return f.contains(l.ownerDocument,l)},Ws={composed:!0};yi.getRootNode&&(Bi=function(l){return f.contains(l.ownerDocument,l)||l.getRootNode(Ws)===l.ownerDocument});var Vi=function(l,h){return l=h||l,l.style.display==="none"||l.style.display===""&&Bi(l)&&f.css(l,"display")==="none"};function Un(l,h,m,v){var S,C,k=20,$=v?function(){return v.cur()}:function(){return f.css(l,h,"")},j=$(),G=m&&m[3]||(f.cssNumber[h]?"":"px"),Z=l.nodeType&&(f.cssNumber[h]||G!=="px"&&+j)&&Gi.exec(f.css(l,h));if(Z&&Z[3]!==G){for(j=j/2,G=G||Z[3],Z=+j||1;k--;)f.style(l,h,Z+G),(1-C)*(1-(C=$()/j||.5))<=0&&(k=0),Z=Z/C;Z=Z*2,f.style(l,h,Z+G),m=m||[]}return m&&(Z=+Z||+j||0,S=m[1]?Z+(m[1]+1)*m[2]:+m[2],v&&(v.unit=G,v.start=Z,v.end=S)),S}var us={};function un(l){var h,m=l.ownerDocument,v=l.nodeName,S=us[v];return S||(h=m.body.appendChild(m.createElement(v)),S=f.css(h,"display"),h.parentNode.removeChild(h),S==="none"&&(S="block"),us[v]=S,S)}function ze(l,h){for(var m,v,S=[],C=0,k=l.length;C<k;C++)v=l[C],v.style&&(m=v.style.display,h?(m==="none"&&(S[C]=rt.get(v,"display")||null,S[C]||(v.style.display="")),v.style.display===""&&Vi(v)&&(S[C]=un(v))):m!=="none"&&(S[C]="none",rt.set(v,"display",m)));for(C=0;C<k;C++)S[C]!=null&&(l[C].style.display=S[C]);return l}f.fn.extend({show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(l){return typeof l=="boolean"?l?this.show():this.hide():this.each(function(){Vi(this)?f(this).show():f(this).hide()})}});var hn=/^(?:checkbox|radio)$/i,hs=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ds=/^$|^module$|\/(?:java|ecma)script/i;(function(){var l=E.createDocumentFragment(),h=l.appendChild(E.createElement("div")),m=E.createElement("input");m.setAttribute("type","radio"),m.setAttribute("checked","checked"),m.setAttribute("name","t"),h.appendChild(m),A.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",A.option=!!h.lastChild})();var Ti={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ti.tbody=Ti.tfoot=Ti.colgroup=Ti.caption=Ti.thead,Ti.th=Ti.td,A.option||(Ti.optgroup=Ti.option=[1,"<select multiple='multiple'>","</select>"]);function ri(l,h){var m;return typeof l.getElementsByTagName<"u"?m=l.getElementsByTagName(h||"*"):typeof l.querySelectorAll<"u"?m=l.querySelectorAll(h||"*"):m=[],h===void 0||h&&V(l,h)?f.merge([l],m):m}function fs(l,h){for(var m=0,v=l.length;m<v;m++)rt.set(l[m],"globalEval",!h||rt.get(h[m],"globalEval"))}var Or=/<|&#?\w+;/;function qn(l,h,m,v,S){for(var C,k,$,j,G,Z,it=h.createDocumentFragment(),K=[],gt=0,Zt=l.length;gt<Zt;gt++)if(C=l[gt],C||C===0)if(B(C)==="object")f.merge(K,C.nodeType?[C]:C);else if(!Or.test(C))K.push(h.createTextNode(C));else{for(k=k||it.appendChild(h.createElement("div")),$=(hs.exec(C)||["",""])[1].toLowerCase(),j=Ti[$]||Ti._default,k.innerHTML=j[1]+f.htmlPrefilter(C)+j[2],Z=j[0];Z--;)k=k.lastChild;f.merge(K,k.childNodes),k=it.firstChild,k.textContent=""}for(it.textContent="",gt=0;C=K[gt++];){if(v&&f.inArray(C,v)>-1){S&&S.push(C);continue}if(G=Bi(C),k=ri(it.appendChild(C),"script"),G&&fs(k),m)for(Z=0;C=k[Z++];)ds.test(C.type||"")&&m.push(C)}return it}var zn=/^([^.]*)(?:\.(.+)|)/;function ki(){return!0}function dn(){return!1}function xn(l,h,m,v,S,C){var k,$;if(typeof h=="object"){typeof m!="string"&&(v=v||m,m=void 0);for($ in h)xn(l,$,m,v,h[$],C);return l}if(v==null&&S==null?(S=m,v=m=void 0):S==null&&(typeof m=="string"?(S=v,v=void 0):(S=v,v=m,m=void 0)),S===!1)S=dn;else if(!S)return l;return C===1&&(k=S,S=function(j){return f().off(j),k.apply(this,arguments)},S.guid=k.guid||(k.guid=f.guid++)),l.each(function(){f.event.add(this,h,S,v,m)})}f.event={global:{},add:function(l,h,m,v,S){var C,k,$,j,G,Z,it,K,gt,Zt,xe,fe=rt.get(l);if(ft(l))for(m.handler&&(C=m,m=C.handler,S=C.selector),S&&f.find.matchesSelector(yi,S),m.guid||(m.guid=f.guid++),(j=fe.events)||(j=fe.events=Object.create(null)),(k=fe.handle)||(k=fe.handle=function(fi){return typeof f<"u"&&f.event.triggered!==fi.type?f.event.dispatch.apply(l,arguments):void 0}),h=(h||"").match(At)||[""],G=h.length;G--;)$=zn.exec(h[G])||[],gt=xe=$[1],Zt=($[2]||"").split(".").sort(),gt&&(it=f.event.special[gt]||{},gt=(S?it.delegateType:it.bindType)||gt,it=f.event.special[gt]||{},Z=f.extend({type:gt,origType:xe,data:v,handler:m,guid:m.guid,selector:S,needsContext:S&&f.expr.match.needsContext.test(S),namespace:Zt.join(".")},C),(K=j[gt])||(K=j[gt]=[],K.delegateCount=0,(!it.setup||it.setup.call(l,v,Zt,k)===!1)&&l.addEventListener&&l.addEventListener(gt,k)),it.add&&(it.add.call(l,Z),Z.handler.guid||(Z.handler.guid=m.guid)),S?K.splice(K.delegateCount++,0,Z):K.push(Z),f.event.global[gt]=!0)},remove:function(l,h,m,v,S){var C,k,$,j,G,Z,it,K,gt,Zt,xe,fe=rt.hasData(l)&&rt.get(l);if(!(!fe||!(j=fe.events))){for(h=(h||"").match(At)||[""],G=h.length;G--;){if($=zn.exec(h[G])||[],gt=xe=$[1],Zt=($[2]||"").split(".").sort(),!gt){for(gt in j)f.event.remove(l,gt+h[G],m,v,!0);continue}for(it=f.event.special[gt]||{},gt=(v?it.delegateType:it.bindType)||gt,K=j[gt]||[],$=$[2]&&new RegExp("(^|\\.)"+Zt.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=C=K.length;C--;)Z=K[C],(S||xe===Z.origType)&&(!m||m.guid===Z.guid)&&(!$||$.test(Z.namespace))&&(!v||v===Z.selector||v==="**"&&Z.selector)&&(K.splice(C,1),Z.selector&&K.delegateCount--,it.remove&&it.remove.call(l,Z));k&&!K.length&&((!it.teardown||it.teardown.call(l,Zt,fe.handle)===!1)&&f.removeEvent(l,gt,fe.handle),delete j[gt])}f.isEmptyObject(j)&&rt.remove(l,"handle events")}},dispatch:function(l){var h,m,v,S,C,k,$=new Array(arguments.length),j=f.event.fix(l),G=(rt.get(this,"events")||Object.create(null))[j.type]||[],Z=f.event.special[j.type]||{};for($[0]=j,h=1;h<arguments.length;h++)$[h]=arguments[h];if(j.delegateTarget=this,!(Z.preDispatch&&Z.preDispatch.call(this,j)===!1)){for(k=f.event.handlers.call(this,j,G),h=0;(S=k[h++])&&!j.isPropagationStopped();)for(j.currentTarget=S.elem,m=0;(C=S.handlers[m++])&&!j.isImmediatePropagationStopped();)(!j.rnamespace||C.namespace===!1||j.rnamespace.test(C.namespace))&&(j.handleObj=C,j.data=C.data,v=((f.event.special[C.origType]||{}).handle||C.handler).apply(S.elem,$),v!==void 0&&(j.result=v)===!1&&(j.preventDefault(),j.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,j),j.result}},handlers:function(l,h){var m,v,S,C,k,$=[],j=h.delegateCount,G=l.target;if(j&&G.nodeType&&!(l.type==="click"&&l.button>=1)){for(;G!==this;G=G.parentNode||this)if(G.nodeType===1&&!(l.type==="click"&&G.disabled===!0)){for(C=[],k={},m=0;m<j;m++)v=h[m],S=v.selector+" ",k[S]===void 0&&(k[S]=v.needsContext?f(S,this).index(G)>-1:f.find(S,this,null,[G]).length),k[S]&&C.push(v);C.length&&$.push({elem:G,handlers:C})}}return G=this,j<h.length&&$.push({elem:G,handlers:h.slice(j)}),$},addProp:function(l,h){Object.defineProperty(f.Event.prototype,l,{enumerable:!0,configurable:!0,get:w(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(m){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:m})}})},fix:function(l){return l[f.expando]?l:new f.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var h=this||l;return hn.test(h.type)&&h.click&&V(h,"input")&&N(h,"click",!0),!1},trigger:function(l){var h=this||l;return hn.test(h.type)&&h.click&&V(h,"input")&&N(h,"click"),!0},_default:function(l){var h=l.target;return hn.test(h.type)&&h.click&&V(h,"input")&&rt.get(h,"click")||V(h,"a")}},beforeunload:{postDispatch:function(l){l.result!==void 0&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}};function N(l,h,m){if(!m){rt.get(l,h)===void 0&&f.event.add(l,h,ki);return}rt.set(l,h,!1),f.event.add(l,h,{namespace:!1,handler:function(v){var S,C=rt.get(this,h);if(v.isTrigger&1&&this[h]){if(C)(f.event.special[h]||{}).delegateType&&v.stopPropagation();else if(C=s.call(arguments),rt.set(this,h,C),this[h](),S=rt.get(this,h),rt.set(this,h,!1),C!==S)return v.stopImmediatePropagation(),v.preventDefault(),S}else C&&(rt.set(this,h,f.event.trigger(C[0],C.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=ki)}})}f.removeEvent=function(l,h,m){l.removeEventListener&&l.removeEventListener(h,m)},f.Event=function(l,h){if(!(this instanceof f.Event))return new f.Event(l,h);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||l.defaultPrevented===void 0&&l.returnValue===!1?ki:dn,this.target=l.target&&l.target.nodeType===3?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,h&&f.extend(this,h),this.timeStamp=l&&l.timeStamp||Date.now(),this[f.expando]=!0},f.Event.prototype={constructor:f.Event,isDefaultPrevented:dn,isPropagationStopped:dn,isImmediatePropagationStopped:dn,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=ki,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=ki,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=ki,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},f.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},f.event.addProp),f.each({focus:"focusin",blur:"focusout"},function(l,h){function m(v){if(E.documentMode){var S=rt.get(this,"handle"),C=f.event.fix(v);C.type=v.type==="focusin"?"focus":"blur",C.isSimulated=!0,S(v),C.target===C.currentTarget&&S(C)}else f.event.simulate(h,v.target,f.event.fix(v))}f.event.special[l]={setup:function(){var v;if(N(this,l,!0),E.documentMode)v=rt.get(this,h),v||this.addEventListener(h,m),rt.set(this,h,(v||0)+1);else return!1},trigger:function(){return N(this,l),!0},teardown:function(){var v;if(E.documentMode)v=rt.get(this,h)-1,v?rt.set(this,h,v):(this.removeEventListener(h,m),rt.remove(this,h));else return!1},_default:function(v){return rt.get(v.target,l)},delegateType:h},f.event.special[h]={setup:function(){var v=this.ownerDocument||this.document||this,S=E.documentMode?this:v,C=rt.get(S,h);C||(E.documentMode?this.addEventListener(h,m):v.addEventListener(l,m,!0)),rt.set(S,h,(C||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,S=E.documentMode?this:v,C=rt.get(S,h)-1;C?rt.set(S,h,C):(E.documentMode?this.removeEventListener(h,m):v.removeEventListener(l,m,!0),rt.remove(S,h))}}}),f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,h){f.event.special[l]={delegateType:h,bindType:h,handle:function(m){var v,S=this,C=m.relatedTarget,k=m.handleObj;return(!C||C!==S&&!f.contains(S,C))&&(m.type=k.origType,v=k.handler.apply(this,arguments),m.type=h),v}}}),f.fn.extend({on:function(l,h,m,v){return xn(this,l,h,m,v)},one:function(l,h,m,v){return xn(this,l,h,m,v,1)},off:function(l,h,m){var v,S;if(l&&l.preventDefault&&l.handleObj)return v=l.handleObj,f(l.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if(typeof l=="object"){for(S in l)this.off(S,h,l[S]);return this}return(h===!1||typeof h=="function")&&(m=h,h=void 0),m===!1&&(m=dn),this.each(function(){f.event.remove(this,l,m,h)})}});var W=/<script|<style|<link/i,Q=/checked\s*(?:[^=]|=\s*.checked.)/i,tt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function lt(l,h){return V(l,"table")&&V(h.nodeType!==11?h:h.firstChild,"tr")&&f(l).children("tbody")[0]||l}function pt(l){return l.type=(l.getAttribute("type")!==null)+"/"+l.type,l}function mt(l){return(l.type||"").slice(0,5)==="true/"?l.type=l.type.slice(5):l.removeAttribute("type"),l}function Ct(l,h){var m,v,S,C,k,$,j;if(h.nodeType===1){if(rt.hasData(l)&&(C=rt.get(l),j=C.events,j)){rt.remove(h,"handle events");for(S in j)for(m=0,v=j[S].length;m<v;m++)f.event.add(h,S,j[S][m])}oe.hasData(l)&&(k=oe.access(l),$=f.extend({},k),oe.set(h,$))}}function Ft(l,h){var m=h.nodeName.toLowerCase();m==="input"&&hn.test(l.type)?h.checked=l.checked:(m==="input"||m==="textarea")&&(h.defaultValue=l.defaultValue)}function It(l,h,m,v){h=a(h);var S,C,k,$,j,G,Z=0,it=l.length,K=it-1,gt=h[0],Zt=w(gt);if(Zt||it>1&&typeof gt=="string"&&!A.checkClone&&Q.test(gt))return l.each(function(xe){var fe=l.eq(xe);Zt&&(h[0]=gt.call(this,xe,fe.html())),It(fe,h,m,v)});if(it&&(S=qn(h,l[0].ownerDocument,!1,l,v),C=S.firstChild,S.childNodes.length===1&&(S=C),C||v)){for(k=f.map(ri(S,"script"),pt),$=k.length;Z<it;Z++)j=S,Z!==K&&(j=f.clone(j,!0,!0),$&&f.merge(k,ri(j,"script"))),m.call(l[Z],j,Z);if($)for(G=k[k.length-1].ownerDocument,f.map(k,mt),Z=0;Z<$;Z++)j=k[Z],ds.test(j.type||"")&&!rt.access(j,"globalEval")&&f.contains(G,j)&&(j.src&&(j.type||"").toLowerCase()!=="module"?f._evalUrl&&!j.noModule&&f._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")},G):M(j.textContent.replace(tt,""),j,G))}return l}function de(l,h,m){for(var v,S=h?f.filter(h,l):l,C=0;(v=S[C])!=null;C++)!m&&v.nodeType===1&&f.cleanData(ri(v)),v.parentNode&&(m&&Bi(v)&&fs(ri(v,"script")),v.parentNode.removeChild(v));return l}f.extend({htmlPrefilter:function(l){return l},clone:function(l,h,m){var v,S,C,k,$=l.cloneNode(!0),j=Bi(l);if(!A.noCloneChecked&&(l.nodeType===1||l.nodeType===11)&&!f.isXMLDoc(l))for(k=ri($),C=ri(l),v=0,S=C.length;v<S;v++)Ft(C[v],k[v]);if(h)if(m)for(C=C||ri(l),k=k||ri($),v=0,S=C.length;v<S;v++)Ct(C[v],k[v]);else Ct(l,$);return k=ri($,"script"),k.length>0&&fs(k,!j&&ri(l,"script")),$},cleanData:function(l){for(var h,m,v,S=f.event.special,C=0;(m=l[C])!==void 0;C++)if(ft(m)){if(h=m[rt.expando]){if(h.events)for(v in h.events)S[v]?f.event.remove(m,v):f.removeEvent(m,v,h.handle);m[rt.expando]=void 0}m[oe.expando]&&(m[oe.expando]=void 0)}}}),f.fn.extend({detach:function(l){return de(this,l,!0)},remove:function(l){return de(this,l)},text:function(l){return ct(this,function(h){return h===void 0?f.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=h)})},null,l,arguments.length)},append:function(){return It(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=lt(this,l);h.appendChild(l)}})},prepend:function(){return It(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=lt(this,l);h.insertBefore(l,h.firstChild)}})},before:function(){return It(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return It(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,h=0;(l=this[h])!=null;h++)l.nodeType===1&&(f.cleanData(ri(l,!1)),l.textContent="");return this},clone:function(l,h){return l=l??!1,h=h??l,this.map(function(){return f.clone(this,l,h)})},html:function(l){return ct(this,function(h){var m=this[0]||{},v=0,S=this.length;if(h===void 0&&m.nodeType===1)return m.innerHTML;if(typeof h=="string"&&!W.test(h)&&!Ti[(hs.exec(h)||["",""])[1].toLowerCase()]){h=f.htmlPrefilter(h);try{for(;v<S;v++)m=this[v]||{},m.nodeType===1&&(f.cleanData(ri(m,!1)),m.innerHTML=h);m=0}catch{}}m&&this.empty().append(h)},null,l,arguments.length)},replaceWith:function(){var l=[];return It(this,arguments,function(h){var m=this.parentNode;f.inArray(this,l)<0&&(f.cleanData(ri(this)),m&&m.replaceChild(h,this))},l)}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,h){f.fn[l]=function(m){for(var v,S=[],C=f(m),k=C.length-1,$=0;$<=k;$++)v=$===k?this:this.clone(!0),f(C[$])[h](v),o.apply(S,v.get());return this.pushStack(S)}});var le=new RegExp("^("+Fi+")(?!px)[a-z%]+$","i"),ye=/^--/,Qt=function(l){var h=l.ownerDocument.defaultView;return(!h||!h.opener)&&(h=t),h.getComputedStyle(l)},ue=function(l,h,m){var v,S,C={};for(S in h)C[S]=l.style[S],l.style[S]=h[S];v=m.call(l);for(S in h)l.style[S]=C[S];return v},we=new RegExp($e.join("|"),"i");(function(){function l(){if(G){j.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",G.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yi.appendChild(j).appendChild(G);var Z=t.getComputedStyle(G);m=Z.top!=="1%",$=h(Z.marginLeft)===12,G.style.right="60%",C=h(Z.right)===36,v=h(Z.width)===36,G.style.position="absolute",S=h(G.offsetWidth/3)===12,yi.removeChild(j),G=null}}function h(Z){return Math.round(parseFloat(Z))}var m,v,S,C,k,$,j=E.createElement("div"),G=E.createElement("div");G.style&&(G.style.backgroundClip="content-box",G.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle=G.style.backgroundClip==="content-box",f.extend(A,{boxSizingReliable:function(){return l(),v},pixelBoxStyles:function(){return l(),C},pixelPosition:function(){return l(),m},reliableMarginLeft:function(){return l(),$},scrollboxSize:function(){return l(),S},reliableTrDimensions:function(){var Z,it,K,gt;return k==null&&(Z=E.createElement("table"),it=E.createElement("tr"),K=E.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",it.style.cssText="box-sizing:content-box;border:1px solid",it.style.height="1px",K.style.height="9px",K.style.display="block",yi.appendChild(Z).appendChild(it).appendChild(K),gt=t.getComputedStyle(it),k=parseInt(gt.height,10)+parseInt(gt.borderTopWidth,10)+parseInt(gt.borderBottomWidth,10)===it.offsetHeight,yi.removeChild(Z)),k}}))})();function Me(l,h,m){var v,S,C,k,$=ye.test(h),j=l.style;return m=m||Qt(l),m&&(k=m.getPropertyValue(h)||m[h],$&&k&&(k=k.replace(Ht,"$1")||void 0),k===""&&!Bi(l)&&(k=f.style(l,h)),!A.pixelBoxStyles()&&le.test(k)&&we.test(h)&&(v=j.width,S=j.minWidth,C=j.maxWidth,j.minWidth=j.maxWidth=j.width=k,k=m.width,j.width=v,j.minWidth=S,j.maxWidth=C)),k!==void 0?k+"":k}function Ae(l,h){return{get:function(){if(l()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var Be=["Webkit","Moz","ms"],Fe=E.createElement("div").style,wi={};function Ue(l){for(var h=l[0].toUpperCase()+l.slice(1),m=Be.length;m--;)if(l=Be[m]+h,l in Fe)return l}function hi(l){var h=f.cssProps[l]||wi[l];return h||(l in Fe?l:wi[l]=Ue(l)||l)}var di=/^(none|table(?!-c[ea]).+)/,Sn={position:"absolute",visibility:"hidden",display:"block"},ps={letterSpacing:"0",fontWeight:"400"};function Wn(l,h,m){var v=Gi.exec(h);return v?Math.max(0,v[2]-(m||0))+(v[3]||"px"):h}function Gn(l,h,m,v,S,C){var k=h==="width"?1:0,$=0,j=0,G=0;if(m===(v?"border":"content"))return 0;for(;k<4;k+=2)m==="margin"&&(G+=f.css(l,m+$e[k],!0,S)),v?(m==="content"&&(j-=f.css(l,"padding"+$e[k],!0,S)),m!=="margin"&&(j-=f.css(l,"border"+$e[k]+"Width",!0,S))):(j+=f.css(l,"padding"+$e[k],!0,S),m!=="padding"?j+=f.css(l,"border"+$e[k]+"Width",!0,S):$+=f.css(l,"border"+$e[k]+"Width",!0,S));return!v&&C>=0&&(j+=Math.max(0,Math.ceil(l["offset"+h[0].toUpperCase()+h.slice(1)]-C-j-$-.5))||0),j+G}function Xi(l,h,m){var v=Qt(l),S=!A.boxSizingReliable()||m,C=S&&f.css(l,"boxSizing",!1,v)==="border-box",k=C,$=Me(l,h,v),j="offset"+h[0].toUpperCase()+h.slice(1);if(le.test($)){if(!m)return $;$="auto"}return(!A.boxSizingReliable()&&C||!A.reliableTrDimensions()&&V(l,"tr")||$==="auto"||!parseFloat($)&&f.css(l,"display",!1,v)==="inline")&&l.getClientRects().length&&(C=f.css(l,"boxSizing",!1,v)==="border-box",k=j in l,k&&($=l[j])),$=parseFloat($)||0,$+Gn(l,h,m||(C?"border":"content"),k,v,$)+"px"}f.extend({cssHooks:{opacity:{get:function(l,h){if(h){var m=Me(l,"opacity");return m===""?"1":m}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(l,h,m,v){if(!(!l||l.nodeType===3||l.nodeType===8||!l.style)){var S,C,k,$=Dt(h),j=ye.test(h),G=l.style;if(j||(h=hi($)),k=f.cssHooks[h]||f.cssHooks[$],m!==void 0){if(C=typeof m,C==="string"&&(S=Gi.exec(m))&&S[1]&&(m=Un(l,h,S),C="number"),m==null||m!==m)return;C==="number"&&!j&&(m+=S&&S[3]||(f.cssNumber[$]?"":"px")),!A.clearCloneStyle&&m===""&&h.indexOf("background")===0&&(G[h]="inherit"),(!k||!("set"in k)||(m=k.set(l,m,v))!==void 0)&&(j?G.setProperty(h,m):G[h]=m)}else return k&&"get"in k&&(S=k.get(l,!1,v))!==void 0?S:G[h]}},css:function(l,h,m,v){var S,C,k,$=Dt(h),j=ye.test(h);return j||(h=hi($)),k=f.cssHooks[h]||f.cssHooks[$],k&&"get"in k&&(S=k.get(l,!0,m)),S===void 0&&(S=Me(l,h,v)),S==="normal"&&h in ps&&(S=ps[h]),m===""||m?(C=parseFloat(S),m===!0||isFinite(C)?C||0:S):S}}),f.each(["height","width"],function(l,h){f.cssHooks[h]={get:function(m,v,S){if(v)return di.test(f.css(m,"display"))&&(!m.getClientRects().length||!m.getBoundingClientRect().width)?ue(m,Sn,function(){return Xi(m,h,S)}):Xi(m,h,S)},set:function(m,v,S){var C,k=Qt(m),$=!A.scrollboxSize()&&k.position==="absolute",j=$||S,G=j&&f.css(m,"boxSizing",!1,k)==="border-box",Z=S?Gn(m,h,S,G,k):0;return G&&$&&(Z-=Math.ceil(m["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(k[h])-Gn(m,h,"border",!1,k)-.5)),Z&&(C=Gi.exec(v))&&(C[3]||"px")!=="px"&&(m.style[h]=v,v=f.css(m,h)),Wn(m,v,Z)}}}),f.cssHooks.marginLeft=Ae(A.reliableMarginLeft,function(l,h){if(h)return(parseFloat(Me(l,"marginLeft"))||l.getBoundingClientRect().left-ue(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),f.each({margin:"",padding:"",border:"Width"},function(l,h){f.cssHooks[l+h]={expand:function(m){for(var v=0,S={},C=typeof m=="string"?m.split(" "):[m];v<4;v++)S[l+$e[v]+h]=C[v]||C[v-2]||C[0];return S}},l!=="margin"&&(f.cssHooks[l+h].set=Wn)}),f.fn.extend({css:function(l,h){return ct(this,function(m,v,S){var C,k,$={},j=0;if(Array.isArray(v)){for(C=Qt(m),k=v.length;j<k;j++)$[v[j]]=f.css(m,v[j],!1,C);return $}return S!==void 0?f.style(m,v,S):f.css(m,v)},l,h,arguments.length>1)}});function ai(l,h,m,v,S){return new ai.prototype.init(l,h,m,v,S)}f.Tween=ai,ai.prototype={constructor:ai,init:function(l,h,m,v,S,C){this.elem=l,this.prop=m,this.easing=S||f.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=v,this.unit=C||(f.cssNumber[m]?"":"px")},cur:function(){var l=ai.propHooks[this.prop];return l&&l.get?l.get(this):ai.propHooks._default.get(this)},run:function(l){var h,m=ai.propHooks[this.prop];return this.options.duration?this.pos=h=f.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):this.pos=h=l,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),m&&m.set?m.set(this):ai.propHooks._default.set(this),this}},ai.prototype.init.prototype=ai.prototype,ai.propHooks={_default:{get:function(l){var h;return l.elem.nodeType!==1||l.elem[l.prop]!=null&&l.elem.style[l.prop]==null?l.elem[l.prop]:(h=f.css(l.elem,l.prop,""),!h||h==="auto"?0:h)},set:function(l){f.fx.step[l.prop]?f.fx.step[l.prop](l):l.elem.nodeType===1&&(f.cssHooks[l.prop]||l.elem.style[hi(l.prop)]!=null)?f.style(l.elem,l.prop,l.now+l.unit):l.elem[l.prop]=l.now}}},ai.propHooks.scrollTop=ai.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},f.easing={linear:function(l){return l},swing:function(l){return .5-Math.cos(l*Math.PI)/2},_default:"swing"},f.fx=ai.prototype.init,f.fx.step={};var Oi,ji,Ki=/^(?:toggle|show|hide)$/,Hi=/queueHooks$/;function gs(){ji&&(E.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(gs):t.setTimeout(gs,f.fx.interval),f.fx.tick())}function Lr(){return t.setTimeout(function(){Oi=void 0}),Oi=Date.now()}function Gs(l,h){var m,v=0,S={height:l};for(h=h?1:0;v<4;v+=2-h)m=$e[v],S["margin"+m]=S["padding"+m]=l;return h&&(S.opacity=S.width=l),S}function Pa(l,h,m){for(var v,S=(Yi.tweeners[h]||[]).concat(Yi.tweeners["*"]),C=0,k=S.length;C<k;C++)if(v=S[C].call(m,h,l))return v}function fn(l,h,m){var v,S,C,k,$,j,G,Z,it="width"in h||"height"in h,K=this,gt={},Zt=l.style,xe=l.nodeType&&Vi(l),fe=rt.get(l,"fxshow");m.queue||(k=f._queueHooks(l,"fx"),k.unqueued==null&&(k.unqueued=0,$=k.empty.fire,k.empty.fire=function(){k.unqueued||$()}),k.unqueued++,K.always(function(){K.always(function(){k.unqueued--,f.queue(l,"fx").length||k.empty.fire()})}));for(v in h)if(S=h[v],Ki.test(S)){if(delete h[v],C=C||S==="toggle",S===(xe?"hide":"show"))if(S==="show"&&fe&&fe[v]!==void 0)xe=!0;else continue;gt[v]=fe&&fe[v]||f.style(l,v)}if(j=!f.isEmptyObject(h),!(!j&&f.isEmptyObject(gt))){it&&l.nodeType===1&&(m.overflow=[Zt.overflow,Zt.overflowX,Zt.overflowY],G=fe&&fe.display,G==null&&(G=rt.get(l,"display")),Z=f.css(l,"display"),Z==="none"&&(G?Z=G:(ze([l],!0),G=l.style.display||G,Z=f.css(l,"display"),ze([l]))),(Z==="inline"||Z==="inline-block"&&G!=null)&&f.css(l,"float")==="none"&&(j||(K.done(function(){Zt.display=G}),G==null&&(Z=Zt.display,G=Z==="none"?"":Z)),Zt.display="inline-block")),m.overflow&&(Zt.overflow="hidden",K.always(function(){Zt.overflow=m.overflow[0],Zt.overflowX=m.overflow[1],Zt.overflowY=m.overflow[2]})),j=!1;for(v in gt)j||(fe?"hidden"in fe&&(xe=fe.hidden):fe=rt.access(l,"fxshow",{display:G}),C&&(fe.hidden=!xe),xe&&ze([l],!0),K.done(function(){xe||ze([l]),rt.remove(l,"fxshow");for(v in gt)f.style(l,v,gt[v])})),j=Pa(xe?fe[v]:0,v,K),v in fe||(fe[v]=j.start,xe&&(j.end=j.start,j.start=0))}}function rs(l,h){var m,v,S,C,k;for(m in l)if(v=Dt(m),S=h[v],C=l[m],Array.isArray(C)&&(S=C[1],C=l[m]=C[0]),m!==v&&(l[v]=C,delete l[m]),k=f.cssHooks[v],k&&"expand"in k){C=k.expand(C),delete l[v];for(m in C)m in l||(l[m]=C[m],h[m]=S)}else h[v]=S}function Yi(l,h,m){var v,S,C=0,k=Yi.prefilters.length,$=f.Deferred().always(function(){delete j.elem}),j=function(){if(S)return!1;for(var it=Oi||Lr(),K=Math.max(0,G.startTime+G.duration-it),gt=K/G.duration||0,Zt=1-gt,xe=0,fe=G.tweens.length;xe<fe;xe++)G.tweens[xe].run(Zt);return $.notifyWith(l,[G,Zt,K]),Zt<1&&fe?K:(fe||$.notifyWith(l,[G,1,0]),$.resolveWith(l,[G]),!1)},G=$.promise({elem:l,props:f.extend({},h),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},m),originalProperties:h,originalOptions:m,startTime:Oi||Lr(),duration:m.duration,tweens:[],createTween:function(it,K){var gt=f.Tween(l,G.opts,it,K,G.opts.specialEasing[it]||G.opts.easing);return G.tweens.push(gt),gt},stop:function(it){var K=0,gt=it?G.tweens.length:0;if(S)return this;for(S=!0;K<gt;K++)G.tweens[K].run(1);return it?($.notifyWith(l,[G,1,0]),$.resolveWith(l,[G,it])):$.rejectWith(l,[G,it]),this}}),Z=G.props;for(rs(Z,G.opts.specialEasing);C<k;C++)if(v=Yi.prefilters[C].call(G,l,Z,G.opts),v)return w(v.stop)&&(f._queueHooks(G.elem,G.opts.queue).stop=v.stop.bind(v)),v;return f.map(Z,Pa,G),w(G.opts.start)&&G.opts.start.call(l,G),G.progress(G.opts.progress).done(G.opts.done,G.opts.complete).fail(G.opts.fail).always(G.opts.always),f.fx.timer(f.extend(j,{elem:l,anim:G,queue:G.opts.queue})),G}f.Animation=f.extend(Yi,{tweeners:{"*":[function(l,h){var m=this.createTween(l,h);return Un(m.elem,l,Gi.exec(h),m),m}]},tweener:function(l,h){w(l)?(h=l,l=["*"]):l=l.match(At);for(var m,v=0,S=l.length;v<S;v++)m=l[v],Yi.tweeners[m]=Yi.tweeners[m]||[],Yi.tweeners[m].unshift(h)},prefilters:[fn],prefilter:function(l,h){h?Yi.prefilters.unshift(l):Yi.prefilters.push(l)}}),f.speed=function(l,h,m){var v=l&&typeof l=="object"?f.extend({},l):{complete:m||!m&&h||w(l)&&l,duration:l,easing:m&&h||h&&!w(h)&&h};return f.fx.off?v.duration=0:typeof v.duration!="number"&&(v.duration in f.fx.speeds?v.duration=f.fx.speeds[v.duration]:v.duration=f.fx.speeds._default),(v.queue==null||v.queue===!0)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){w(v.old)&&v.old.call(this),v.queue&&f.dequeue(this,v.queue)},v},f.fn.extend({fadeTo:function(l,h,m,v){return this.filter(Vi).css("opacity",0).show().end().animate({opacity:h},l,m,v)},animate:function(l,h,m,v){var S=f.isEmptyObject(l),C=f.speed(h,m,v),k=function(){var $=Yi(this,f.extend({},l),C);(S||rt.get(this,"finish"))&&$.stop(!0)};return k.finish=k,S||C.queue===!1?this.each(k):this.queue(C.queue,k)},stop:function(l,h,m){var v=function(S){var C=S.stop;delete S.stop,C(m)};return typeof l!="string"&&(m=h,h=l,l=void 0),h&&this.queue(l||"fx",[]),this.each(function(){var S=!0,C=l!=null&&l+"queueHooks",k=f.timers,$=rt.get(this);if(C)$[C]&&$[C].stop&&v($[C]);else for(C in $)$[C]&&$[C].stop&&Hi.test(C)&&v($[C]);for(C=k.length;C--;)k[C].elem===this&&(l==null||k[C].queue===l)&&(k[C].anim.stop(m),S=!1,k.splice(C,1));(S||!m)&&f.dequeue(this,l)})},finish:function(l){return l!==!1&&(l=l||"fx"),this.each(function(){var h,m=rt.get(this),v=m[l+"queue"],S=m[l+"queueHooks"],C=f.timers,k=v?v.length:0;for(m.finish=!0,f.queue(this,l,[]),S&&S.stop&&S.stop.call(this,!0),h=C.length;h--;)C[h].elem===this&&C[h].queue===l&&(C[h].anim.stop(!0),C.splice(h,1));for(h=0;h<k;h++)v[h]&&v[h].finish&&v[h].finish.call(this);delete m.finish})}}),f.each(["toggle","show","hide"],function(l,h){var m=f.fn[h];f.fn[h]=function(v,S,C){return v==null||typeof v=="boolean"?m.apply(this,arguments):this.animate(Gs(h,!0),v,S,C)}}),f.each({slideDown:Gs("show"),slideUp:Gs("hide"),slideToggle:Gs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,h){f.fn[l]=function(m,v,S){return this.animate(h,m,v,S)}}),f.timers=[],f.fx.tick=function(){var l,h=0,m=f.timers;for(Oi=Date.now();h<m.length;h++)l=m[h],!l()&&m[h]===l&&m.splice(h--,1);m.length||f.fx.stop(),Oi=void 0},f.fx.timer=function(l){f.timers.push(l),f.fx.start()},f.fx.interval=13,f.fx.start=function(){ji||(ji=!0,gs())},f.fx.stop=function(){ji=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(l,h){return l=f.fx&&f.fx.speeds[l]||l,h=h||"fx",this.queue(h,function(m,v){var S=t.setTimeout(m,l);v.stop=function(){t.clearTimeout(S)}})},(function(){var l=E.createElement("input"),h=E.createElement("select"),m=h.appendChild(E.createElement("option"));l.type="checkbox",A.checkOn=l.value!=="",A.optSelected=m.selected,l=E.createElement("input"),l.value="t",l.type="radio",A.radioValue=l.value==="t"})();var Vs,Vn=f.expr.attrHandle;f.fn.extend({attr:function(l,h){return ct(this,f.attr,l,h,arguments.length>1)},removeAttr:function(l){return this.each(function(){f.removeAttr(this,l)})}}),f.extend({attr:function(l,h,m){var v,S,C=l.nodeType;if(!(C===3||C===8||C===2)){if(typeof l.getAttribute>"u")return f.prop(l,h,m);if((C!==1||!f.isXMLDoc(l))&&(S=f.attrHooks[h.toLowerCase()]||(f.expr.match.bool.test(h)?Vs:void 0)),m!==void 0){if(m===null){f.removeAttr(l,h);return}return S&&"set"in S&&(v=S.set(l,m,h))!==void 0?v:(l.setAttribute(h,m+""),m)}return S&&"get"in S&&(v=S.get(l,h))!==null?v:(v=f.find.attr(l,h),v??void 0)}},attrHooks:{type:{set:function(l,h){if(!A.radioValue&&h==="radio"&&V(l,"input")){var m=l.value;return l.setAttribute("type",h),m&&(l.value=m),h}}}},removeAttr:function(l,h){var m,v=0,S=h&&h.match(At);if(S&&l.nodeType===1)for(;m=S[v++];)l.removeAttribute(m)}}),Vs={set:function(l,h,m){return h===!1?f.removeAttr(l,m):l.setAttribute(m,m),m}},f.each(f.expr.match.bool.source.match(/\w+/g),function(l,h){var m=Vn[h]||f.find.attr;Vn[h]=function(v,S,C){var k,$,j=S.toLowerCase();return C||($=Vn[j],Vn[j]=k,k=m(v,S,C)!=null?j:null,Vn[j]=$),k}});var Ir=/^(?:input|select|textarea|button)$/i,Nr=/^(?:a|area)$/i;f.fn.extend({prop:function(l,h){return ct(this,f.prop,l,h,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[f.propFix[l]||l]})}}),f.extend({prop:function(l,h,m){var v,S,C=l.nodeType;if(!(C===3||C===8||C===2))return(C!==1||!f.isXMLDoc(l))&&(h=f.propFix[h]||h,S=f.propHooks[h]),m!==void 0?S&&"set"in S&&(v=S.set(l,m,h))!==void 0?v:l[h]=m:S&&"get"in S&&(v=S.get(l,h))!==null?v:l[h]},propHooks:{tabIndex:{get:function(l){var h=f.find.attr(l,"tabindex");return h?parseInt(h,10):Ir.test(l.nodeName)||Nr.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(f.propHooks.selected={get:function(l){var h=l.parentNode;return h&&h.parentNode&&h.parentNode.selectedIndex,null},set:function(l){var h=l.parentNode;h&&(h.selectedIndex,h.parentNode&&h.parentNode.selectedIndex)}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this});function Xn(l){var h=l.match(At)||[];return h.join(" ")}function pn(l){return l.getAttribute&&l.getAttribute("class")||""}function Xs(l){return Array.isArray(l)?l:typeof l=="string"?l.match(At)||[]:[]}f.fn.extend({addClass:function(l){var h,m,v,S,C,k;return w(l)?this.each(function($){f(this).addClass(l.call(this,$,pn(this)))}):(h=Xs(l),h.length?this.each(function(){if(v=pn(this),m=this.nodeType===1&&" "+Xn(v)+" ",m){for(C=0;C<h.length;C++)S=h[C],m.indexOf(" "+S+" ")<0&&(m+=S+" ");k=Xn(m),v!==k&&this.setAttribute("class",k)}}):this)},removeClass:function(l){var h,m,v,S,C,k;return w(l)?this.each(function($){f(this).removeClass(l.call(this,$,pn(this)))}):arguments.length?(h=Xs(l),h.length?this.each(function(){if(v=pn(this),m=this.nodeType===1&&" "+Xn(v)+" ",m){for(C=0;C<h.length;C++)for(S=h[C];m.indexOf(" "+S+" ")>-1;)m=m.replace(" "+S+" "," ");k=Xn(m),v!==k&&this.setAttribute("class",k)}}):this):this.attr("class","")},toggleClass:function(l,h){var m,v,S,C,k=typeof l,$=k==="string"||Array.isArray(l);return w(l)?this.each(function(j){f(this).toggleClass(l.call(this,j,pn(this),h),h)}):typeof h=="boolean"&&$?h?this.addClass(l):this.removeClass(l):(m=Xs(l),this.each(function(){if($)for(C=f(this),S=0;S<m.length;S++)v=m[S],C.hasClass(v)?C.removeClass(v):C.addClass(v);else(l===void 0||k==="boolean")&&(v=pn(this),v&&rt.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||l===!1?"":rt.get(this,"__className__")||""))}))},hasClass:function(l){var h,m,v=0;for(h=" "+l+" ";m=this[v++];)if(m.nodeType===1&&(" "+Xn(pn(m))+" ").indexOf(h)>-1)return!0;return!1}});var Fo=/\r/g;f.fn.extend({val:function(l){var h,m,v,S=this[0];return arguments.length?(v=w(l),this.each(function(C){var k;this.nodeType===1&&(v?k=l.call(this,C,f(this).val()):k=l,k==null?k="":typeof k=="number"?k+="":Array.isArray(k)&&(k=f.map(k,function($){return $==null?"":$+""})),h=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],(!h||!("set"in h)||h.set(this,k,"value")===void 0)&&(this.value=k))})):S?(h=f.valHooks[S.type]||f.valHooks[S.nodeName.toLowerCase()],h&&"get"in h&&(m=h.get(S,"value"))!==void 0?m:(m=S.value,typeof m=="string"?m.replace(Fo,""):m??"")):void 0}}),f.extend({valHooks:{option:{get:function(l){var h=f.find.attr(l,"value");return h??Xn(f.text(l))}},select:{get:function(l){var h,m,v,S=l.options,C=l.selectedIndex,k=l.type==="select-one",$=k?null:[],j=k?C+1:S.length;for(C<0?v=j:v=k?C:0;v<j;v++)if(m=S[v],(m.selected||v===C)&&!m.disabled&&(!m.parentNode.disabled||!V(m.parentNode,"optgroup"))){if(h=f(m).val(),k)return h;$.push(h)}return $},set:function(l,h){for(var m,v,S=l.options,C=f.makeArray(h),k=S.length;k--;)v=S[k],(v.selected=f.inArray(f.valHooks.option.get(v),C)>-1)&&(m=!0);return m||(l.selectedIndex=-1),C}}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(l,h){if(Array.isArray(h))return l.checked=f.inArray(f(l).val(),h)>-1}},A.checkOn||(f.valHooks[this].get=function(l){return l.getAttribute("value")===null?"on":l.value})});var En=t.location,Ra={guid:Date.now()},Fr=/\?/;f.parseXML=function(l){var h,m;if(!l||typeof l!="string")return null;try{h=new t.DOMParser().parseFromString(l,"text/xml")}catch{}return m=h&&h.getElementsByTagName("parsererror")[0],(!h||m)&&f.error("Invalid XML: "+(m?f.map(m.childNodes,function(v){return v.textContent}).join(`
`):l)),h};var Ma=/^(?:focusinfocus|focusoutblur)$/,Ks=function(l){l.stopPropagation()};f.extend(f.event,{trigger:function(l,h,m,v){var S,C,k,$,j,G,Z,it,K=[m||E],gt=b.call(l,"type")?l.type:l,Zt=b.call(l,"namespace")?l.namespace.split("."):[];if(C=it=k=m=m||E,!(m.nodeType===3||m.nodeType===8)&&!Ma.test(gt+f.event.triggered)&&(gt.indexOf(".")>-1&&(Zt=gt.split("."),gt=Zt.shift(),Zt.sort()),j=gt.indexOf(":")<0&&"on"+gt,l=l[f.expando]?l:new f.Event(gt,typeof l=="object"&&l),l.isTrigger=v?2:3,l.namespace=Zt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Zt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=m),h=h==null?[l]:f.makeArray(h,[l]),Z=f.event.special[gt]||{},!(!v&&Z.trigger&&Z.trigger.apply(m,h)===!1))){if(!v&&!Z.noBubble&&!T(m)){for($=Z.delegateType||gt,Ma.test($+gt)||(C=C.parentNode);C;C=C.parentNode)K.push(C),k=C;k===(m.ownerDocument||E)&&K.push(k.defaultView||k.parentWindow||t)}for(S=0;(C=K[S++])&&!l.isPropagationStopped();)it=C,l.type=S>1?$:Z.bindType||gt,G=(rt.get(C,"events")||Object.create(null))[l.type]&&rt.get(C,"handle"),G&&G.apply(C,h),G=j&&C[j],G&&G.apply&&ft(C)&&(l.result=G.apply(C,h),l.result===!1&&l.preventDefault());return l.type=gt,!v&&!l.isDefaultPrevented()&&(!Z._default||Z._default.apply(K.pop(),h)===!1)&&ft(m)&&j&&w(m[gt])&&!T(m)&&(k=m[j],k&&(m[j]=null),f.event.triggered=gt,l.isPropagationStopped()&&it.addEventListener(gt,Ks),m[gt](),l.isPropagationStopped()&&it.removeEventListener(gt,Ks),f.event.triggered=void 0,k&&(m[j]=k)),l.result}},simulate:function(l,h,m){var v=f.extend(new f.Event,m,{type:l,isSimulated:!0});f.event.trigger(v,null,h)}}),f.fn.extend({trigger:function(l,h){return this.each(function(){f.event.trigger(l,h,this)})},triggerHandler:function(l,h){var m=this[0];if(m)return f.event.trigger(l,h,m,!0)}});var Bo=/\[\]$/,Da=/\r?\n/g,Oa=/^(?:submit|button|image|reset|file)$/i,La=/^(?:input|select|textarea|keygen)/i;function ms(l,h,m,v){var S;if(Array.isArray(h))f.each(h,function(C,k){m||Bo.test(l)?v(l,k):ms(l+"["+(typeof k=="object"&&k!=null?C:"")+"]",k,m,v)});else if(!m&&B(h)==="object")for(S in h)ms(l+"["+S+"]",h[S],m,v);else v(l,h)}f.param=function(l,h){var m,v=[],S=function(C,k){var $=w(k)?k():k;v[v.length]=encodeURIComponent(C)+"="+encodeURIComponent($??"")};if(l==null)return"";if(Array.isArray(l)||l.jquery&&!f.isPlainObject(l))f.each(l,function(){S(this.name,this.value)});else for(m in l)ms(m,l[m],h,S);return v.join("&")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=f.prop(this,"elements");return l?f.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!f(this).is(":disabled")&&La.test(this.nodeName)&&!Oa.test(l)&&(this.checked||!hn.test(l))}).map(function(l,h){var m=f(this).val();return m==null?null:Array.isArray(m)?f.map(m,function(v){return{name:h.name,value:v.replace(Da,`\r
`)}}):{name:h.name,value:m.replace(Da,`\r
`)}}).get()}});var jo=/%20/g,bs=/#.*$/,Cn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ho=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ia=/^(?:GET|HEAD)$/,Ys=/^\/\//,Na={},vs={},Fa="*/".concat("*"),Br=E.createElement("a");Br.href=En.href;function jr(l){return function(h,m){typeof h!="string"&&(m=h,h="*");var v,S=0,C=h.toLowerCase().match(At)||[];if(w(m))for(;v=C[S++];)v[0]==="+"?(v=v.slice(1)||"*",(l[v]=l[v]||[]).unshift(m)):(l[v]=l[v]||[]).push(m)}}function Hr(l,h,m,v){var S={},C=l===vs;function k($){var j;return S[$]=!0,f.each(l[$]||[],function(G,Z){var it=Z(h,m,v);if(typeof it=="string"&&!C&&!S[it])return h.dataTypes.unshift(it),k(it),!1;if(C)return!(j=it)}),j}return k(h.dataTypes[0])||!S["*"]&&k("*")}function $r(l,h){var m,v,S=f.ajaxSettings.flatOptions||{};for(m in h)h[m]!==void 0&&((S[m]?l:v||(v={}))[m]=h[m]);return v&&f.extend(!0,l,v),l}function $o(l,h,m){for(var v,S,C,k,$=l.contents,j=l.dataTypes;j[0]==="*";)j.shift(),v===void 0&&(v=l.mimeType||h.getResponseHeader("Content-Type"));if(v){for(S in $)if($[S]&&$[S].test(v)){j.unshift(S);break}}if(j[0]in m)C=j[0];else{for(S in m){if(!j[0]||l.converters[S+" "+j[0]]){C=S;break}k||(k=S)}C=C||k}if(C)return C!==j[0]&&j.unshift(C),m[C]}function Uo(l,h,m,v){var S,C,k,$,j,G={},Z=l.dataTypes.slice();if(Z[1])for(k in l.converters)G[k.toLowerCase()]=l.converters[k];for(C=Z.shift();C;)if(l.responseFields[C]&&(m[l.responseFields[C]]=h),!j&&v&&l.dataFilter&&(h=l.dataFilter(h,l.dataType)),j=C,C=Z.shift(),C){if(C==="*")C=j;else if(j!=="*"&&j!==C){if(k=G[j+" "+C]||G["* "+C],!k){for(S in G)if($=S.split(" "),$[1]===C&&(k=G[j+" "+$[0]]||G["* "+$[0]],k)){k===!0?k=G[S]:G[S]!==!0&&(C=$[0],Z.unshift($[1]));break}}if(k!==!0)if(k&&l.throws)h=k(h);else try{h=k(h)}catch(it){return{state:"parsererror",error:k?it:"No conversion from "+j+" to "+C}}}}return{state:"success",data:h}}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:En.href,type:"GET",isLocal:Ho.test(En.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fa,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,h){return h?$r($r(l,f.ajaxSettings),h):$r(f.ajaxSettings,l)},ajaxPrefilter:jr(Na),ajaxTransport:jr(vs),ajax:function(l,h){typeof l=="object"&&(h=l,l=void 0),h=h||{};var m,v,S,C,k,$,j,G,Z,it,K=f.ajaxSetup({},h),gt=K.context||K,Zt=K.context&&(gt.nodeType||gt.jquery)?f(gt):f.event,xe=f.Deferred(),fe=f.Callbacks("once memory"),fi=K.statusCode||{},Qe={},en={},nn="canceled",me={readyState:0,getResponseHeader:function(Te){var We;if(j){if(!C)for(C={};We=Tn.exec(S);)C[We[1].toLowerCase()+" "]=(C[We[1].toLowerCase()+" "]||[]).concat(We[2]);We=C[Te.toLowerCase()+" "]}return We==null?null:We.join(", ")},getAllResponseHeaders:function(){return j?S:null},setRequestHeader:function(Te,We){return j==null&&(Te=en[Te.toLowerCase()]=en[Te.toLowerCase()]||Te,Qe[Te]=We),this},overrideMimeType:function(Te){return j==null&&(K.mimeType=Te),this},statusCode:function(Te){var We;if(Te)if(j)me.always(Te[me.status]);else for(We in Te)fi[We]=[fi[We],Te[We]];return this},abort:function(Te){var We=Te||nn;return m&&m.abort(We),kn(0,We),this}};if(xe.promise(me),K.url=((l||K.url||En.href)+"").replace(Ys,En.protocol+"//"),K.type=h.method||h.type||K.method||K.type,K.dataTypes=(K.dataType||"*").toLowerCase().match(At)||[""],K.crossDomain==null){$=E.createElement("a");try{$.href=K.url,$.href=$.href,K.crossDomain=Br.protocol+"//"+Br.host!=$.protocol+"//"+$.host}catch{K.crossDomain=!0}}if(K.data&&K.processData&&typeof K.data!="string"&&(K.data=f.param(K.data,K.traditional)),Hr(Na,K,h,me),j)return me;G=f.event&&K.global,G&&f.active++===0&&f.event.trigger("ajaxStart"),K.type=K.type.toUpperCase(),K.hasContent=!Ia.test(K.type),v=K.url.replace(bs,""),K.hasContent?K.data&&K.processData&&(K.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(K.data=K.data.replace(jo,"+")):(it=K.url.slice(v.length),K.data&&(K.processData||typeof K.data=="string")&&(v+=(Fr.test(v)?"&":"?")+K.data,delete K.data),K.cache===!1&&(v=v.replace(Cn,"$1"),it=(Fr.test(v)?"&":"?")+"_="+Ra.guid+++it),K.url=v+it),K.ifModified&&(f.lastModified[v]&&me.setRequestHeader("If-Modified-Since",f.lastModified[v]),f.etag[v]&&me.setRequestHeader("If-None-Match",f.etag[v])),(K.data&&K.hasContent&&K.contentType!==!1||h.contentType)&&me.setRequestHeader("Content-Type",K.contentType),me.setRequestHeader("Accept",K.dataTypes[0]&&K.accepts[K.dataTypes[0]]?K.accepts[K.dataTypes[0]]+(K.dataTypes[0]!=="*"?", "+Fa+"; q=0.01":""):K.accepts["*"]);for(Z in K.headers)me.setRequestHeader(Z,K.headers[Z]);if(K.beforeSend&&(K.beforeSend.call(gt,me,K)===!1||j))return me.abort();if(nn="abort",fe.add(K.complete),me.done(K.success),me.fail(K.error),m=Hr(vs,K,h,me),!m)kn(-1,"No Transport");else{if(me.readyState=1,G&&Zt.trigger("ajaxSend",[me,K]),j)return me;K.async&&K.timeout>0&&(k=t.setTimeout(function(){me.abort("timeout")},K.timeout));try{j=!1,m.send(Qe,kn)}catch(Te){if(j)throw Te;kn(-1,Te)}}function kn(Te,We,ys,Kn){var Li,ws,$i,gn,Pn,Ui=We;j||(j=!0,k&&t.clearTimeout(k),m=void 0,S=Kn||"",me.readyState=Te>0?4:0,Li=Te>=200&&Te<300||Te===304,ys&&(gn=$o(K,me,ys)),!Li&&f.inArray("script",K.dataTypes)>-1&&f.inArray("json",K.dataTypes)<0&&(K.converters["text script"]=function(){}),gn=Uo(K,gn,me,Li),Li?(K.ifModified&&(Pn=me.getResponseHeader("Last-Modified"),Pn&&(f.lastModified[v]=Pn),Pn=me.getResponseHeader("etag"),Pn&&(f.etag[v]=Pn)),Te===204||K.type==="HEAD"?Ui="nocontent":Te===304?Ui="notmodified":(Ui=gn.state,ws=gn.data,$i=gn.error,Li=!$i)):($i=Ui,(Te||!Ui)&&(Ui="error",Te<0&&(Te=0))),me.status=Te,me.statusText=(We||Ui)+"",Li?xe.resolveWith(gt,[ws,Ui,me]):xe.rejectWith(gt,[me,Ui,$i]),me.statusCode(fi),fi=void 0,G&&Zt.trigger(Li?"ajaxSuccess":"ajaxError",[me,K,Li?ws:$i]),fe.fireWith(gt,[me,Ui]),G&&(Zt.trigger("ajaxComplete",[me,K]),--f.active||f.event.trigger("ajaxStop")))}return me},getJSON:function(l,h,m){return f.get(l,h,m,"json")},getScript:function(l,h){return f.get(l,void 0,h,"script")}}),f.each(["get","post"],function(l,h){f[h]=function(m,v,S,C){return w(v)&&(C=C||S,S=v,v=void 0),f.ajax(f.extend({url:m,type:h,dataType:C,data:v,success:S},f.isPlainObject(m)&&m))}}),f.ajaxPrefilter(function(l){var h;for(h in l.headers)h.toLowerCase()==="content-type"&&(l.contentType=l.headers[h]||"")}),f._evalUrl=function(l,h,m){return f.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){f.globalEval(v,h,m)}})},f.fn.extend({wrapAll:function(l){var h;return this[0]&&(w(l)&&(l=l.call(this[0])),h=f(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var m=this;m.firstElementChild;)m=m.firstElementChild;return m}).append(this)),this},wrapInner:function(l){return w(l)?this.each(function(h){f(this).wrapInner(l.call(this,h))}):this.each(function(){var h=f(this),m=h.contents();m.length?m.wrapAll(l):h.append(l)})},wrap:function(l){var h=w(l);return this.each(function(m){f(this).wrapAll(h?l.call(this,m):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){f(this).replaceWith(this.childNodes)}),this}}),f.expr.pseudos.hidden=function(l){return!f.expr.pseudos.visible(l)},f.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},f.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var qo={0:200,1223:204},as=f.ajaxSettings.xhr();A.cors=!!as&&"withCredentials"in as,A.ajax=as=!!as,f.ajaxTransport(function(l){var h,m;if(A.cors||as&&!l.crossDomain)return{send:function(v,S){var C,k=l.xhr();if(k.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(C in l.xhrFields)k[C]=l.xhrFields[C];l.mimeType&&k.overrideMimeType&&k.overrideMimeType(l.mimeType),!l.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest");for(C in v)k.setRequestHeader(C,v[C]);h=function($){return function(){h&&(h=m=k.onload=k.onerror=k.onabort=k.ontimeout=k.onreadystatechange=null,$==="abort"?k.abort():$==="error"?typeof k.status!="number"?S(0,"error"):S(k.status,k.statusText):S(qo[k.status]||k.status,k.statusText,(k.responseType||"text")!=="text"||typeof k.responseText!="string"?{binary:k.response}:{text:k.responseText},k.getAllResponseHeaders()))}},k.onload=h(),m=k.onerror=k.ontimeout=h("error"),k.onabort!==void 0?k.onabort=m:k.onreadystatechange=function(){k.readyState===4&&t.setTimeout(function(){h&&m()})},h=h("abort");try{k.send(l.hasContent&&l.data||null)}catch($){if(h)throw $}},abort:function(){h&&h()}}}),f.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return f.globalEval(l),l}}}),f.ajaxPrefilter("script",function(l){l.cache===void 0&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),f.ajaxTransport("script",function(l){if(l.crossDomain||l.scriptAttrs){var h,m;return{send:function(v,S){h=f("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",m=function(C){h.remove(),m=null,C&&S(C.type==="error"?404:200,C.type)}),E.head.appendChild(h[0])},abort:function(){m&&m()}}}});var Ba=[],Ur=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Ba.pop()||f.expando+"_"+Ra.guid++;return this[l]=!0,l}}),f.ajaxPrefilter("json jsonp",function(l,h,m){var v,S,C,k=l.jsonp!==!1&&(Ur.test(l.url)?"url":typeof l.data=="string"&&(l.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ur.test(l.data)&&"data");if(k||l.dataTypes[0]==="jsonp")return v=l.jsonpCallback=w(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,k?l[k]=l[k].replace(Ur,"$1"+v):l.jsonp!==!1&&(l.url+=(Fr.test(l.url)?"&":"?")+l.jsonp+"="+v),l.converters["script json"]=function(){return C||f.error(v+" was not called"),C[0]},l.dataTypes[0]="json",S=t[v],t[v]=function(){C=arguments},m.always(function(){S===void 0?f(t).removeProp(v):t[v]=S,l[v]&&(l.jsonpCallback=h.jsonpCallback,Ba.push(v)),C&&w(S)&&S(C[0]),C=S=void 0}),"script"}),A.createHTMLDocument=(function(){var l=E.implementation.createHTMLDocument("").body;return l.innerHTML="<form></form><form></form>",l.childNodes.length===2})(),f.parseHTML=function(l,h,m){if(typeof l!="string")return[];typeof h=="boolean"&&(m=h,h=!1);var v,S,C;return h||(A.createHTMLDocument?(h=E.implementation.createHTMLDocument(""),v=h.createElement("base"),v.href=E.location.href,h.head.appendChild(v)):h=E),S=Pt.exec(l),C=!m&&[],S?[h.createElement(S[1])]:(S=qn([l],h,C),C&&C.length&&f(C).remove(),f.merge([],S.childNodes))},f.fn.load=function(l,h,m){var v,S,C,k=this,$=l.indexOf(" ");return $>-1&&(v=Xn(l.slice($)),l=l.slice(0,$)),w(h)?(m=h,h=void 0):h&&typeof h=="object"&&(S="POST"),k.length>0&&f.ajax({url:l,type:S||"GET",dataType:"html",data:h}).done(function(j){C=arguments,k.html(v?f("<div>").append(f.parseHTML(j)).find(v):j)}).always(m&&function(j,G){k.each(function(){m.apply(this,C||[j.responseText,G,j])})}),this},f.expr.pseudos.animated=function(l){return f.grep(f.timers,function(h){return l===h.elem}).length},f.offset={setOffset:function(l,h,m){var v,S,C,k,$,j,G,Z=f.css(l,"position"),it=f(l),K={};Z==="static"&&(l.style.position="relative"),$=it.offset(),C=f.css(l,"top"),j=f.css(l,"left"),G=(Z==="absolute"||Z==="fixed")&&(C+j).indexOf("auto")>-1,G?(v=it.position(),k=v.top,S=v.left):(k=parseFloat(C)||0,S=parseFloat(j)||0),w(h)&&(h=h.call(l,m,f.extend({},$))),h.top!=null&&(K.top=h.top-$.top+k),h.left!=null&&(K.left=h.left-$.left+S),"using"in h?h.using.call(l,K):it.css(K)}},f.fn.extend({offset:function(l){if(arguments.length)return l===void 0?this:this.each(function(S){f.offset.setOffset(this,l,S)});var h,m,v=this[0];if(v)return v.getClientRects().length?(h=v.getBoundingClientRect(),m=v.ownerDocument.defaultView,{top:h.top+m.pageYOffset,left:h.left+m.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var l,h,m,v=this[0],S={top:0,left:0};if(f.css(v,"position")==="fixed")h=v.getBoundingClientRect();else{for(h=this.offset(),m=v.ownerDocument,l=v.offsetParent||m.documentElement;l&&(l===m.body||l===m.documentElement)&&f.css(l,"position")==="static";)l=l.parentNode;l&&l!==v&&l.nodeType===1&&(S=f(l).offset(),S.top+=f.css(l,"borderTopWidth",!0),S.left+=f.css(l,"borderLeftWidth",!0))}return{top:h.top-S.top-f.css(v,"marginTop",!0),left:h.left-S.left-f.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&f.css(l,"position")==="static";)l=l.offsetParent;return l||yi})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,h){var m=h==="pageYOffset";f.fn[l]=function(v){return ct(this,function(S,C,k){var $;if(T(S)?$=S:S.nodeType===9&&($=S.defaultView),k===void 0)return $?$[h]:S[C];$?$.scrollTo(m?$.pageXOffset:k,m?k:$.pageYOffset):S[C]=k},l,v,arguments.length)}}),f.each(["top","left"],function(l,h){f.cssHooks[h]=Ae(A.pixelPosition,function(m,v){if(v)return v=Me(m,h),le.test(v)?f(m).position()[h]+"px":v})}),f.each({Height:"height",Width:"width"},function(l,h){f.each({padding:"inner"+l,content:h,"":"outer"+l},function(m,v){f.fn[v]=function(S,C){var k=arguments.length&&(m||typeof S!="boolean"),$=m||(S===!0||C===!0?"margin":"border");return ct(this,function(j,G,Z){var it;return T(j)?v.indexOf("outer")===0?j["inner"+l]:j.document.documentElement["client"+l]:j.nodeType===9?(it=j.documentElement,Math.max(j.body["scroll"+l],it["scroll"+l],j.body["offset"+l],it["offset"+l],it["client"+l])):Z===void 0?f.css(j,G,$):f.style(j,G,Z,$)},h,k?S:void 0,k)}})}),f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,h){f.fn[h]=function(m){return this.on(h,m)}}),f.fn.extend({bind:function(l,h,m){return this.on(l,null,h,m)},unbind:function(l,h){return this.off(l,null,h)},delegate:function(l,h,m,v){return this.on(h,l,m,v)},undelegate:function(l,h,m){return arguments.length===1?this.off(l,"**"):this.off(h,l||"**",m)},hover:function(l,h){return this.on("mouseenter",l).on("mouseleave",h||l)}}),f.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,h){f.fn[h]=function(m,v){return arguments.length>0?this.on(h,null,m,v):this.trigger(h)}});var zo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;f.proxy=function(l,h){var m,v,S;if(typeof h=="string"&&(m=l[h],h=l,l=m),!!w(l))return v=s.call(arguments,2),S=function(){return l.apply(h||this,v.concat(s.call(arguments)))},S.guid=l.guid=l.guid||f.guid++,S},f.holdReady=function(l){l?f.readyWait++:f.ready(!0)},f.isArray=Array.isArray,f.parseJSON=JSON.parse,f.nodeName=V,f.isFunction=w,f.isWindow=T,f.camelCase=Dt,f.type=B,f.now=Date.now,f.isNumeric=function(l){var h=f.type(l);return(h==="number"||h==="string")&&!isNaN(l-parseFloat(l))},f.trim=function(l){return l==null?"":(l+"").replace(zo,"$1")};var Wo=t.jQuery,ja=t.$;return f.noConflict=function(l){return t.$===f&&(t.$=ja),l&&t.jQuery===f&&(t.jQuery=Wo),f},typeof e>"u"&&(t.jQuery=t.$=f),f})})(bo)),bo.exports}var Zh=Qh();const td=Yh(Zh);var ed=Object.create,Pu=Object.defineProperty,id=Object.getOwnPropertyDescriptor,Ru=Object.getOwnPropertyNames,nd=Object.getPrototypeOf,sd=Object.prototype.hasOwnProperty,$n=(r,t)=>function(){return t||(0,r[Ru(r)[0]])((t={exports:{}}).exports,t),t.exports},rd=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ru(t))!sd.call(r,n)&&n!==e&&Pu(r,n,{get:()=>t[n],enumerable:!(i=id(t,n))||i.enumerable});return r},Ie=(r,t,e)=>(e=r!=null?ed(nd(r)):{},rd(!r||!r.__esModule?Pu(e,"default",{value:r,enumerable:!0}):e,r)),si=$n({"../alpine/packages/alpinejs/dist/module.cjs.js"(r,t){var e=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=(c,g)=>function(){return g||(0,c[s(c)[0]])((g={exports:{}}).exports,g),g.exports},d=(c,g)=>{for(var _ in g)i(c,_,{get:g[_],enumerable:!0})},p=(c,g,_,P)=>{if(g&&typeof g=="object"||typeof g=="function")for(let D of s(g))!o.call(c,D)&&D!==_&&i(c,D,{get:()=>g[D],enumerable:!(P=n(g,D))||P.enumerable});return c},b=(c,g,_)=>(_=c!=null?e(a(c)):{},p(!c||!c.__esModule?i(_,"default",{value:c,enumerable:!0}):_,c)),y=c=>p(i({},"__esModule",{value:!0}),c),x=u({"node_modules/@vue/shared/dist/shared.cjs.js"(c){Object.defineProperty(c,"__esModule",{value:!0});function g(J,St){const Ot=Object.create(null),Gt=J.split(",");for(let Re=0;Re<Gt.length;Re++)Ot[Gt[Re]]=!0;return St?Re=>!!Ot[Re.toLowerCase()]:Re=>!!Ot[Re]}var _={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"HYDRATE_EVENTS",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},P={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},D="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",I=g(D),F=2;function X(J,St=0,Ot=J.length){let Gt=J.split(/(\r?\n)/);const Re=Gt.filter((xi,oi)=>oi%2===1);Gt=Gt.filter((xi,oi)=>oi%2===0);let qe=0;const Ai=[];for(let xi=0;xi<Gt.length;xi++)if(qe+=Gt[xi].length+(Re[xi]&&Re[xi].length||0),qe>=St){for(let oi=xi-F;oi<=xi+F||Ot>qe;oi++){if(oi<0||oi>=Gt.length)continue;const ea=oi+1;Ai.push(`${ea}${" ".repeat(Math.max(3-String(ea).length,0))}|  ${Gt[oi]}`);const fr=Gt[oi].length,ao=Re[oi]&&Re[oi].length||0;if(oi===xi){const pr=St-(qe-(fr+ao)),ol=Math.max(1,Ot>qe?fr-pr:Ot-St);Ai.push("   |  "+" ".repeat(pr)+"^".repeat(ol))}else if(oi>xi){if(Ot>qe){const pr=Math.max(Math.min(Ot-qe,fr),1);Ai.push("   |  "+"^".repeat(pr))}qe+=fr+ao}}break}return Ai.join(`
`)}var Y="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ot=g(Y),_t=g(Y+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),xt=/[>/="'\u0009\u000a\u000c\u0020]/,$t={};function pe(J){if($t.hasOwnProperty(J))return $t[J];const St=xt.test(J);return St&&console.error(`unsafe attribute name: ${J}`),$t[J]=!St}var Oe={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Ye=g("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),zt=g("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function _e(J){if(vn(J)){const St={};for(let Ot=0;Ot<J.length;Ot++){const Gt=J[Ot],Re=_e(Ts(Gt)?_i(Gt):Gt);if(Re)for(const qe in Re)St[qe]=Re[qe]}return St}else if(Dn(J))return J}var Kt=/;(?![^(]*\))/g,Pe=/:(.+)/;function _i(J){const St={};return J.split(Kt).forEach(Ot=>{if(Ot){const Gt=Ot.split(Pe);Gt.length>1&&(St[Gt[0].trim()]=Gt[1].trim())}}),St}function bn(J){let St="";if(!J)return St;for(const Ot in J){const Gt=J[Ot],Re=Ot.startsWith("--")?Ot:so(Ot);(Ts(Gt)||typeof Gt=="number"&&Ye(Re))&&(St+=`${Re}:${Gt};`)}return St}function Mn(J){let St="";if(Ts(J))St=J;else if(vn(J))for(let Ot=0;Ot<J.length;Ot++){const Gt=Mn(J[Ot]);Gt&&(St+=Gt+" ")}else if(Dn(J))for(const Ot in J)J[Ot]&&(St+=Ot+" ");return St.trim()}var er="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Vr="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Xr="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",ir=g(er),Ko=g(Vr),nr=g(Xr),Yo=/["'&<>]/;function Jo(J){const St=""+J,Ot=Yo.exec(St);if(!Ot)return St;let Gt="",Re,qe,Ai=0;for(qe=Ot.index;qe<St.length;qe++){switch(St.charCodeAt(qe)){case 34:Re="&quot;";break;case 38:Re="&amp;";break;case 39:Re="&#39;";break;case 60:Re="&lt;";break;case 62:Re="&gt;";break;default:continue}Ai!==qe&&(Gt+=St.substring(Ai,qe)),Ai=qe+1,Gt+=Re}return Ai!==qe?Gt+St.substring(Ai,qe):Gt}var Wa=/^-?>|<!--|-->|--!>|<!-$/g;function Qo(J){return J.replace(Wa,"")}function Zo(J,St){if(J.length!==St.length)return!1;let Ot=!0;for(let Gt=0;Ot&&Gt<J.length;Gt++)Ot=sr(J[Gt],St[Gt]);return Ot}function sr(J,St){if(J===St)return!0;let Ot=Qr(J),Gt=Qr(St);if(Ot||Gt)return Ot&&Gt?J.getTime()===St.getTime():!1;if(Ot=vn(J),Gt=vn(St),Ot||Gt)return Ot&&Gt?Zo(J,St):!1;if(Ot=Dn(J),Gt=Dn(St),Ot||Gt){if(!Ot||!Gt)return!1;const Re=Object.keys(J).length,qe=Object.keys(St).length;if(Re!==qe)return!1;for(const Ai in J){const xi=J.hasOwnProperty(Ai),oi=St.hasOwnProperty(Ai);if(xi&&!oi||!xi&&oi||!sr(J[Ai],St[Ai]))return!1}}return String(J)===String(St)}function Ga(J,St){return J.findIndex(Ot=>sr(Ot,St))}var Va=J=>J==null?"":Dn(J)?JSON.stringify(J,tl,2):String(J),tl=(J,St)=>Cs(St)?{[`Map(${St.size})`]:[...St.entries()].reduce((Ot,[Gt,Re])=>(Ot[`${Gt} =>`]=Re,Ot),{})}:yn(St)?{[`Set(${St.size})`]:[...St.values()]}:Dn(St)&&!vn(St)&&!Za(St)?String(St):St,el=["bigInt","optionalChaining","nullishCoalescingOperator"],Kr=Object.freeze({}),Yr=Object.freeze([]),Jr=()=>{},rr=()=>!1,ar=/^on[^a-z]/,or=J=>ar.test(J),lr=J=>J.startsWith("onUpdate:"),Xa=Object.assign,Ka=(J,St)=>{const Ot=J.indexOf(St);Ot>-1&&J.splice(Ot,1)},Ya=Object.prototype.hasOwnProperty,Ja=(J,St)=>Ya.call(J,St),vn=Array.isArray,Cs=J=>ks(J)==="[object Map]",yn=J=>ks(J)==="[object Set]",Qr=J=>J instanceof Date,Zr=J=>typeof J=="function",Ts=J=>typeof J=="string",il=J=>typeof J=="symbol",Dn=J=>J!==null&&typeof J=="object",cr=J=>Dn(J)&&Zr(J.then)&&Zr(J.catch),Qa=Object.prototype.toString,ks=J=>Qa.call(J),nl=J=>ks(J).slice(8,-1),Za=J=>ks(J)==="[object Object]",to=J=>Ts(J)&&J!=="NaN"&&J[0]!=="-"&&""+parseInt(J,10)===J,eo=g(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ps=J=>{const St=Object.create(null);return Ot=>St[Ot]||(St[Ot]=J(Ot))},io=/-(\w)/g,no=Ps(J=>J.replace(io,(St,Ot)=>Ot?Ot.toUpperCase():"")),sl=/\B([A-Z])/g,so=Ps(J=>J.replace(sl,"-$1").toLowerCase()),Rs=Ps(J=>J.charAt(0).toUpperCase()+J.slice(1)),rl=Ps(J=>J?`on${Rs(J)}`:""),ta=(J,St)=>J!==St&&(J===J||St===St),al=(J,St)=>{for(let Ot=0;Ot<J.length;Ot++)J[Ot](St)},ur=(J,St,Ot)=>{Object.defineProperty(J,St,{configurable:!0,enumerable:!1,value:Ot})},hr=J=>{const St=parseFloat(J);return isNaN(St)?J:St},dr,ro=()=>dr||(dr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});c.EMPTY_ARR=Yr,c.EMPTY_OBJ=Kr,c.NO=rr,c.NOOP=Jr,c.PatchFlagNames=_,c.babelParserDefaultPlugins=el,c.camelize=no,c.capitalize=Rs,c.def=ur,c.escapeHtml=Jo,c.escapeHtmlComment=Qo,c.extend=Xa,c.generateCodeFrame=X,c.getGlobalThis=ro,c.hasChanged=ta,c.hasOwn=Ja,c.hyphenate=so,c.invokeArrayFns=al,c.isArray=vn,c.isBooleanAttr=_t,c.isDate=Qr,c.isFunction=Zr,c.isGloballyWhitelisted=I,c.isHTMLTag=ir,c.isIntegerKey=to,c.isKnownAttr=zt,c.isMap=Cs,c.isModelListener=lr,c.isNoUnitNumericStyleProp=Ye,c.isObject=Dn,c.isOn=or,c.isPlainObject=Za,c.isPromise=cr,c.isReservedProp=eo,c.isSSRSafeAttrName=pe,c.isSVGTag=Ko,c.isSet=yn,c.isSpecialBooleanAttr=ot,c.isString=Ts,c.isSymbol=il,c.isVoidTag=nr,c.looseEqual=sr,c.looseIndexOf=Ga,c.makeMap=g,c.normalizeClass=Mn,c.normalizeStyle=_e,c.objectToString=Qa,c.parseStringStyle=_i,c.propsToAttrMap=Oe,c.remove=Ka,c.slotFlagsText=P,c.stringifyStyle=bn,c.toDisplayString=Va,c.toHandlerKey=rl,c.toNumber=hr,c.toRawType=nl,c.toTypeString=ks}}),A=u({"node_modules/@vue/shared/index.js"(c,g){g.exports=x()}}),w=u({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(c){Object.defineProperty(c,"__esModule",{value:!0});var g=A(),_=new WeakMap,P=[],D,I=Symbol("iterate"),F=Symbol("Map key iterate");function X(O){return O&&O._isEffect===!0}function Y(O,nt=g.EMPTY_OBJ){X(O)&&(O=O.raw);const ut=xt(O,nt);return nt.lazy||ut(),ut}function ot(O){O.active&&($t(O),O.options.onStop&&O.options.onStop(),O.active=!1)}var _t=0;function xt(O,nt){const ut=function(){if(!ut.active)return O();if(!P.includes(ut)){$t(ut);try{return zt(),P.push(ut),D=ut,O()}finally{P.pop(),_e(),D=P[P.length-1]}}};return ut.id=_t++,ut.allowRecurse=!!nt.allowRecurse,ut._isEffect=!0,ut.active=!0,ut.raw=O,ut.deps=[],ut.options=nt,ut}function $t(O){const{deps:nt}=O;if(nt.length){for(let ut=0;ut<nt.length;ut++)nt[ut].delete(O);nt.length=0}}var pe=!0,Oe=[];function Ye(){Oe.push(pe),pe=!1}function zt(){Oe.push(pe),pe=!0}function _e(){const O=Oe.pop();pe=O===void 0?!0:O}function Kt(O,nt,ut){if(!pe||D===void 0)return;let jt=_.get(O);jt||_.set(O,jt=new Map);let Tt=jt.get(ut);Tt||jt.set(ut,Tt=new Set),Tt.has(D)||(Tt.add(D),D.deps.push(Tt),D.options.onTrack&&D.options.onTrack({effect:D,target:O,type:nt,key:ut}))}function Pe(O,nt,ut,jt,Tt,Yt){const be=_.get(O);if(!be)return;const Ge=new Set,Si=gi=>{gi&&gi.forEach(wn=>{(wn!==D||wn.allowRecurse)&&Ge.add(wn)})};if(nt==="clear")be.forEach(Si);else if(ut==="length"&&g.isArray(O))be.forEach((gi,wn)=>{(wn==="length"||wn>=jt)&&Si(gi)});else switch(ut!==void 0&&Si(be.get(ut)),nt){case"add":g.isArray(O)?g.isIntegerKey(ut)&&Si(be.get("length")):(Si(be.get(I)),g.isMap(O)&&Si(be.get(F)));break;case"delete":g.isArray(O)||(Si(be.get(I)),g.isMap(O)&&Si(be.get(F)));break;case"set":g.isMap(O)&&Si(be.get(I));break}const ia=gi=>{gi.options.onTrigger&&gi.options.onTrigger({effect:gi,target:O,key:ut,type:nt,newValue:jt,oldValue:Tt,oldTarget:Yt}),gi.options.scheduler?gi.options.scheduler(gi):gi()};Ge.forEach(ia)}var _i=g.makeMap("__proto__,__v_isRef,__isVue"),bn=new Set(Object.getOwnPropertyNames(Symbol).map(O=>Symbol[O]).filter(g.isSymbol)),Mn=nr(),er=nr(!1,!0),Vr=nr(!0),Xr=nr(!0,!0),ir=Ko();function Ko(){const O={};return["includes","indexOf","lastIndexOf"].forEach(nt=>{O[nt]=function(...ut){const jt=J(this);for(let Yt=0,be=this.length;Yt<be;Yt++)Kt(jt,"get",Yt+"");const Tt=jt[nt](...ut);return Tt===-1||Tt===!1?jt[nt](...ut.map(J)):Tt}}),["push","pop","shift","unshift","splice"].forEach(nt=>{O[nt]=function(...ut){Ye();const jt=J(this)[nt].apply(this,ut);return _e(),jt}}),O}function nr(O=!1,nt=!1){return function(jt,Tt,Yt){if(Tt==="__v_isReactive")return!O;if(Tt==="__v_isReadonly")return O;if(Tt==="__v_raw"&&Yt===(O?nt?no:io:nt?Ps:eo).get(jt))return jt;const be=g.isArray(jt);if(!O&&be&&g.hasOwn(ir,Tt))return Reflect.get(ir,Tt,Yt);const Ge=Reflect.get(jt,Tt,Yt);return(g.isSymbol(Tt)?bn.has(Tt):_i(Tt))||(O||Kt(jt,"get",Tt),nt)?Ge:Gt(Ge)?!be||!g.isIntegerKey(Tt)?Ge.value:Ge:g.isObject(Ge)?O?ta(Ge):Rs(Ge):Ge}}var Yo=Wa(),Jo=Wa(!0);function Wa(O=!1){return function(ut,jt,Tt,Yt){let be=ut[jt];if(!O&&(Tt=J(Tt),be=J(be),!g.isArray(ut)&&Gt(be)&&!Gt(Tt)))return be.value=Tt,!0;const Ge=g.isArray(ut)&&g.isIntegerKey(jt)?Number(jt)<ut.length:g.hasOwn(ut,jt),Si=Reflect.set(ut,jt,Tt,Yt);return ut===J(Yt)&&(Ge?g.hasChanged(Tt,be)&&Pe(ut,"set",jt,Tt,be):Pe(ut,"add",jt,Tt)),Si}}function Qo(O,nt){const ut=g.hasOwn(O,nt),jt=O[nt],Tt=Reflect.deleteProperty(O,nt);return Tt&&ut&&Pe(O,"delete",nt,void 0,jt),Tt}function Zo(O,nt){const ut=Reflect.has(O,nt);return(!g.isSymbol(nt)||!bn.has(nt))&&Kt(O,"has",nt),ut}function sr(O){return Kt(O,"iterate",g.isArray(O)?"length":I),Reflect.ownKeys(O)}var Ga={get:Mn,set:Yo,deleteProperty:Qo,has:Zo,ownKeys:sr},Va={get:Vr,set(O,nt){return console.warn(`Set operation on key "${String(nt)}" failed: target is readonly.`,O),!0},deleteProperty(O,nt){return console.warn(`Delete operation on key "${String(nt)}" failed: target is readonly.`,O),!0}},tl=g.extend({},Ga,{get:er,set:Jo}),el=g.extend({},Va,{get:Xr}),Kr=O=>g.isObject(O)?Rs(O):O,Yr=O=>g.isObject(O)?ta(O):O,Jr=O=>O,rr=O=>Reflect.getPrototypeOf(O);function ar(O,nt,ut=!1,jt=!1){O=O.__v_raw;const Tt=J(O),Yt=J(nt);nt!==Yt&&!ut&&Kt(Tt,"get",nt),!ut&&Kt(Tt,"get",Yt);const{has:be}=rr(Tt),Ge=jt?Jr:ut?Yr:Kr;if(be.call(Tt,nt))return Ge(O.get(nt));if(be.call(Tt,Yt))return Ge(O.get(Yt));O!==Tt&&O.get(nt)}function or(O,nt=!1){const ut=this.__v_raw,jt=J(ut),Tt=J(O);return O!==Tt&&!nt&&Kt(jt,"has",O),!nt&&Kt(jt,"has",Tt),O===Tt?ut.has(O):ut.has(O)||ut.has(Tt)}function lr(O,nt=!1){return O=O.__v_raw,!nt&&Kt(J(O),"iterate",I),Reflect.get(O,"size",O)}function Xa(O){O=J(O);const nt=J(this);return rr(nt).has.call(nt,O)||(nt.add(O),Pe(nt,"add",O,O)),this}function Ka(O,nt){nt=J(nt);const ut=J(this),{has:jt,get:Tt}=rr(ut);let Yt=jt.call(ut,O);Yt?to(ut,jt,O):(O=J(O),Yt=jt.call(ut,O));const be=Tt.call(ut,O);return ut.set(O,nt),Yt?g.hasChanged(nt,be)&&Pe(ut,"set",O,nt,be):Pe(ut,"add",O,nt),this}function Ya(O){const nt=J(this),{has:ut,get:jt}=rr(nt);let Tt=ut.call(nt,O);Tt?to(nt,ut,O):(O=J(O),Tt=ut.call(nt,O));const Yt=jt?jt.call(nt,O):void 0,be=nt.delete(O);return Tt&&Pe(nt,"delete",O,void 0,Yt),be}function Ja(){const O=J(this),nt=O.size!==0,ut=g.isMap(O)?new Map(O):new Set(O),jt=O.clear();return nt&&Pe(O,"clear",void 0,void 0,ut),jt}function vn(O,nt){return function(jt,Tt){const Yt=this,be=Yt.__v_raw,Ge=J(be),Si=nt?Jr:O?Yr:Kr;return!O&&Kt(Ge,"iterate",I),be.forEach((ia,gi)=>jt.call(Tt,Si(ia),Si(gi),Yt))}}function Cs(O,nt,ut){return function(...jt){const Tt=this.__v_raw,Yt=J(Tt),be=g.isMap(Yt),Ge=O==="entries"||O===Symbol.iterator&&be,Si=O==="keys"&&be,ia=Tt[O](...jt),gi=ut?Jr:nt?Yr:Kr;return!nt&&Kt(Yt,"iterate",Si?F:I),{next(){const{value:wn,done:ll}=ia.next();return ll?{value:wn,done:ll}:{value:Ge?[gi(wn[0]),gi(wn[1])]:gi(wn),done:ll}},[Symbol.iterator](){return this}}}}function yn(O){return function(...nt){{const ut=nt[0]?`on key "${nt[0]}" `:"";console.warn(`${g.capitalize(O)} operation ${ut}failed: target is readonly.`,J(this))}return O==="delete"?!1:this}}function Qr(){const O={get(Yt){return ar(this,Yt)},get size(){return lr(this)},has:or,add:Xa,set:Ka,delete:Ya,clear:Ja,forEach:vn(!1,!1)},nt={get(Yt){return ar(this,Yt,!1,!0)},get size(){return lr(this)},has:or,add:Xa,set:Ka,delete:Ya,clear:Ja,forEach:vn(!1,!0)},ut={get(Yt){return ar(this,Yt,!0)},get size(){return lr(this,!0)},has(Yt){return or.call(this,Yt,!0)},add:yn("add"),set:yn("set"),delete:yn("delete"),clear:yn("clear"),forEach:vn(!0,!1)},jt={get(Yt){return ar(this,Yt,!0,!0)},get size(){return lr(this,!0)},has(Yt){return or.call(this,Yt,!0)},add:yn("add"),set:yn("set"),delete:yn("delete"),clear:yn("clear"),forEach:vn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Yt=>{O[Yt]=Cs(Yt,!1,!1),ut[Yt]=Cs(Yt,!0,!1),nt[Yt]=Cs(Yt,!1,!0),jt[Yt]=Cs(Yt,!0,!0)}),[O,ut,nt,jt]}var[Zr,Ts,il,Dn]=Qr();function cr(O,nt){const ut=nt?O?Dn:il:O?Ts:Zr;return(jt,Tt,Yt)=>Tt==="__v_isReactive"?!O:Tt==="__v_isReadonly"?O:Tt==="__v_raw"?jt:Reflect.get(g.hasOwn(ut,Tt)&&Tt in jt?ut:jt,Tt,Yt)}var Qa={get:cr(!1,!1)},ks={get:cr(!1,!0)},nl={get:cr(!0,!1)},Za={get:cr(!0,!0)};function to(O,nt,ut){const jt=J(ut);if(jt!==ut&&nt.call(O,jt)){const Tt=g.toRawType(O);console.warn(`Reactive ${Tt} contains both the raw and reactive versions of the same object${Tt==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var eo=new WeakMap,Ps=new WeakMap,io=new WeakMap,no=new WeakMap;function sl(O){switch(O){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function so(O){return O.__v_skip||!Object.isExtensible(O)?0:sl(g.toRawType(O))}function Rs(O){return O&&O.__v_isReadonly?O:ur(O,!1,Ga,Qa,eo)}function rl(O){return ur(O,!1,tl,ks,Ps)}function ta(O){return ur(O,!0,Va,nl,io)}function al(O){return ur(O,!0,el,Za,no)}function ur(O,nt,ut,jt,Tt){if(!g.isObject(O))return console.warn(`value cannot be made reactive: ${String(O)}`),O;if(O.__v_raw&&!(nt&&O.__v_isReactive))return O;const Yt=Tt.get(O);if(Yt)return Yt;const be=so(O);if(be===0)return O;const Ge=new Proxy(O,be===2?jt:ut);return Tt.set(O,Ge),Ge}function hr(O){return dr(O)?hr(O.__v_raw):!!(O&&O.__v_isReactive)}function dr(O){return!!(O&&O.__v_isReadonly)}function ro(O){return hr(O)||dr(O)}function J(O){return O&&J(O.__v_raw)||O}function St(O){return g.def(O,"__v_skip",!0),O}var Ot=O=>g.isObject(O)?Rs(O):O;function Gt(O){return!!(O&&O.__v_isRef===!0)}function Re(O){return xi(O)}function qe(O){return xi(O,!0)}var Ai=class{constructor(O,nt=!1){this._shallow=nt,this.__v_isRef=!0,this._rawValue=nt?O:J(O),this._value=nt?O:Ot(O)}get value(){return Kt(J(this),"get","value"),this._value}set value(O){O=this._shallow?O:J(O),g.hasChanged(O,this._rawValue)&&(this._rawValue=O,this._value=this._shallow?O:Ot(O),Pe(J(this),"set","value",O))}};function xi(O,nt=!1){return Gt(O)?O:new Ai(O,nt)}function oi(O){Pe(J(O),"set","value",O.value)}function ea(O){return Gt(O)?O.value:O}var fr={get:(O,nt,ut)=>ea(Reflect.get(O,nt,ut)),set:(O,nt,ut,jt)=>{const Tt=O[nt];return Gt(Tt)&&!Gt(ut)?(Tt.value=ut,!0):Reflect.set(O,nt,ut,jt)}};function ao(O){return hr(O)?O:new Proxy(O,fr)}var pr=class{constructor(O){this.__v_isRef=!0;const{get:nt,set:ut}=O(()=>Kt(this,"get","value"),()=>Pe(this,"set","value"));this._get=nt,this._set=ut}get value(){return this._get()}set value(O){this._set(O)}};function ol(O){return new pr(O)}function Gh(O){ro(O)||console.warn("toRefs() expects a reactive object but received a plain one.");const nt=g.isArray(O)?new Array(O.length):{};for(const ut in O)nt[ut]=Ec(O,ut);return nt}var Vh=class{constructor(O,nt){this._object=O,this._key=nt,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(O){this._object[this._key]=O}};function Ec(O,nt){return Gt(O[nt])?O[nt]:new Vh(O,nt)}var Xh=class{constructor(O,nt,ut){this._setter=nt,this._dirty=!0,this.__v_isRef=!0,this.effect=Y(O,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,Pe(J(this),"set","value"))}}),this.__v_isReadonly=ut}get value(){const O=J(this);return O._dirty&&(O._value=this.effect(),O._dirty=!1),Kt(O,"get","value"),O._value}set value(O){this._setter(O)}};function Kh(O){let nt,ut;return g.isFunction(O)?(nt=O,ut=()=>{console.warn("Write operation failed: computed value is readonly")}):(nt=O.get,ut=O.set),new Xh(nt,ut,g.isFunction(O)||!O.set)}c.ITERATE_KEY=I,c.computed=Kh,c.customRef=ol,c.effect=Y,c.enableTracking=zt,c.isProxy=ro,c.isReactive=hr,c.isReadonly=dr,c.isRef=Gt,c.markRaw=St,c.pauseTracking=Ye,c.proxyRefs=ao,c.reactive=Rs,c.readonly=ta,c.ref=Re,c.resetTracking=_e,c.shallowReactive=rl,c.shallowReadonly=al,c.shallowRef=qe,c.stop=ot,c.toRaw=J,c.toRef=Ec,c.toRefs=Gh,c.track=Kt,c.trigger=Pe,c.triggerRef=oi,c.unref=ea}}),T=u({"node_modules/@vue/reactivity/index.js"(c,g){g.exports=w()}}),E={};d(E,{Alpine:()=>L,default:()=>q}),t.exports=y(E);var R=!1,M=!1,B=[],U=-1;function z(c){f(c)}function f(c){B.includes(c)||B.push(c),V()}function H(c){let g=B.indexOf(c);g!==-1&&g>U&&B.splice(g,1)}function V(){!M&&!R&&(R=!0,queueMicrotask(at))}function at(){R=!1,M=!0;for(let c=0;c<B.length;c++)B[c](),U=c;B.length=0,U=-1,M=!1}var st,ht,dt,Ht,te=!0;function kt(c){te=!1,c(),te=!0}function vt(c){st=c.reactive,dt=c.release,ht=g=>c.effect(g,{scheduler:_=>{te?z(_):_()}}),Ht=c.raw}function re(c){ht=c}function ge(c){let g=()=>{};return[P=>{let D=ht(P);return c._x_effects||(c._x_effects=new Set,c._x_runEffects=()=>{c._x_effects.forEach(I=>I())}),c._x_effects.add(D),g=()=>{D!==void 0&&(c._x_effects.delete(D),dt(D))},D},()=>{g()}]}function Le(c,g){let _=!0,P,D=ht(()=>{let I=c();JSON.stringify(I),_?P=I:queueMicrotask(()=>{g(I,P),P=I}),_=!1});return()=>dt(D)}var Ut=[],Pt=[],Rt=[];function Vt(c){Rt.push(c)}function Bt(c,g){typeof g=="function"?(c._x_cleanups||(c._x_cleanups=[]),c._x_cleanups.push(g)):(g=c,Pt.push(g))}function yt(c){Ut.push(c)}function Jt(c,g,_){c._x_attributeCleanups||(c._x_attributeCleanups={}),c._x_attributeCleanups[g]||(c._x_attributeCleanups[g]=[]),c._x_attributeCleanups[g].push(_)}function Ne(c,g){c._x_attributeCleanups&&Object.entries(c._x_attributeCleanups).forEach(([_,P])=>{(g===void 0||g.includes(_))&&(P.forEach(D=>D()),delete c._x_attributeCleanups[_])})}function wt(c){var g,_;for((g=c._x_effects)==null||g.forEach(H);(_=c._x_cleanups)!=null&&_.length;)c._x_cleanups.pop()()}var At=new MutationObserver(qt),ae=!1;function ee(){At.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ae=!0}function Xt(){ui(),At.disconnect(),ae=!1}var Mt=[];function ui(){let c=At.takeRecords();Mt.push(()=>c.length>0&&qt(c));let g=Mt.length;queueMicrotask(()=>{if(Mt.length===g)for(;Mt.length>0;)Mt.shift()()})}function Et(c){if(!ae)return c();Xt();let g=c();return ee(),g}var et=!1,ct=[];function Wt(){et=!0}function ie(){et=!1,qt(ct),ct=[]}function qt(c){if(et){ct=ct.concat(c);return}let g=[],_=new Set,P=new Map,D=new Map;for(let I=0;I<c.length;I++)if(!c[I].target._x_ignoreMutationObserver&&(c[I].type==="childList"&&(c[I].removedNodes.forEach(F=>{F.nodeType===1&&F._x_marker&&_.add(F)}),c[I].addedNodes.forEach(F=>{if(F.nodeType===1){if(_.has(F)){_.delete(F);return}F._x_marker||g.push(F)}})),c[I].type==="attributes")){let F=c[I].target,X=c[I].attributeName,Y=c[I].oldValue,ot=()=>{P.has(F)||P.set(F,[]),P.get(F).push({name:X,value:F.getAttribute(X)})},_t=()=>{D.has(F)||D.set(F,[]),D.get(F).push(X)};F.hasAttribute(X)&&Y===null?ot():F.hasAttribute(X)?(_t(),ot()):_t()}D.forEach((I,F)=>{Ne(F,I)}),P.forEach((I,F)=>{Ut.forEach(X=>X(F,I))});for(let I of _)g.some(F=>F.contains(I))||Pt.forEach(F=>F(I));for(let I of g)I.isConnected&&Rt.forEach(F=>F(I));g=null,_=null,P=null,D=null}function Dt(c){return rt(bt(c))}function ft(c,g,_){return c._x_dataStack=[g,...bt(_||c)],()=>{c._x_dataStack=c._x_dataStack.filter(P=>P!==g)}}function bt(c){return c._x_dataStack?c._x_dataStack:typeof ShadowRoot=="function"&&c instanceof ShadowRoot?bt(c.host):c.parentNode?bt(c.parentNode):[]}function rt(c){return new Proxy({objects:c},oe)}var oe={ownKeys({objects:c}){return Array.from(new Set(c.flatMap(g=>Object.keys(g))))},has({objects:c},g){return g==Symbol.unscopables?!1:c.some(_=>Object.prototype.hasOwnProperty.call(_,g)||Reflect.has(_,g))},get({objects:c},g,_){return g=="toJSON"?Se:Reflect.get(c.find(P=>Reflect.has(P,g))||{},g,_)},set({objects:c},g,_,P){const D=c.find(F=>Object.prototype.hasOwnProperty.call(F,g))||c[c.length-1],I=Object.getOwnPropertyDescriptor(D,g);return I?.set&&I?.get?I.set.call(P,_)||!0:Reflect.set(D,g,_)}};function Se(){return Reflect.ownKeys(this).reduce((g,_)=>(g[_]=Reflect.get(this,_),g),{})}function Ee(c){let g=P=>typeof P=="object"&&!Array.isArray(P)&&P!==null,_=(P,D="")=>{Object.entries(Object.getOwnPropertyDescriptors(P)).forEach(([I,{value:F,enumerable:X}])=>{if(X===!1||F===void 0||typeof F=="object"&&F!==null&&F.__v_skip)return;let Y=D===""?I:`${D}.${I}`;typeof F=="object"&&F!==null&&F._x_interceptor?P[I]=F.initialize(c,Y,I):g(F)&&F!==P&&!(F instanceof Element)&&_(F,Y)})};return _(c)}function He(c,g=()=>{}){let _={initialValue:void 0,_x_interceptor:!0,initialize(P,D,I){return c(this.initialValue,()=>Di(P,D),F=>Fi(P,D,F),D,I)}};return g(_),P=>{if(typeof P=="object"&&P!==null&&P._x_interceptor){let D=_.initialize.bind(_);_.initialize=(I,F,X)=>{let Y=P.initialize(I,F,X);return _.initialValue=Y,D(I,F,X)}}else _.initialValue=P;return _}}function Di(c,g){return g.split(".").reduce((_,P)=>_[P],c)}function Fi(c,g,_){if(typeof g=="string"&&(g=g.split(".")),g.length===1)c[g[0]]=_;else{if(g.length===0)throw error;return c[g[0]]||(c[g[0]]={}),Fi(c[g[0]],g.slice(1),_)}}var Gi={};function $e(c,g){Gi[c]=g}function yi(c,g){let _=Bi(g);return Object.entries(Gi).forEach(([P,D])=>{Object.defineProperty(c,`$${P}`,{get(){return D(g,_)},enumerable:!1})}),c}function Bi(c){let[g,_]=Ft(c),P={interceptor:He,...g};return Bt(c,_),P}function Ws(c,g,_,...P){try{return _(...P)}catch(D){Vi(D,c,g)}}function Vi(c,g,_=void 0){c=Object.assign(c??{message:"No error message given."},{el:g,expression:_}),console.warn(`Alpine Expression Error: ${c.message}

${_?'Expression: "'+_+`"

`:""}`,g),setTimeout(()=>{throw c},0)}var Un=!0;function us(c){let g=Un;Un=!1;let _=c();return Un=g,_}function un(c,g,_={}){let P;return ze(c,g)(D=>P=D,_),P}function ze(...c){return hn(...c)}var hn=ds;function hs(c){hn=c}function ds(c,g){let _={};yi(_,c);let P=[_,...bt(c)],D=typeof g=="function"?Ti(P,g):Or(P,g,c);return Ws.bind(null,c,g,D)}function Ti(c,g){return(_=()=>{},{scope:P={},params:D=[]}={})=>{let I=g.apply(rt([P,...c]),D);qn(_,I)}}var ri={};function fs(c,g){if(ri[c])return ri[c];let _=Object.getPrototypeOf(async function(){}).constructor,P=/^[\n\s]*if.*\(.*\)/.test(c.trim())||/^(let|const)\s/.test(c.trim())?`(async()=>{ ${c} })()`:c,I=(()=>{try{let F=new _(["__self","scope"],`with (scope) { __self.result = ${P} }; __self.finished = true; return __self.result;`);return Object.defineProperty(F,"name",{value:`[Alpine] ${c}`}),F}catch(F){return Vi(F,g,c),Promise.resolve()}})();return ri[c]=I,I}function Or(c,g,_){let P=fs(g,_);return(D=()=>{},{scope:I={},params:F=[]}={})=>{P.result=void 0,P.finished=!1;let X=rt([I,...c]);if(typeof P=="function"){let Y=P(P,X).catch(ot=>Vi(ot,_,g));P.finished?(qn(D,P.result,X,F,_),P.result=void 0):Y.then(ot=>{qn(D,ot,X,F,_)}).catch(ot=>Vi(ot,_,g)).finally(()=>P.result=void 0)}}}function qn(c,g,_,P,D){if(Un&&typeof g=="function"){let I=g.apply(_,P);I instanceof Promise?I.then(F=>qn(c,F,_,P)).catch(F=>Vi(F,D,g)):c(I)}else typeof g=="object"&&g instanceof Promise?g.then(I=>c(I)):c(g)}var zn="x-";function ki(c=""){return zn+c}function dn(c){zn=c}var xn={};function N(c,g){return xn[c]=g,{before(_){if(!xn[_]){console.warn(String.raw`Cannot find directive \`${_}\`. \`${c}\` will use the default order of execution`);return}const P=Fe.indexOf(_);Fe.splice(P>=0?P:Fe.indexOf("DEFAULT"),0,c)}}}function W(c){return Object.keys(xn).includes(c)}function Q(c,g,_){if(g=Array.from(g),c._x_virtualDirectives){let I=Object.entries(c._x_virtualDirectives).map(([X,Y])=>({name:X,value:Y})),F=tt(I);I=I.map(X=>F.find(Y=>Y.name===X.name)?{name:`x-bind:${X.name}`,value:`"${X.value}"`}:X),g=g.concat(I)}let P={};return g.map(ye((I,F)=>P[I]=F)).filter(we).map(Ae(P,_)).sort(wi).map(I=>It(c,I))}function tt(c){return Array.from(c).map(ye()).filter(g=>!we(g))}var lt=!1,pt=new Map,mt=Symbol();function Ct(c){lt=!0;let g=Symbol();mt=g,pt.set(g,[]);let _=()=>{for(;pt.get(g).length;)pt.get(g).shift()();pt.delete(g)},P=()=>{lt=!1,_()};c(_),P()}function Ft(c){let g=[],_=X=>g.push(X),[P,D]=ge(c);return g.push(D),[{Alpine:Kn,effect:P,cleanup:_,evaluateLater:ze.bind(ze,c),evaluate:un.bind(un,c)},()=>g.forEach(X=>X())]}function It(c,g){let _=()=>{},P=xn[g.type]||_,[D,I]=Ft(c);Jt(c,g.original,I);let F=()=>{c._x_ignore||c._x_ignoreSelf||(P.inline&&P.inline(c,g,D),P=P.bind(P,c,g,D),lt?pt.get(mt).push(P):P())};return F.runCleanups=I,F}var de=(c,g)=>({name:_,value:P})=>(_.startsWith(c)&&(_=_.replace(c,g)),{name:_,value:P}),le=c=>c;function ye(c=()=>{}){return({name:g,value:_})=>{let{name:P,value:D}=Qt.reduce((I,F)=>F(I),{name:g,value:_});return P!==g&&c(P,g),{name:P,value:D}}}var Qt=[];function ue(c){Qt.push(c)}function we({name:c}){return Me().test(c)}var Me=()=>new RegExp(`^${zn}([^:^.]+)\\b`);function Ae(c,g){return({name:_,value:P})=>{let D=_.match(Me()),I=_.match(/:([a-zA-Z0-9\-_:]+)/),F=_.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],X=g||c[_]||_;return{type:D?D[1]:null,value:I?I[1]:null,modifiers:F.map(Y=>Y.replace(".","")),expression:P,original:X}}}var Be="DEFAULT",Fe=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Be,"teleport"];function wi(c,g){let _=Fe.indexOf(c.type)===-1?Be:c.type,P=Fe.indexOf(g.type)===-1?Be:g.type;return Fe.indexOf(_)-Fe.indexOf(P)}function Ue(c,g,_={}){c.dispatchEvent(new CustomEvent(g,{detail:_,bubbles:!0,composed:!0,cancelable:!0}))}function hi(c,g){if(typeof ShadowRoot=="function"&&c instanceof ShadowRoot){Array.from(c.children).forEach(D=>hi(D,g));return}let _=!1;if(g(c,()=>_=!0),_)return;let P=c.firstElementChild;for(;P;)hi(P,g),P=P.nextElementSibling}function di(c,...g){console.warn(`Alpine Warning: ${c}`,...g)}var Sn=!1;function ps(){Sn&&di("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Sn=!0,document.body||di("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Ue(document,"alpine:init"),Ue(document,"alpine:initializing"),ee(),Vt(g=>fn(g,hi)),Bt(g=>rs(g)),yt((g,_)=>{Q(g,_).forEach(P=>P())});let c=g=>!Ki(g.parentElement,!0);Array.from(document.querySelectorAll(ai().join(","))).filter(c).forEach(g=>{fn(g)}),Ue(document,"alpine:initialized"),setTimeout(()=>{Yi()})}var Wn=[],Gn=[];function Xi(){return Wn.map(c=>c())}function ai(){return Wn.concat(Gn).map(c=>c())}function Oi(c){Wn.push(c)}function ji(c){Gn.push(c)}function Ki(c,g=!1){return Hi(c,_=>{if((g?ai():Xi()).some(D=>_.matches(D)))return!0})}function Hi(c,g){if(c){if(g(c))return c;if(c._x_teleportBack&&(c=c._x_teleportBack),!!c.parentElement)return Hi(c.parentElement,g)}}function gs(c){return Xi().some(g=>c.matches(g))}var Lr=[];function Gs(c){Lr.push(c)}var Pa=1;function fn(c,g=hi,_=()=>{}){Hi(c,P=>P._x_ignore)||Ct(()=>{g(c,(P,D)=>{P._x_marker||(_(P,D),Lr.forEach(I=>I(P,D)),Q(P,P.attributes).forEach(I=>I()),P._x_ignore||(P._x_marker=Pa++),P._x_ignore&&D())})})}function rs(c,g=hi){g(c,_=>{wt(_),Ne(_),delete _._x_marker})}function Yi(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([g,_,P])=>{W(_)||P.some(D=>{if(document.querySelector(D))return di(`found "${D}", but missing ${g} plugin`),!0})})}var Vs=[],Vn=!1;function Ir(c=()=>{}){return queueMicrotask(()=>{Vn||setTimeout(()=>{Nr()})}),new Promise(g=>{Vs.push(()=>{c(),g()})})}function Nr(){for(Vn=!1;Vs.length;)Vs.shift()()}function Xn(){Vn=!0}function pn(c,g){return Array.isArray(g)?Xs(c,g.join(" ")):typeof g=="object"&&g!==null?Fo(c,g):typeof g=="function"?pn(c,g()):Xs(c,g)}function Xs(c,g){let _=D=>D.split(" ").filter(I=>!c.classList.contains(I)).filter(Boolean),P=D=>(c.classList.add(...D),()=>{c.classList.remove(...D)});return g=g===!0?g="":g||"",P(_(g))}function Fo(c,g){let _=X=>X.split(" ").filter(Boolean),P=Object.entries(g).flatMap(([X,Y])=>Y?_(X):!1).filter(Boolean),D=Object.entries(g).flatMap(([X,Y])=>Y?!1:_(X)).filter(Boolean),I=[],F=[];return D.forEach(X=>{c.classList.contains(X)&&(c.classList.remove(X),F.push(X))}),P.forEach(X=>{c.classList.contains(X)||(c.classList.add(X),I.push(X))}),()=>{F.forEach(X=>c.classList.add(X)),I.forEach(X=>c.classList.remove(X))}}function En(c,g){return typeof g=="object"&&g!==null?Ra(c,g):Fr(c,g)}function Ra(c,g){let _={};return Object.entries(g).forEach(([P,D])=>{_[P]=c.style[P],P.startsWith("--")||(P=Ma(P)),c.style.setProperty(P,D)}),setTimeout(()=>{c.style.length===0&&c.removeAttribute("style")}),()=>{En(c,_)}}function Fr(c,g){let _=c.getAttribute("style",g);return c.setAttribute("style",g),()=>{c.setAttribute("style",_||"")}}function Ma(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ks(c,g=()=>{}){let _=!1;return function(){_?g.apply(this,arguments):(_=!0,c.apply(this,arguments))}}N("transition",(c,{value:g,modifiers:_,expression:P},{evaluate:D})=>{typeof P=="function"&&(P=D(P)),P!==!1&&(!P||typeof P=="boolean"?Da(c,_,g):Bo(c,P,g))});function Bo(c,g,_){Oa(c,pn,""),{enter:D=>{c._x_transition.enter.during=D},"enter-start":D=>{c._x_transition.enter.start=D},"enter-end":D=>{c._x_transition.enter.end=D},leave:D=>{c._x_transition.leave.during=D},"leave-start":D=>{c._x_transition.leave.start=D},"leave-end":D=>{c._x_transition.leave.end=D}}[_](g)}function Da(c,g,_){Oa(c,En);let P=!g.includes("in")&&!g.includes("out")&&!_,D=P||g.includes("in")||["enter"].includes(_),I=P||g.includes("out")||["leave"].includes(_);g.includes("in")&&!P&&(g=g.filter((_e,Kt)=>Kt<g.indexOf("out"))),g.includes("out")&&!P&&(g=g.filter((_e,Kt)=>Kt>g.indexOf("out")));let F=!g.includes("opacity")&&!g.includes("scale"),X=F||g.includes("opacity"),Y=F||g.includes("scale"),ot=X?0:1,_t=Y?bs(g,"scale",95)/100:1,xt=bs(g,"delay",0)/1e3,$t=bs(g,"origin","center"),pe="opacity, transform",Oe=bs(g,"duration",150)/1e3,Ye=bs(g,"duration",75)/1e3,zt="cubic-bezier(0.4, 0.0, 0.2, 1)";D&&(c._x_transition.enter.during={transformOrigin:$t,transitionDelay:`${xt}s`,transitionProperty:pe,transitionDuration:`${Oe}s`,transitionTimingFunction:zt},c._x_transition.enter.start={opacity:ot,transform:`scale(${_t})`},c._x_transition.enter.end={opacity:1,transform:"scale(1)"}),I&&(c._x_transition.leave.during={transformOrigin:$t,transitionDelay:`${xt}s`,transitionProperty:pe,transitionDuration:`${Ye}s`,transitionTimingFunction:zt},c._x_transition.leave.start={opacity:1,transform:"scale(1)"},c._x_transition.leave.end={opacity:ot,transform:`scale(${_t})`})}function Oa(c,g,_={}){c._x_transition||(c._x_transition={enter:{during:_,start:_,end:_},leave:{during:_,start:_,end:_},in(P=()=>{},D=()=>{}){ms(c,g,{during:this.enter.during,start:this.enter.start,end:this.enter.end},P,D)},out(P=()=>{},D=()=>{}){ms(c,g,{during:this.leave.during,start:this.leave.start,end:this.leave.end},P,D)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(c,g,_,P){const D=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let I=()=>D(_);if(g){c._x_transition&&(c._x_transition.enter||c._x_transition.leave)?c._x_transition.enter&&(Object.entries(c._x_transition.enter.during).length||Object.entries(c._x_transition.enter.start).length||Object.entries(c._x_transition.enter.end).length)?c._x_transition.in(_):I():c._x_transition?c._x_transition.in(_):I();return}c._x_hidePromise=c._x_transition?new Promise((F,X)=>{c._x_transition.out(()=>{},()=>F(P)),c._x_transitioning&&c._x_transitioning.beforeCancel(()=>X({isFromCancelledTransition:!0}))}):Promise.resolve(P),queueMicrotask(()=>{let F=La(c);F?(F._x_hideChildren||(F._x_hideChildren=[]),F._x_hideChildren.push(c)):D(()=>{let X=Y=>{let ot=Promise.all([Y._x_hidePromise,...(Y._x_hideChildren||[]).map(X)]).then(([_t])=>_t?.());return delete Y._x_hidePromise,delete Y._x_hideChildren,ot};X(c).catch(Y=>{if(!Y.isFromCancelledTransition)throw Y})})})};function La(c){let g=c.parentNode;if(g)return g._x_hidePromise?g:La(g)}function ms(c,g,{during:_,start:P,end:D}={},I=()=>{},F=()=>{}){if(c._x_transitioning&&c._x_transitioning.cancel(),Object.keys(_).length===0&&Object.keys(P).length===0&&Object.keys(D).length===0){I(),F();return}let X,Y,ot;jo(c,{start(){X=g(c,P)},during(){Y=g(c,_)},before:I,end(){X(),ot=g(c,D)},after:F,cleanup(){Y(),ot()}})}function jo(c,g){let _,P,D,I=Ks(()=>{Et(()=>{_=!0,P||g.before(),D||(g.end(),Nr()),g.after(),c.isConnected&&g.cleanup(),delete c._x_transitioning})});c._x_transitioning={beforeCancels:[],beforeCancel(F){this.beforeCancels.push(F)},cancel:Ks(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();I()}),finish:I},Et(()=>{g.start(),g.during()}),Xn(),requestAnimationFrame(()=>{if(_)return;let F=Number(getComputedStyle(c).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,X=Number(getComputedStyle(c).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;F===0&&(F=Number(getComputedStyle(c).animationDuration.replace("s",""))*1e3),Et(()=>{g.before()}),P=!0,requestAnimationFrame(()=>{_||(Et(()=>{g.end()}),Nr(),setTimeout(c._x_transitioning.finish,F+X),D=!0)})})}function bs(c,g,_){if(c.indexOf(g)===-1)return _;const P=c[c.indexOf(g)+1];if(!P||g==="scale"&&isNaN(P))return _;if(g==="duration"||g==="delay"){let D=P.match(/([0-9]+)ms/);if(D)return D[1]}return g==="origin"&&["top","right","left","center","bottom"].includes(c[c.indexOf(g)+2])?[P,c[c.indexOf(g)+2]].join(" "):P}var Cn=!1;function Tn(c,g=()=>{}){return(..._)=>Cn?g(..._):c(..._)}function Ho(c){return(...g)=>Cn&&c(...g)}var Ia=[];function Ys(c){Ia.push(c)}function Na(c,g){Ia.forEach(_=>_(c,g)),Cn=!0,jr(()=>{fn(g,(_,P)=>{P(_,()=>{})})}),Cn=!1}var vs=!1;function Fa(c,g){g._x_dataStack||(g._x_dataStack=c._x_dataStack),Cn=!0,vs=!0,jr(()=>{Br(g)}),Cn=!1,vs=!1}function Br(c){let g=!1;fn(c,(P,D)=>{hi(P,(I,F)=>{if(g&&gs(I))return F();g=!0,D(I,F)})})}function jr(c){let g=ht;re((_,P)=>{let D=g(_);return dt(D),()=>{}}),c(),re(g)}function Hr(c,g,_,P=[]){switch(c._x_bindings||(c._x_bindings=st({})),c._x_bindings[g]=_,g=P.includes("camel")?Wo(g):g,g){case"value":$r(c,_);break;case"style":Uo(c,_);break;case"class":$o(c,_);break;case"selected":case"checked":qo(c,g,_);break;default:as(c,g,_);break}}function $r(c,g){if(j(c))c.attributes.value===void 0&&(c.value=g),window.fromModel&&(typeof g=="boolean"?c.checked=l(c.value)===g:c.checked=ja(c.value,g));else if($(c))Number.isInteger(g)?c.value=g:!Array.isArray(g)&&typeof g!="boolean"&&![null,void 0].includes(g)?c.value=String(g):Array.isArray(g)?c.checked=g.some(_=>ja(_,c.value)):c.checked=!!g;else if(c.tagName==="SELECT")zo(c,g);else{if(c.value===g)return;c.value=g===void 0?"":g}}function $o(c,g){c._x_undoAddedClasses&&c._x_undoAddedClasses(),c._x_undoAddedClasses=pn(c,g)}function Uo(c,g){c._x_undoAddedStyles&&c._x_undoAddedStyles(),c._x_undoAddedStyles=En(c,g)}function qo(c,g,_){as(c,g,_),Ur(c,g,_)}function as(c,g,_){[null,void 0,!1].includes(_)&&v(g)?c.removeAttribute(g):(m(g)&&(_=g),Ba(c,g,_))}function Ba(c,g,_){c.getAttribute(g)!=_&&c.setAttribute(g,_)}function Ur(c,g,_){c[g]!==_&&(c[g]=_)}function zo(c,g){const _=[].concat(g).map(P=>P+"");Array.from(c.options).forEach(P=>{P.selected=_.includes(P.value)})}function Wo(c){return c.toLowerCase().replace(/-(\w)/g,(g,_)=>_.toUpperCase())}function ja(c,g){return c==g}function l(c){return[1,"1","true","on","yes",!0].includes(c)?!0:[0,"0","false","off","no",!1].includes(c)?!1:c?!!c:null}var h=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function m(c){return h.has(c)}function v(c){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(c)}function S(c,g,_){return c._x_bindings&&c._x_bindings[g]!==void 0?c._x_bindings[g]:k(c,g,_)}function C(c,g,_,P=!0){if(c._x_bindings&&c._x_bindings[g]!==void 0)return c._x_bindings[g];if(c._x_inlineBindings&&c._x_inlineBindings[g]!==void 0){let D=c._x_inlineBindings[g];return D.extract=P,us(()=>un(c,D.expression))}return k(c,g,_)}function k(c,g,_){let P=c.getAttribute(g);return P===null?typeof _=="function"?_():_:P===""?!0:m(g)?!![g,"true"].includes(P):P}function $(c){return c.type==="checkbox"||c.localName==="ui-checkbox"||c.localName==="ui-switch"}function j(c){return c.type==="radio"||c.localName==="ui-radio"}function G(c,g){var _;return function(){var P=this,D=arguments,I=function(){_=null,c.apply(P,D)};clearTimeout(_),_=setTimeout(I,g)}}function Z(c,g){let _;return function(){let P=this,D=arguments;_||(c.apply(P,D),_=!0,setTimeout(()=>_=!1,g))}}function it({get:c,set:g},{get:_,set:P}){let D=!0,I,F=ht(()=>{let X=c(),Y=_();if(D)P(K(X)),D=!1;else{let ot=JSON.stringify(X),_t=JSON.stringify(Y);ot!==I?P(K(X)):ot!==_t&&g(K(Y))}I=JSON.stringify(c()),JSON.stringify(_())});return()=>{dt(F)}}function K(c){return typeof c=="object"?JSON.parse(JSON.stringify(c)):c}function gt(c){(Array.isArray(c)?c:[c]).forEach(_=>_(Kn))}var Zt={},xe=!1;function fe(c,g){if(xe||(Zt=st(Zt),xe=!0),g===void 0)return Zt[c];Zt[c]=g,Ee(Zt[c]),typeof g=="object"&&g!==null&&g.hasOwnProperty("init")&&typeof g.init=="function"&&Zt[c].init()}function fi(){return Zt}var Qe={};function en(c,g){let _=typeof g!="function"?()=>g:g;return c instanceof Element?me(c,_()):(Qe[c]=_,()=>{})}function nn(c){return Object.entries(Qe).forEach(([g,_])=>{Object.defineProperty(c,g,{get(){return(...P)=>_(...P)}})}),c}function me(c,g,_){let P=[];for(;P.length;)P.pop()();let D=Object.entries(g).map(([F,X])=>({name:F,value:X})),I=tt(D);return D=D.map(F=>I.find(X=>X.name===F.name)?{name:`x-bind:${F.name}`,value:`"${F.value}"`}:F),Q(c,D,_).map(F=>{P.push(F.runCleanups),F()}),()=>{for(;P.length;)P.pop()()}}var kn={};function Te(c,g){kn[c]=g}function We(c,g){return Object.entries(kn).forEach(([_,P])=>{Object.defineProperty(c,_,{get(){return(...D)=>P.bind(g)(...D)},enumerable:!1})}),c}var ys={get reactive(){return st},get release(){return dt},get effect(){return ht},get raw(){return Ht},version:"3.14.9",flushAndStopDeferringMutations:ie,dontAutoEvaluateFunctions:us,disableEffectScheduling:kt,startObservingMutations:ee,stopObservingMutations:Xt,setReactivityEngine:vt,onAttributeRemoved:Jt,onAttributesAdded:yt,closestDataStack:bt,skipDuringClone:Tn,onlyDuringClone:Ho,addRootSelector:Oi,addInitSelector:ji,interceptClone:Ys,addScopeToNode:ft,deferMutations:Wt,mapAttributes:ue,evaluateLater:ze,interceptInit:Gs,setEvaluator:hs,mergeProxies:rt,extractProp:C,findClosest:Hi,onElRemoved:Bt,closestRoot:Ki,destroyTree:rs,interceptor:He,transition:ms,setStyles:En,mutateDom:Et,directive:N,entangle:it,throttle:Z,debounce:G,evaluate:un,initTree:fn,nextTick:Ir,prefixed:ki,prefix:dn,plugin:gt,magic:$e,store:fe,start:ps,clone:Fa,cloneNode:Na,bound:S,$data:Dt,watch:Le,walk:hi,data:Te,bind:en},Kn=ys,Li=b(T());$e("nextTick",()=>Ir),$e("dispatch",c=>Ue.bind(Ue,c)),$e("watch",(c,{evaluateLater:g,cleanup:_})=>(P,D)=>{let I=g(P),X=Le(()=>{let Y;return I(ot=>Y=ot),Y},D);_(X)}),$e("store",fi),$e("data",c=>Dt(c)),$e("root",c=>Ki(c)),$e("refs",c=>(c._x_refs_proxy||(c._x_refs_proxy=rt(ws(c))),c._x_refs_proxy));function ws(c){let g=[];return Hi(c,_=>{_._x_refs&&g.push(_._x_refs)}),g}var $i={};function gn(c){return $i[c]||($i[c]=0),++$i[c]}function Pn(c,g){return Hi(c,_=>{if(_._x_ids&&_._x_ids[g])return!0})}function Ui(c,g){c._x_ids||(c._x_ids={}),c._x_ids[g]||(c._x_ids[g]=gn(g))}$e("id",(c,{cleanup:g})=>(_,P=null)=>{let D=`${_}${P?`-${P}`:""}`;return qr(c,D,g,()=>{let I=Pn(c,_),F=I?I._x_ids[_]:gn(_);return P?`${_}-${F}-${P}`:`${_}-${F}`})}),Ys((c,g)=>{c._x_id&&(g._x_id=c._x_id)});function qr(c,g,_,P){if(c._x_id||(c._x_id={}),c._x_id[g])return c._x_id[g];let D=P();return c._x_id[g]=D,_(()=>{delete c._x_id[g]}),D}$e("el",c=>c),sn("Focus","focus","focus"),sn("Persist","persist","persist");function sn(c,g,_){$e(g,P=>di(`You can't use [$${g}] without first installing the "${c}" plugin here: https://alpinejs.dev/plugins/${_}`,P))}N("modelable",(c,{expression:g},{effect:_,evaluateLater:P,cleanup:D})=>{let I=P(g),F=()=>{let _t;return I(xt=>_t=xt),_t},X=P(`${g} = __placeholder`),Y=_t=>X(()=>{},{scope:{__placeholder:_t}}),ot=F();Y(ot),queueMicrotask(()=>{if(!c._x_model)return;c._x_removeModelListeners.default();let _t=c._x_model.get,xt=c._x_model.set,$t=it({get(){return _t()},set(pe){xt(pe)}},{get(){return F()},set(pe){Y(pe)}});D($t)})}),N("teleport",(c,{modifiers:g,expression:_},{cleanup:P})=>{c.tagName.toLowerCase()!=="template"&&di("x-teleport can only be used on a <template> tag",c);let D=Ha(_),I=c.content.cloneNode(!0).firstElementChild;c._x_teleport=I,I._x_teleportBack=c,c.setAttribute("data-teleport-template",!0),I.setAttribute("data-teleport-target",!0),c._x_forwardEvents&&c._x_forwardEvents.forEach(X=>{I.addEventListener(X,Y=>{Y.stopPropagation(),c.dispatchEvent(new Y.constructor(Y.type,Y))})}),ft(I,{},c);let F=(X,Y,ot)=>{ot.includes("prepend")?Y.parentNode.insertBefore(X,Y):ot.includes("append")?Y.parentNode.insertBefore(X,Y.nextSibling):Y.appendChild(X)};Et(()=>{F(I,D,g),Tn(()=>{fn(I)})()}),c._x_teleportPutBack=()=>{let X=Ha(_);Et(()=>{F(c._x_teleport,X,g)})},P(()=>Et(()=>{I.remove(),rs(I)}))});var mn=document.createElement("div");function Ha(c){let g=Tn(()=>document.querySelector(c),()=>mn)();return g||di(`Cannot find x-teleport element for selector: "${c}"`),g}var $a=()=>{};$a.inline=(c,{modifiers:g},{cleanup:_})=>{g.includes("self")?c._x_ignoreSelf=!0:c._x_ignore=!0,_(()=>{g.includes("self")?delete c._x_ignoreSelf:delete c._x_ignore})},N("ignore",$a),N("effect",Tn((c,{expression:g},{effect:_})=>{_(ze(c,g))}));function zr(c,g,_,P){let D=c,I=Y=>P(Y),F={},X=(Y,ot)=>_t=>ot(Y,_t);if(_.includes("dot")&&(g=De(g)),_.includes("camel")&&(g=Js(g)),_.includes("passive")&&(F.passive=!0),_.includes("capture")&&(F.capture=!0),_.includes("window")&&(D=window),_.includes("document")&&(D=document),_.includes("debounce")){let Y=_[_.indexOf("debounce")+1]||"invalid-wait",ot=Pi(Y.split("ms")[0])?Number(Y.split("ms")[0]):250;I=G(I,ot)}if(_.includes("throttle")){let Y=_[_.indexOf("throttle")+1]||"invalid-wait",ot=Pi(Y.split("ms")[0])?Number(Y.split("ms")[0]):250;I=Z(I,ot)}return _.includes("prevent")&&(I=X(I,(Y,ot)=>{ot.preventDefault(),Y(ot)})),_.includes("stop")&&(I=X(I,(Y,ot)=>{ot.stopPropagation(),Y(ot)})),_.includes("once")&&(I=X(I,(Y,ot)=>{Y(ot),D.removeEventListener(g,I,F)})),(_.includes("away")||_.includes("outside"))&&(D=document,I=X(I,(Y,ot)=>{c.contains(ot.target)||ot.target.isConnected!==!1&&(c.offsetWidth<1&&c.offsetHeight<1||c._x_isShown!==!1&&Y(ot))})),_.includes("self")&&(I=X(I,(Y,ot)=>{ot.target===c&&Y(ot)})),(Go(g)||Ua(g))&&(I=X(I,(Y,ot)=>{qa(ot,_)||Y(ot)})),D.addEventListener(g,I,F),()=>{D.removeEventListener(g,I,F)}}function De(c){return c.replace(/-/g,".")}function Js(c){return c.toLowerCase().replace(/-(\w)/g,(g,_)=>_.toUpperCase())}function Pi(c){return!Array.isArray(c)&&!isNaN(c)}function os(c){return[" ","_"].includes(c)?c:c.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Go(c){return["keydown","keyup"].includes(c)}function Ua(c){return["contextmenu","click","mouse"].some(g=>c.includes(g))}function qa(c,g){let _=g.filter(I=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(I));if(_.includes("debounce")){let I=_.indexOf("debounce");_.splice(I,Pi((_[I+1]||"invalid-wait").split("ms")[0])?2:1)}if(_.includes("throttle")){let I=_.indexOf("throttle");_.splice(I,Pi((_[I+1]||"invalid-wait").split("ms")[0])?2:1)}if(_.length===0||_.length===1&&Rn(c.key).includes(_[0]))return!1;const D=["ctrl","shift","alt","meta","cmd","super"].filter(I=>_.includes(I));return _=_.filter(I=>!D.includes(I)),!(D.length>0&&D.filter(F=>((F==="cmd"||F==="super")&&(F="meta"),c[`${F}Key`])).length===D.length&&(Ua(c.type)||Rn(c.key).includes(_[0])))}function Rn(c){if(!c)return[];c=os(c);let g={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return g[c]=c,Object.keys(g).map(_=>{if(g[_]===c)return _}).filter(_=>_)}N("model",(c,{modifiers:g,expression:_},{effect:P,cleanup:D})=>{let I=c;g.includes("parent")&&(I=c.parentNode);let F=ze(I,_),X;typeof _=="string"?X=ze(I,`${_} = __placeholder`):typeof _=="function"&&typeof _()=="string"?X=ze(I,`${_()} = __placeholder`):X=()=>{};let Y=()=>{let $t;return F(pe=>$t=pe),xs($t)?$t.get():$t},ot=$t=>{let pe;F(Oe=>pe=Oe),xs(pe)?pe.set($t):X(()=>{},{scope:{__placeholder:$t}})};typeof _=="string"&&c.type==="radio"&&Et(()=>{c.hasAttribute("name")||c.setAttribute("name",_)});var _t=c.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(c.type)||g.includes("lazy")?"change":"input";let xt=Cn?()=>{}:zr(c,_t,g,$t=>{ot(_s(c,g,$t,Y()))});if(g.includes("fill")&&([void 0,null,""].includes(Y())||$(c)&&Array.isArray(Y())||c.tagName.toLowerCase()==="select"&&c.multiple)&&ot(_s(c,g,{target:c},Y())),c._x_removeModelListeners||(c._x_removeModelListeners={}),c._x_removeModelListeners.default=xt,D(()=>c._x_removeModelListeners.default()),c.form){let $t=zr(c.form,"reset",[],pe=>{Ir(()=>c._x_model&&c._x_model.set(_s(c,g,{target:c},Y())))});D(()=>$t())}c._x_model={get(){return Y()},set($t){ot($t)}},c._x_forceModelUpdate=$t=>{$t===void 0&&typeof _=="string"&&_.match(/\./)&&($t=""),window.fromModel=!0,Et(()=>Hr(c,"value",$t)),delete window.fromModel},P(()=>{let $t=Y();g.includes("unintrusive")&&document.activeElement.isSameNode(c)||c._x_forceModelUpdate($t)})});function _s(c,g,_,P){return Et(()=>{if(_ instanceof CustomEvent&&_.detail!==void 0)return _.detail!==null&&_.detail!==void 0?_.detail:_.target.value;if($(c))if(Array.isArray(P)){let D=null;return g.includes("number")?D=rn(_.target.value):g.includes("boolean")?D=l(_.target.value):D=_.target.value,_.target.checked?P.includes(D)?P:P.concat([D]):P.filter(I=>!za(I,D))}else return _.target.checked;else{if(c.tagName.toLowerCase()==="select"&&c.multiple)return g.includes("number")?Array.from(_.target.selectedOptions).map(D=>{let I=D.value||D.text;return rn(I)}):g.includes("boolean")?Array.from(_.target.selectedOptions).map(D=>{let I=D.value||D.text;return l(I)}):Array.from(_.target.selectedOptions).map(D=>D.value||D.text);{let D;return j(c)?_.target.checked?D=_.target.value:D=P:D=_.target.value,g.includes("number")?rn(D):g.includes("boolean")?l(D):g.includes("trim")?D.trim():D}}})}function rn(c){let g=c?parseFloat(c):null;return As(g)?g:c}function za(c,g){return c==g}function As(c){return!Array.isArray(c)&&!isNaN(c)}function xs(c){return c!==null&&typeof c=="object"&&typeof c.get=="function"&&typeof c.set=="function"}N("cloak",c=>queueMicrotask(()=>Et(()=>c.removeAttribute(ki("cloak"))))),ji(()=>`[${ki("init")}]`),N("init",Tn((c,{expression:g},{evaluate:_})=>typeof g=="string"?!!g.trim()&&_(g,{},!1):_(g,{},!1))),N("text",(c,{expression:g},{effect:_,evaluateLater:P})=>{let D=P(g);_(()=>{D(I=>{Et(()=>{c.textContent=I})})})}),N("html",(c,{expression:g},{effect:_,evaluateLater:P})=>{let D=P(g);_(()=>{D(I=>{Et(()=>{c.innerHTML=I,c._x_ignoreSelf=!0,fn(c),delete c._x_ignoreSelf})})})}),ue(de(":",le(ki("bind:"))));var Ss=(c,{value:g,modifiers:_,expression:P,original:D},{effect:I,cleanup:F})=>{if(!g){let Y={};nn(Y),ze(c,P)(_t=>{me(c,_t,D)},{scope:Y});return}if(g==="key")return Wr(c,P);if(c._x_inlineBindings&&c._x_inlineBindings[g]&&c._x_inlineBindings[g].extract)return;let X=ze(c,P);I(()=>X(Y=>{Y===void 0&&typeof P=="string"&&P.match(/\./)&&(Y=""),Et(()=>Hr(c,g,Y,_))})),F(()=>{c._x_undoAddedClasses&&c._x_undoAddedClasses(),c._x_undoAddedStyles&&c._x_undoAddedStyles()})};Ss.inline=(c,{value:g,modifiers:_,expression:P})=>{g&&(c._x_inlineBindings||(c._x_inlineBindings={}),c._x_inlineBindings[g]={expression:P,extract:!1})},N("bind",Ss);function Wr(c,g){c._x_keyExpression=g}Oi(()=>`[${ki("data")}]`),N("data",(c,{expression:g},{cleanup:_})=>{if(Vo(c))return;g=g===""?"{}":g;let P={};yi(P,c);let D={};We(D,P);let I=un(c,g,{scope:D});(I===void 0||I===!0)&&(I={}),yi(I,c);let F=st(I);Ee(F);let X=ft(c,F);F.init&&un(c,F.init),_(()=>{F.destroy&&un(c,F.destroy),X()})}),Ys((c,g)=>{c._x_dataStack&&(g._x_dataStack=c._x_dataStack,g.setAttribute("data-has-alpine-state",!0))});function Vo(c){return Cn?vs?!0:c.hasAttribute("data-has-alpine-state"):!1}N("show",(c,{modifiers:g,expression:_},{effect:P})=>{let D=ze(c,_);c._x_doHide||(c._x_doHide=()=>{Et(()=>{c.style.setProperty("display","none",g.includes("important")?"important":void 0)})}),c._x_doShow||(c._x_doShow=()=>{Et(()=>{c.style.length===1&&c.style.display==="none"?c.removeAttribute("style"):c.style.removeProperty("display")})});let I=()=>{c._x_doHide(),c._x_isShown=!1},F=()=>{c._x_doShow(),c._x_isShown=!0},X=()=>setTimeout(F),Y=Ks(xt=>xt?F():I(),xt=>{typeof c._x_toggleAndCascadeWithTransitions=="function"?c._x_toggleAndCascadeWithTransitions(c,xt,F,I):xt?X():I()}),ot,_t=!0;P(()=>D(xt=>{!_t&&xt===ot||(g.includes("immediate")&&(xt?X():I()),Y(xt),ot=xt,_t=!1)}))}),N("for",(c,{expression:g},{effect:_,cleanup:P})=>{let D=Gr(g),I=ze(c,D.items),F=ze(c,c._x_keyExpression||"index");c._x_prevKeys=[],c._x_lookup={},_(()=>Qs(c,D,I,F)),P(()=>{Object.values(c._x_lookup).forEach(X=>Et(()=>{rs(X),X.remove()})),delete c._x_prevKeys,delete c._x_lookup})});function Qs(c,g,_,P){let D=F=>typeof F=="object"&&!Array.isArray(F),I=c;_(F=>{Xo(F)&&F>=0&&(F=Array.from(Array(F).keys(),zt=>zt+1)),F===void 0&&(F=[]);let X=c._x_lookup,Y=c._x_prevKeys,ot=[],_t=[];if(D(F))F=Object.entries(F).map(([zt,_e])=>{let Kt=Zs(g,_e,zt,F);P(Pe=>{_t.includes(Pe)&&di("Duplicate key on x-for",c),_t.push(Pe)},{scope:{index:zt,...Kt}}),ot.push(Kt)});else for(let zt=0;zt<F.length;zt++){let _e=Zs(g,F[zt],zt,F);P(Kt=>{_t.includes(Kt)&&di("Duplicate key on x-for",c),_t.push(Kt)},{scope:{index:zt,..._e}}),ot.push(_e)}let xt=[],$t=[],pe=[],Oe=[];for(let zt=0;zt<Y.length;zt++){let _e=Y[zt];_t.indexOf(_e)===-1&&pe.push(_e)}Y=Y.filter(zt=>!pe.includes(zt));let Ye="template";for(let zt=0;zt<_t.length;zt++){let _e=_t[zt],Kt=Y.indexOf(_e);if(Kt===-1)Y.splice(zt,0,_e),xt.push([Ye,zt]);else if(Kt!==zt){let Pe=Y.splice(zt,1)[0],_i=Y.splice(Kt-1,1)[0];Y.splice(zt,0,_i),Y.splice(Kt,0,Pe),$t.push([Pe,_i])}else Oe.push(_e);Ye=_e}for(let zt=0;zt<pe.length;zt++){let _e=pe[zt];_e in X&&(Et(()=>{rs(X[_e]),X[_e].remove()}),delete X[_e])}for(let zt=0;zt<$t.length;zt++){let[_e,Kt]=$t[zt],Pe=X[_e],_i=X[Kt],bn=document.createElement("div");Et(()=>{_i||di('x-for ":key" is undefined or invalid',I,Kt,X),_i.after(bn),Pe.after(_i),_i._x_currentIfEl&&_i.after(_i._x_currentIfEl),bn.before(Pe),Pe._x_currentIfEl&&Pe.after(Pe._x_currentIfEl),bn.remove()}),_i._x_refreshXForScope(ot[_t.indexOf(Kt)])}for(let zt=0;zt<xt.length;zt++){let[_e,Kt]=xt[zt],Pe=_e==="template"?I:X[_e];Pe._x_currentIfEl&&(Pe=Pe._x_currentIfEl);let _i=ot[Kt],bn=_t[Kt],Mn=document.importNode(I.content,!0).firstElementChild,er=st(_i);ft(Mn,er,I),Mn._x_refreshXForScope=Vr=>{Object.entries(Vr).forEach(([Xr,ir])=>{er[Xr]=ir})},Et(()=>{Pe.after(Mn),Tn(()=>fn(Mn))()}),typeof bn=="object"&&di("x-for key cannot be an object, it must be a string or an integer",I),X[bn]=Mn}for(let zt=0;zt<Oe.length;zt++)X[Oe[zt]]._x_refreshXForScope(ot[_t.indexOf(Oe[zt])]);I._x_prevKeys=_t})}function Gr(c){let g=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,_=/^\s*\(|\)\s*$/g,P=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,D=c.match(P);if(!D)return;let I={};I.items=D[2].trim();let F=D[1].replace(_,"").trim(),X=F.match(g);return X?(I.item=F.replace(g,"").trim(),I.index=X[1].trim(),X[2]&&(I.collection=X[2].trim())):I.item=F,I}function Zs(c,g,_,P){let D={};return/^\[.*\]$/.test(c.item)&&Array.isArray(g)?c.item.replace("[","").replace("]","").split(",").map(F=>F.trim()).forEach((F,X)=>{D[F]=g[X]}):/^\{.*\}$/.test(c.item)&&!Array.isArray(g)&&typeof g=="object"?c.item.replace("{","").replace("}","").split(",").map(F=>F.trim()).forEach(F=>{D[F]=g[F]}):D[c.item]=g,c.index&&(D[c.index]=_),c.collection&&(D[c.collection]=P),D}function Xo(c){return!Array.isArray(c)&&!isNaN(c)}function tr(){}tr.inline=(c,{expression:g},{cleanup:_})=>{let P=Ki(c);P._x_refs||(P._x_refs={}),P._x_refs[g]=c,_(()=>delete P._x_refs[g])},N("ref",tr),N("if",(c,{expression:g},{effect:_,cleanup:P})=>{c.tagName.toLowerCase()!=="template"&&di("x-if can only be used on a <template> tag",c);let D=ze(c,g),I=()=>{if(c._x_currentIfEl)return c._x_currentIfEl;let X=c.content.cloneNode(!0).firstElementChild;return ft(X,{},c),Et(()=>{c.after(X),Tn(()=>fn(X))()}),c._x_currentIfEl=X,c._x_undoIf=()=>{Et(()=>{rs(X),X.remove()}),delete c._x_currentIfEl},X},F=()=>{c._x_undoIf&&(c._x_undoIf(),delete c._x_undoIf)};_(()=>D(X=>{X?I():F()})),P(()=>c._x_undoIf&&c._x_undoIf())}),N("id",(c,{expression:g},{evaluate:_})=>{_(g).forEach(D=>Ui(c,D))}),Ys((c,g)=>{c._x_ids&&(g._x_ids=c._x_ids)}),ue(de("@",le(ki("on:")))),N("on",Tn((c,{value:g,modifiers:_,expression:P},{cleanup:D})=>{let I=P?ze(c,P):()=>{};c.tagName.toLowerCase()==="template"&&(c._x_forwardEvents||(c._x_forwardEvents=[]),c._x_forwardEvents.includes(g)||c._x_forwardEvents.push(g));let F=zr(c,g,_,X=>{I(()=>{},{scope:{$event:X},params:[X]})});D(()=>F())})),Es("Collapse","collapse","collapse"),Es("Intersect","intersect","intersect"),Es("Focus","trap","focus"),Es("Mask","mask","mask");function Es(c,g,_){N(g,P=>di(`You can't use [x-${g}] without first installing the "${c}" plugin here: https://alpinejs.dev/plugins/${_}`,P))}Kn.setEvaluator(ds),Kn.setReactivityEngine({reactive:Li.reactive,effect:Li.effect,release:Li.stop,raw:Li.toRaw});var L=Kn,q=L}}),ad=$n({"../alpine/packages/collapse/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(x,A)=>{for(var w in A)e(x,w,{get:A[w],enumerable:!0})},o=(x,A,w,T)=>{if(A&&typeof A=="object"||typeof A=="function")for(let E of n(A))!s.call(x,E)&&E!==w&&e(x,E,{get:()=>A[E],enumerable:!(T=i(A,E))||T.enumerable});return x},u=x=>o(e({},"__esModule",{value:!0}),x),d={};a(d,{collapse:()=>p,default:()=>y}),t.exports=u(d);function p(x){x.directive("collapse",A),A.inline=(w,{modifiers:T})=>{T.includes("min")&&(w._x_doShow=()=>{},w._x_doHide=()=>{})};function A(w,{modifiers:T}){let E=b(T,"duration",250)/1e3,R=b(T,"min",0),M=!T.includes("min");w._x_isShown||(w.style.height=`${R}px`),!w._x_isShown&&M&&(w.hidden=!0),w._x_isShown||(w.style.overflow="hidden");let B=(z,f)=>{let H=x.setStyles(z,f);return f.height?()=>{}:H},U={transitionProperty:"height",transitionDuration:`${E}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};w._x_transition={in(z=()=>{},f=()=>{}){M&&(w.hidden=!1),M&&(w.style.display=null);let H=w.getBoundingClientRect().height;w.style.height="auto";let V=w.getBoundingClientRect().height;H===V&&(H=R),x.transition(w,x.setStyles,{during:U,start:{height:H+"px"},end:{height:V+"px"}},()=>w._x_isShown=!0,()=>{Math.abs(w.getBoundingClientRect().height-V)<1&&(w.style.overflow=null)})},out(z=()=>{},f=()=>{}){let H=w.getBoundingClientRect().height;x.transition(w,B,{during:U,start:{height:H+"px"},end:{height:R+"px"}},()=>w.style.overflow="hidden",()=>{w._x_isShown=!1,w.style.height==`${R}px`&&M&&(w.style.display="none",w.hidden=!0)})}}}}function b(x,A,w){if(x.indexOf(A)===-1)return w;const T=x[x.indexOf(A)+1];if(!T)return w;if(A==="duration"){let E=T.match(/([0-9]+)ms/);if(E)return E[1]}if(A==="min"){let E=T.match(/([0-9]+)px/);if(E)return E[1]}return T}var y=p}}),od=$n({"../alpine/packages/focus/dist/module.cjs.js"(r,t){var e=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=(f,H)=>function(){return H||(0,f[s(f)[0]])((H={exports:{}}).exports,H),H.exports},d=(f,H)=>{for(var V in H)i(f,V,{get:H[V],enumerable:!0})},p=(f,H,V,at)=>{if(H&&typeof H=="object"||typeof H=="function")for(let st of s(H))!o.call(f,st)&&st!==V&&i(f,st,{get:()=>H[st],enumerable:!(at=n(H,st))||at.enumerable});return f},b=(f,H,V)=>(V=f!=null?e(a(f)):{},p(!f||!f.__esModule?i(V,"default",{value:f,enumerable:!0}):V,f)),y=f=>p(i({},"__esModule",{value:!0}),f),x=u({"node_modules/tabbable/dist/index.js"(f){Object.defineProperty(f,"__esModule",{value:!0});var H=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],V=H.join(","),at=typeof Element>"u",st=at?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ht=!at&&Element.prototype.getRootNode?function(Et){return Et.getRootNode()}:function(Et){return Et.ownerDocument},dt=function(et,ct,Wt){var ie=Array.prototype.slice.apply(et.querySelectorAll(V));return ct&&st.call(et,V)&&ie.unshift(et),ie=ie.filter(Wt),ie},Ht=function Et(et,ct,Wt){for(var ie=[],qt=Array.from(et);qt.length;){var Dt=qt.shift();if(Dt.tagName==="SLOT"){var ft=Dt.assignedElements(),bt=ft.length?ft:Dt.children,rt=Et(bt,!0,Wt);Wt.flatten?ie.push.apply(ie,rt):ie.push({scope:Dt,candidates:rt})}else{var oe=st.call(Dt,V);oe&&Wt.filter(Dt)&&(ct||!et.includes(Dt))&&ie.push(Dt);var Se=Dt.shadowRoot||typeof Wt.getShadowRoot=="function"&&Wt.getShadowRoot(Dt),Ee=!Wt.shadowRootFilter||Wt.shadowRootFilter(Dt);if(Se&&Ee){var He=Et(Se===!0?Dt.children:Se.children,!0,Wt);Wt.flatten?ie.push.apply(ie,He):ie.push({scope:Dt,candidates:He})}else qt.unshift.apply(qt,Dt.children)}}return ie},te=function(et,ct){return et.tabIndex<0&&(ct||/^(AUDIO|VIDEO|DETAILS)$/.test(et.tagName)||et.isContentEditable)&&isNaN(parseInt(et.getAttribute("tabindex"),10))?0:et.tabIndex},kt=function(et,ct){return et.tabIndex===ct.tabIndex?et.documentOrder-ct.documentOrder:et.tabIndex-ct.tabIndex},vt=function(et){return et.tagName==="INPUT"},re=function(et){return vt(et)&&et.type==="hidden"},ge=function(et){var ct=et.tagName==="DETAILS"&&Array.prototype.slice.apply(et.children).some(function(Wt){return Wt.tagName==="SUMMARY"});return ct},Le=function(et,ct){for(var Wt=0;Wt<et.length;Wt++)if(et[Wt].checked&&et[Wt].form===ct)return et[Wt]},Ut=function(et){if(!et.name)return!0;var ct=et.form||ht(et),Wt=function(ft){return ct.querySelectorAll('input[type="radio"][name="'+ft+'"]')},ie;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")ie=Wt(window.CSS.escape(et.name));else try{ie=Wt(et.name)}catch(Dt){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Dt.message),!1}var qt=Le(ie,et.form);return!qt||qt===et},Pt=function(et){return vt(et)&&et.type==="radio"},Rt=function(et){return Pt(et)&&!Ut(et)},Vt=function(et){var ct=et.getBoundingClientRect(),Wt=ct.width,ie=ct.height;return Wt===0&&ie===0},Bt=function(et,ct){var Wt=ct.displayCheck,ie=ct.getShadowRoot;if(getComputedStyle(et).visibility==="hidden")return!0;var qt=st.call(et,"details>summary:first-of-type"),Dt=qt?et.parentElement:et;if(st.call(Dt,"details:not([open]) *"))return!0;var ft=ht(et).host,bt=ft?.ownerDocument.contains(ft)||et.ownerDocument.contains(et);if(!Wt||Wt==="full"){if(typeof ie=="function"){for(var rt=et;et;){var oe=et.parentElement,Se=ht(et);if(oe&&!oe.shadowRoot&&ie(oe)===!0)return Vt(et);et.assignedSlot?et=et.assignedSlot:!oe&&Se!==et.ownerDocument?et=Se.host:et=oe}et=rt}if(bt)return!et.getClientRects().length}else if(Wt==="non-zero-area")return Vt(et);return!1},yt=function(et){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(et.tagName))for(var ct=et.parentElement;ct;){if(ct.tagName==="FIELDSET"&&ct.disabled){for(var Wt=0;Wt<ct.children.length;Wt++){var ie=ct.children.item(Wt);if(ie.tagName==="LEGEND")return st.call(ct,"fieldset[disabled] *")?!0:!ie.contains(et)}return!0}ct=ct.parentElement}return!1},Jt=function(et,ct){return!(ct.disabled||re(ct)||Bt(ct,et)||ge(ct)||yt(ct))},Ne=function(et,ct){return!(Rt(ct)||te(ct)<0||!Jt(et,ct))},wt=function(et){var ct=parseInt(et.getAttribute("tabindex"),10);return!!(isNaN(ct)||ct>=0)},At=function Et(et){var ct=[],Wt=[];return et.forEach(function(ie,qt){var Dt=!!ie.scope,ft=Dt?ie.scope:ie,bt=te(ft,Dt),rt=Dt?Et(ie.candidates):ft;bt===0?Dt?ct.push.apply(ct,rt):ct.push(ft):Wt.push({documentOrder:qt,tabIndex:bt,item:ie,isScope:Dt,content:rt})}),Wt.sort(kt).reduce(function(ie,qt){return qt.isScope?ie.push.apply(ie,qt.content):ie.push(qt.content),ie},[]).concat(ct)},ae=function(et,ct){ct=ct||{};var Wt;return ct.getShadowRoot?Wt=Ht([et],ct.includeContainer,{filter:Ne.bind(null,ct),flatten:!1,getShadowRoot:ct.getShadowRoot,shadowRootFilter:wt}):Wt=dt(et,ct.includeContainer,Ne.bind(null,ct)),At(Wt)},ee=function(et,ct){ct=ct||{};var Wt;return ct.getShadowRoot?Wt=Ht([et],ct.includeContainer,{filter:Jt.bind(null,ct),flatten:!0,getShadowRoot:ct.getShadowRoot}):Wt=dt(et,ct.includeContainer,Jt.bind(null,ct)),Wt},Xt=function(et,ct){if(ct=ct||{},!et)throw new Error("No node provided");return st.call(et,V)===!1?!1:Ne(ct,et)},Mt=H.concat("iframe").join(","),ui=function(et,ct){if(ct=ct||{},!et)throw new Error("No node provided");return st.call(et,Mt)===!1?!1:Jt(ct,et)};f.focusable=ee,f.isFocusable=ui,f.isTabbable=Xt,f.tabbable=ae}}),A=u({"node_modules/focus-trap/dist/focus-trap.js"(f){Object.defineProperty(f,"__esModule",{value:!0});var H=x();function V(Ut,Pt){var Rt=Object.keys(Ut);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(Ut);Pt&&(Vt=Vt.filter(function(Bt){return Object.getOwnPropertyDescriptor(Ut,Bt).enumerable})),Rt.push.apply(Rt,Vt)}return Rt}function at(Ut){for(var Pt=1;Pt<arguments.length;Pt++){var Rt=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?V(Object(Rt),!0).forEach(function(Vt){st(Ut,Vt,Rt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ut,Object.getOwnPropertyDescriptors(Rt)):V(Object(Rt)).forEach(function(Vt){Object.defineProperty(Ut,Vt,Object.getOwnPropertyDescriptor(Rt,Vt))})}return Ut}function st(Ut,Pt,Rt){return Pt in Ut?Object.defineProperty(Ut,Pt,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):Ut[Pt]=Rt,Ut}var ht=(function(){var Ut=[];return{activateTrap:function(Rt){if(Ut.length>0){var Vt=Ut[Ut.length-1];Vt!==Rt&&Vt.pause()}var Bt=Ut.indexOf(Rt);Bt===-1||Ut.splice(Bt,1),Ut.push(Rt)},deactivateTrap:function(Rt){var Vt=Ut.indexOf(Rt);Vt!==-1&&Ut.splice(Vt,1),Ut.length>0&&Ut[Ut.length-1].unpause()}}})(),dt=function(Pt){return Pt.tagName&&Pt.tagName.toLowerCase()==="input"&&typeof Pt.select=="function"},Ht=function(Pt){return Pt.key==="Escape"||Pt.key==="Esc"||Pt.keyCode===27},te=function(Pt){return Pt.key==="Tab"||Pt.keyCode===9},kt=function(Pt){return setTimeout(Pt,0)},vt=function(Pt,Rt){var Vt=-1;return Pt.every(function(Bt,yt){return Rt(Bt)?(Vt=yt,!1):!0}),Vt},re=function(Pt){for(var Rt=arguments.length,Vt=new Array(Rt>1?Rt-1:0),Bt=1;Bt<Rt;Bt++)Vt[Bt-1]=arguments[Bt];return typeof Pt=="function"?Pt.apply(void 0,Vt):Pt},ge=function(Pt){return Pt.target.shadowRoot&&typeof Pt.composedPath=="function"?Pt.composedPath()[0]:Pt.target},Le=function(Pt,Rt){var Vt=Rt?.document||document,Bt=at({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},Rt),yt={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},Jt,Ne=function(ft,bt,rt){return ft&&ft[bt]!==void 0?ft[bt]:Bt[rt||bt]},wt=function(ft){return yt.containerGroups.findIndex(function(bt){var rt=bt.container,oe=bt.tabbableNodes;return rt.contains(ft)||oe.find(function(Se){return Se===ft})})},At=function(ft){var bt=Bt[ft];if(typeof bt=="function"){for(var rt=arguments.length,oe=new Array(rt>1?rt-1:0),Se=1;Se<rt;Se++)oe[Se-1]=arguments[Se];bt=bt.apply(void 0,oe)}if(bt===!0&&(bt=void 0),!bt){if(bt===void 0||bt===!1)return bt;throw new Error("`".concat(ft,"` was specified but was not a node, or did not return a node"))}var Ee=bt;if(typeof bt=="string"&&(Ee=Vt.querySelector(bt),!Ee))throw new Error("`".concat(ft,"` as selector refers to no known node"));return Ee},ae=function(){var ft=At("initialFocus");if(ft===!1)return!1;if(ft===void 0)if(wt(Vt.activeElement)>=0)ft=Vt.activeElement;else{var bt=yt.tabbableGroups[0],rt=bt&&bt.firstTabbableNode;ft=rt||At("fallbackFocus")}if(!ft)throw new Error("Your focus-trap needs to have at least one focusable element");return ft},ee=function(){if(yt.containerGroups=yt.containers.map(function(ft){var bt=H.tabbable(ft,Bt.tabbableOptions),rt=H.focusable(ft,Bt.tabbableOptions);return{container:ft,tabbableNodes:bt,focusableNodes:rt,firstTabbableNode:bt.length>0?bt[0]:null,lastTabbableNode:bt.length>0?bt[bt.length-1]:null,nextTabbableNode:function(Se){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,He=rt.findIndex(function(Di){return Di===Se});if(!(He<0))return Ee?rt.slice(He+1).find(function(Di){return H.isTabbable(Di,Bt.tabbableOptions)}):rt.slice(0,He).reverse().find(function(Di){return H.isTabbable(Di,Bt.tabbableOptions)})}}}),yt.tabbableGroups=yt.containerGroups.filter(function(ft){return ft.tabbableNodes.length>0}),yt.tabbableGroups.length<=0&&!At("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},Xt=function Dt(ft){if(ft!==!1&&ft!==Vt.activeElement){if(!ft||!ft.focus){Dt(ae());return}ft.focus({preventScroll:!!Bt.preventScroll}),yt.mostRecentlyFocusedNode=ft,dt(ft)&&ft.select()}},Mt=function(ft){var bt=At("setReturnFocus",ft);return bt||(bt===!1?!1:ft)},ui=function(ft){var bt=ge(ft);if(!(wt(bt)>=0)){if(re(Bt.clickOutsideDeactivates,ft)){Jt.deactivate({returnFocus:Bt.returnFocusOnDeactivate&&!H.isFocusable(bt,Bt.tabbableOptions)});return}re(Bt.allowOutsideClick,ft)||ft.preventDefault()}},Et=function(ft){var bt=ge(ft),rt=wt(bt)>=0;rt||bt instanceof Document?rt&&(yt.mostRecentlyFocusedNode=bt):(ft.stopImmediatePropagation(),Xt(yt.mostRecentlyFocusedNode||ae()))},et=function(ft){var bt=ge(ft);ee();var rt=null;if(yt.tabbableGroups.length>0){var oe=wt(bt),Se=oe>=0?yt.containerGroups[oe]:void 0;if(oe<0)ft.shiftKey?rt=yt.tabbableGroups[yt.tabbableGroups.length-1].lastTabbableNode:rt=yt.tabbableGroups[0].firstTabbableNode;else if(ft.shiftKey){var Ee=vt(yt.tabbableGroups,function(yi){var Bi=yi.firstTabbableNode;return bt===Bi});if(Ee<0&&(Se.container===bt||H.isFocusable(bt,Bt.tabbableOptions)&&!H.isTabbable(bt,Bt.tabbableOptions)&&!Se.nextTabbableNode(bt,!1))&&(Ee=oe),Ee>=0){var He=Ee===0?yt.tabbableGroups.length-1:Ee-1,Di=yt.tabbableGroups[He];rt=Di.lastTabbableNode}}else{var Fi=vt(yt.tabbableGroups,function(yi){var Bi=yi.lastTabbableNode;return bt===Bi});if(Fi<0&&(Se.container===bt||H.isFocusable(bt,Bt.tabbableOptions)&&!H.isTabbable(bt,Bt.tabbableOptions)&&!Se.nextTabbableNode(bt))&&(Fi=oe),Fi>=0){var Gi=Fi===yt.tabbableGroups.length-1?0:Fi+1,$e=yt.tabbableGroups[Gi];rt=$e.firstTabbableNode}}}else rt=At("fallbackFocus");rt&&(ft.preventDefault(),Xt(rt))},ct=function(ft){if(Ht(ft)&&re(Bt.escapeDeactivates,ft)!==!1){ft.preventDefault(),Jt.deactivate();return}if(te(ft)){et(ft);return}},Wt=function(ft){var bt=ge(ft);wt(bt)>=0||re(Bt.clickOutsideDeactivates,ft)||re(Bt.allowOutsideClick,ft)||(ft.preventDefault(),ft.stopImmediatePropagation())},ie=function(){if(yt.active)return ht.activateTrap(Jt),yt.delayInitialFocusTimer=Bt.delayInitialFocus?kt(function(){Xt(ae())}):Xt(ae()),Vt.addEventListener("focusin",Et,!0),Vt.addEventListener("mousedown",ui,{capture:!0,passive:!1}),Vt.addEventListener("touchstart",ui,{capture:!0,passive:!1}),Vt.addEventListener("click",Wt,{capture:!0,passive:!1}),Vt.addEventListener("keydown",ct,{capture:!0,passive:!1}),Jt},qt=function(){if(yt.active)return Vt.removeEventListener("focusin",Et,!0),Vt.removeEventListener("mousedown",ui,!0),Vt.removeEventListener("touchstart",ui,!0),Vt.removeEventListener("click",Wt,!0),Vt.removeEventListener("keydown",ct,!0),Jt};return Jt={get active(){return yt.active},get paused(){return yt.paused},activate:function(ft){if(yt.active)return this;var bt=Ne(ft,"onActivate"),rt=Ne(ft,"onPostActivate"),oe=Ne(ft,"checkCanFocusTrap");oe||ee(),yt.active=!0,yt.paused=!1,yt.nodeFocusedBeforeActivation=Vt.activeElement,bt&&bt();var Se=function(){oe&&ee(),ie(),rt&&rt()};return oe?(oe(yt.containers.concat()).then(Se,Se),this):(Se(),this)},deactivate:function(ft){if(!yt.active)return this;var bt=at({onDeactivate:Bt.onDeactivate,onPostDeactivate:Bt.onPostDeactivate,checkCanReturnFocus:Bt.checkCanReturnFocus},ft);clearTimeout(yt.delayInitialFocusTimer),yt.delayInitialFocusTimer=void 0,qt(),yt.active=!1,yt.paused=!1,ht.deactivateTrap(Jt);var rt=Ne(bt,"onDeactivate"),oe=Ne(bt,"onPostDeactivate"),Se=Ne(bt,"checkCanReturnFocus"),Ee=Ne(bt,"returnFocus","returnFocusOnDeactivate");rt&&rt();var He=function(){kt(function(){Ee&&Xt(Mt(yt.nodeFocusedBeforeActivation)),oe&&oe()})};return Ee&&Se?(Se(Mt(yt.nodeFocusedBeforeActivation)).then(He,He),this):(He(),this)},pause:function(){return yt.paused||!yt.active?this:(yt.paused=!0,qt(),this)},unpause:function(){return!yt.paused||!yt.active?this:(yt.paused=!1,ee(),ie(),this)},updateContainerElements:function(ft){var bt=[].concat(ft).filter(Boolean);return yt.containers=bt.map(function(rt){return typeof rt=="string"?Vt.querySelector(rt):rt}),yt.active&&ee(),this}},Jt.updateContainerElements(Pt),Jt};f.createFocusTrap=Le}}),w={};d(w,{default:()=>z,focus:()=>R}),t.exports=y(w);var T=b(A()),E=b(x());function R(f){let H,V;window.addEventListener("focusin",()=>{H=V,V=document.activeElement}),f.magic("focus",at=>{let st=at;return{__noscroll:!1,__wrapAround:!1,within(ht){return st=ht,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(ht){return(0,E.isFocusable)(ht)},previouslyFocused(){return H},lastFocused(){return H},focused(){return V},focusables(){return Array.isArray(st)?st:(0,E.focusable)(st,{displayCheck:"none"})},all(){return this.focusables()},isFirst(ht){let dt=this.all();return dt[0]&&dt[0].isSameNode(ht)},isLast(ht){let dt=this.all();return dt.length&&dt.slice(-1)[0].isSameNode(ht)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let ht=this.all(),dt=document.activeElement;if(ht.indexOf(dt)!==-1)return this.__wrapAround&&ht.indexOf(dt)===ht.length-1?ht[0]:ht[ht.indexOf(dt)+1]},getPrevious(){let ht=this.all(),dt=document.activeElement;if(ht.indexOf(dt)!==-1)return this.__wrapAround&&ht.indexOf(dt)===0?ht.slice(-1)[0]:ht[ht.indexOf(dt)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(ht){ht&&setTimeout(()=>{ht.hasAttribute("tabindex")||ht.setAttribute("tabindex","0"),ht.focus({preventScroll:this.__noscroll})})}}}),f.directive("trap",f.skipDuringClone((at,{expression:st,modifiers:ht},{effect:dt,evaluateLater:Ht,cleanup:te})=>{let kt=Ht(st),vt=!1,re={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>at};if(ht.includes("noautofocus"))re.initialFocus=!1;else{let Rt=at.querySelector("[autofocus]");Rt&&(re.initialFocus=Rt)}let ge=(0,T.createFocusTrap)(at,re),Le=()=>{},Ut=()=>{};const Pt=()=>{Le(),Le=()=>{},Ut(),Ut=()=>{},ge.deactivate({returnFocus:!ht.includes("noreturn")})};dt(()=>kt(Rt=>{vt!==Rt&&(Rt&&!vt&&(ht.includes("noscroll")&&(Ut=U()),ht.includes("inert")&&(Le=M(at)),setTimeout(()=>{ge.activate()},15)),!Rt&&vt&&Pt(),vt=!!Rt)})),te(Pt)},(at,{expression:st,modifiers:ht},{evaluate:dt})=>{ht.includes("inert")&&dt(st)&&M(at)}))}function M(f){let H=[];return B(f,V=>{let at=V.hasAttribute("aria-hidden");V.setAttribute("aria-hidden","true"),H.push(()=>at||V.removeAttribute("aria-hidden"))}),()=>{for(;H.length;)H.pop()()}}function B(f,H){f.isSameNode(document.body)||!f.parentNode||Array.from(f.parentNode.children).forEach(V=>{V.isSameNode(f)?B(f.parentNode,H):H(V)})}function U(){let f=document.documentElement.style.overflow,H=document.documentElement.style.paddingRight,V=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${V}px`,()=>{document.documentElement.style.overflow=f,document.documentElement.style.paddingRight=H}}var z=R}}),ld=$n({"../alpine/packages/persist/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(w,T)=>{for(var E in T)e(w,E,{get:T[E],enumerable:!0})},o=(w,T,E,R)=>{if(T&&typeof T=="object"||typeof T=="function")for(let M of n(T))!s.call(w,M)&&M!==E&&e(w,M,{get:()=>T[M],enumerable:!(R=i(T,M))||R.enumerable});return w},u=w=>o(e({},"__esModule",{value:!0}),w),d={};a(d,{default:()=>A,persist:()=>p}),t.exports=u(d);function p(w){let T=()=>{let E,R;try{R=localStorage}catch(M){console.error(M),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let B=new Map;R={getItem:B.get.bind(B),setItem:B.set.bind(B)}}return w.interceptor((M,B,U,z,f)=>{let H=E||`_x_${z}`,V=b(H,R)?y(H,R):M;return U(V),w.effect(()=>{let at=B();x(H,at,R),U(at)}),V},M=>{M.as=B=>(E=B,M),M.using=B=>(R=B,M)})};Object.defineProperty(w,"$persist",{get:()=>T()}),w.magic("persist",T),w.persist=(E,{get:R,set:M},B=localStorage)=>{let U=b(E,B)?y(E,B):R();M(U),w.effect(()=>{let z=R();x(E,z,B),M(z)})}}function b(w,T){return T.getItem(w)!==null}function y(w,T){let E=T.getItem(w,T);if(E!==void 0)return JSON.parse(E)}function x(w,T,E){E.setItem(w,JSON.stringify(T))}var A=p}}),cd=$n({"../alpine/packages/intersect/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(w,T)=>{for(var E in T)e(w,E,{get:T[E],enumerable:!0})},o=(w,T,E,R)=>{if(T&&typeof T=="object"||typeof T=="function")for(let M of n(T))!s.call(w,M)&&M!==E&&e(w,M,{get:()=>T[M],enumerable:!(R=i(T,M))||R.enumerable});return w},u=w=>o(e({},"__esModule",{value:!0}),w),d={};a(d,{default:()=>A,intersect:()=>p}),t.exports=u(d);function p(w){w.directive("intersect",w.skipDuringClone((T,{value:E,expression:R,modifiers:M},{evaluateLater:B,cleanup:U})=>{let z=B(R),f={rootMargin:x(M),threshold:b(M)},H=new IntersectionObserver(V=>{V.forEach(at=>{at.isIntersecting!==(E==="leave")&&(z(),M.includes("once")&&H.disconnect())})},f);H.observe(T),U(()=>{H.disconnect()})}))}function b(w){if(w.includes("full"))return .99;if(w.includes("half"))return .5;if(!w.includes("threshold"))return 0;let T=w[w.indexOf("threshold")+1];return T==="100"?1:T==="0"?0:+`.${T}`}function y(w){let T=w.match(/^(-?[0-9]+)(px|%)?$/);return T?T[1]+(T[2]||"px"):void 0}function x(w){const T="margin",E="0px 0px 0px 0px",R=w.indexOf(T);if(R===-1)return E;let M=[];for(let B=1;B<5;B++)M.push(y(w[R+B]||""));return M=M.filter(B=>B!==void 0),M.length?M.join(" ").trim():E}var A=p}}),ud=$n({"node_modules/@alpinejs/resize/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(E,R)=>{for(var M in R)e(E,M,{get:R[M],enumerable:!0})},o=(E,R,M,B)=>{if(R&&typeof R=="object"||typeof R=="function")for(let U of n(R))!s.call(E,U)&&U!==M&&e(E,U,{get:()=>R[U],enumerable:!(B=i(R,U))||B.enumerable});return E},u=E=>o(e({},"__esModule",{value:!0}),E),d={};a(d,{default:()=>T,resize:()=>p}),t.exports=u(d);function p(E){E.directive("resize",E.skipDuringClone((R,{value:M,expression:B,modifiers:U},{evaluateLater:z,cleanup:f})=>{let H=z(B),V=(st,ht)=>{H(()=>{},{scope:{$width:st,$height:ht}})},at=U.includes("document")?A(V):b(R,V);f(()=>at())}))}function b(E,R){let M=new ResizeObserver(B=>{let[U,z]=w(B);R(U,z)});return M.observe(E),()=>M.disconnect()}var y,x=new Set;function A(E){return x.add(E),y||(y=new ResizeObserver(R=>{let[M,B]=w(R);x.forEach(U=>U(M,B))}),y.observe(document.documentElement)),()=>{x.delete(E)}}function w(E){let R,M;for(let B of E)R=B.borderBoxSize[0].inlineSize,M=B.borderBoxSize[0].blockSize;return[R,M]}var T=p}}),hd=$n({"../alpine/packages/anchor/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(N,W)=>{for(var Q in W)e(N,Q,{get:W[Q],enumerable:!0})},o=(N,W,Q,tt)=>{if(W&&typeof W=="object"||typeof W=="function")for(let lt of n(W))!s.call(N,lt)&&lt!==Q&&e(N,lt,{get:()=>W[lt],enumerable:!(tt=i(W,lt))||tt.enumerable});return N},u=N=>o(e({},"__esModule",{value:!0}),N),d={};a(d,{anchor:()=>zn,default:()=>xn}),t.exports=u(d);var p=Math.min,b=Math.max,y=Math.round,x=Math.floor,A=N=>({x:N,y:N}),w={left:"right",right:"left",bottom:"top",top:"bottom"},T={start:"end",end:"start"};function E(N,W,Q){return b(N,p(W,Q))}function R(N,W){return typeof N=="function"?N(W):N}function M(N){return N.split("-")[0]}function B(N){return N.split("-")[1]}function U(N){return N==="x"?"y":"x"}function z(N){return N==="y"?"height":"width"}function f(N){return["top","bottom"].includes(M(N))?"y":"x"}function H(N){return U(f(N))}function V(N,W,Q){Q===void 0&&(Q=!1);const tt=B(N),lt=H(N),pt=z(lt);let mt=lt==="x"?tt===(Q?"end":"start")?"right":"left":tt==="start"?"bottom":"top";return W.reference[pt]>W.floating[pt]&&(mt=Ht(mt)),[mt,Ht(mt)]}function at(N){const W=Ht(N);return[st(N),W,st(W)]}function st(N){return N.replace(/start|end/g,W=>T[W])}function ht(N,W,Q){const tt=["left","right"],lt=["right","left"],pt=["top","bottom"],mt=["bottom","top"];switch(N){case"top":case"bottom":return Q?W?lt:tt:W?tt:lt;case"left":case"right":return W?pt:mt;default:return[]}}function dt(N,W,Q,tt){const lt=B(N);let pt=ht(M(N),Q==="start",tt);return lt&&(pt=pt.map(mt=>mt+"-"+lt),W&&(pt=pt.concat(pt.map(st)))),pt}function Ht(N){return N.replace(/left|right|bottom|top/g,W=>w[W])}function te(N){return{top:0,right:0,bottom:0,left:0,...N}}function kt(N){return typeof N!="number"?te(N):{top:N,right:N,bottom:N,left:N}}function vt(N){return{...N,top:N.y,left:N.x,right:N.x+N.width,bottom:N.y+N.height}}function re(N,W,Q){let{reference:tt,floating:lt}=N;const pt=f(W),mt=H(W),Ct=z(mt),Ft=M(W),It=pt==="y",de=tt.x+tt.width/2-lt.width/2,le=tt.y+tt.height/2-lt.height/2,ye=tt[Ct]/2-lt[Ct]/2;let Qt;switch(Ft){case"top":Qt={x:de,y:tt.y-lt.height};break;case"bottom":Qt={x:de,y:tt.y+tt.height};break;case"right":Qt={x:tt.x+tt.width,y:le};break;case"left":Qt={x:tt.x-lt.width,y:le};break;default:Qt={x:tt.x,y:tt.y}}switch(B(W)){case"start":Qt[mt]-=ye*(Q&&It?-1:1);break;case"end":Qt[mt]+=ye*(Q&&It?-1:1);break}return Qt}var ge=async(N,W,Q)=>{const{placement:tt="bottom",strategy:lt="absolute",middleware:pt=[],platform:mt}=Q,Ct=pt.filter(Boolean),Ft=await(mt.isRTL==null?void 0:mt.isRTL(W));let It=await mt.getElementRects({reference:N,floating:W,strategy:lt}),{x:de,y:le}=re(It,tt,Ft),ye=tt,Qt={},ue=0;for(let we=0;we<Ct.length;we++){const{name:Me,fn:Ae}=Ct[we],{x:Be,y:Fe,data:wi,reset:Ue}=await Ae({x:de,y:le,initialPlacement:tt,placement:ye,strategy:lt,middlewareData:Qt,rects:It,platform:mt,elements:{reference:N,floating:W}});if(de=Be??de,le=Fe??le,Qt={...Qt,[Me]:{...Qt[Me],...wi}},Ue&&ue<=50){ue++,typeof Ue=="object"&&(Ue.placement&&(ye=Ue.placement),Ue.rects&&(It=Ue.rects===!0?await mt.getElementRects({reference:N,floating:W,strategy:lt}):Ue.rects),{x:de,y:le}=re(It,ye,Ft)),we=-1;continue}}return{x:de,y:le,placement:ye,strategy:lt,middlewareData:Qt}};async function Le(N,W){var Q;W===void 0&&(W={});const{x:tt,y:lt,platform:pt,rects:mt,elements:Ct,strategy:Ft}=N,{boundary:It="clippingAncestors",rootBoundary:de="viewport",elementContext:le="floating",altBoundary:ye=!1,padding:Qt=0}=R(W,N),ue=kt(Qt),Me=Ct[ye?le==="floating"?"reference":"floating":le],Ae=vt(await pt.getClippingRect({element:(Q=await(pt.isElement==null?void 0:pt.isElement(Me)))==null||Q?Me:Me.contextElement||await(pt.getDocumentElement==null?void 0:pt.getDocumentElement(Ct.floating)),boundary:It,rootBoundary:de,strategy:Ft})),Be=le==="floating"?{...mt.floating,x:tt,y:lt}:mt.reference,Fe=await(pt.getOffsetParent==null?void 0:pt.getOffsetParent(Ct.floating)),wi=await(pt.isElement==null?void 0:pt.isElement(Fe))?await(pt.getScale==null?void 0:pt.getScale(Fe))||{x:1,y:1}:{x:1,y:1},Ue=vt(pt.convertOffsetParentRelativeRectToViewportRelativeRect?await pt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Be,offsetParent:Fe,strategy:Ft}):Be);return{top:(Ae.top-Ue.top+ue.top)/wi.y,bottom:(Ue.bottom-Ae.bottom+ue.bottom)/wi.y,left:(Ae.left-Ue.left+ue.left)/wi.x,right:(Ue.right-Ae.right+ue.right)/wi.x}}var Ut=function(N){return N===void 0&&(N={}),{name:"flip",options:N,async fn(W){var Q,tt;const{placement:lt,middlewareData:pt,rects:mt,initialPlacement:Ct,platform:Ft,elements:It}=W,{mainAxis:de=!0,crossAxis:le=!0,fallbackPlacements:ye,fallbackStrategy:Qt="bestFit",fallbackAxisSideDirection:ue="none",flipAlignment:we=!0,...Me}=R(N,W);if((Q=pt.arrow)!=null&&Q.alignmentOffset)return{};const Ae=M(lt),Be=M(Ct)===Ct,Fe=await(Ft.isRTL==null?void 0:Ft.isRTL(It.floating)),wi=ye||(Be||!we?[Ht(Ct)]:at(Ct));!ye&&ue!=="none"&&wi.push(...dt(Ct,we,ue,Fe));const Ue=[Ct,...wi],hi=await Le(W,Me),di=[];let Sn=((tt=pt.flip)==null?void 0:tt.overflows)||[];if(de&&di.push(hi[Ae]),le){const Xi=V(lt,mt,Fe);di.push(hi[Xi[0]],hi[Xi[1]])}if(Sn=[...Sn,{placement:lt,overflows:di}],!di.every(Xi=>Xi<=0)){var ps,Wn;const Xi=(((ps=pt.flip)==null?void 0:ps.index)||0)+1,ai=Ue[Xi];if(ai)return{data:{index:Xi,overflows:Sn},reset:{placement:ai}};let Oi=(Wn=Sn.filter(ji=>ji.overflows[0]<=0).sort((ji,Ki)=>ji.overflows[1]-Ki.overflows[1])[0])==null?void 0:Wn.placement;if(!Oi)switch(Qt){case"bestFit":{var Gn;const ji=(Gn=Sn.map(Ki=>[Ki.placement,Ki.overflows.filter(Hi=>Hi>0).reduce((Hi,gs)=>Hi+gs,0)]).sort((Ki,Hi)=>Ki[1]-Hi[1])[0])==null?void 0:Gn[0];ji&&(Oi=ji);break}case"initialPlacement":Oi=Ct;break}if(lt!==Oi)return{reset:{placement:Oi}}}return{}}}};async function Pt(N,W){const{placement:Q,platform:tt,elements:lt}=N,pt=await(tt.isRTL==null?void 0:tt.isRTL(lt.floating)),mt=M(Q),Ct=B(Q),Ft=f(Q)==="y",It=["left","top"].includes(mt)?-1:1,de=pt&&Ft?-1:1,le=R(W,N);let{mainAxis:ye,crossAxis:Qt,alignmentAxis:ue}=typeof le=="number"?{mainAxis:le,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...le};return Ct&&typeof ue=="number"&&(Qt=Ct==="end"?ue*-1:ue),Ft?{x:Qt*de,y:ye*It}:{x:ye*It,y:Qt*de}}var Rt=function(N){return N===void 0&&(N=0),{name:"offset",options:N,async fn(W){const{x:Q,y:tt}=W,lt=await Pt(W,N);return{x:Q+lt.x,y:tt+lt.y,data:lt}}}},Vt=function(N){return N===void 0&&(N={}),{name:"shift",options:N,async fn(W){const{x:Q,y:tt,placement:lt}=W,{mainAxis:pt=!0,crossAxis:mt=!1,limiter:Ct={fn:Me=>{let{x:Ae,y:Be}=Me;return{x:Ae,y:Be}}},...Ft}=R(N,W),It={x:Q,y:tt},de=await Le(W,Ft),le=f(M(lt)),ye=U(le);let Qt=It[ye],ue=It[le];if(pt){const Me=ye==="y"?"top":"left",Ae=ye==="y"?"bottom":"right",Be=Qt+de[Me],Fe=Qt-de[Ae];Qt=E(Be,Qt,Fe)}if(mt){const Me=le==="y"?"top":"left",Ae=le==="y"?"bottom":"right",Be=ue+de[Me],Fe=ue-de[Ae];ue=E(Be,ue,Fe)}const we=Ct.fn({...W,[ye]:Qt,[le]:ue});return{...we,data:{x:we.x-Q,y:we.y-tt}}}}};function Bt(N){return Ne(N)?(N.nodeName||"").toLowerCase():"#document"}function yt(N){var W;return(N==null||(W=N.ownerDocument)==null?void 0:W.defaultView)||window}function Jt(N){var W;return(W=(Ne(N)?N.ownerDocument:N.document)||window.document)==null?void 0:W.documentElement}function Ne(N){return N instanceof Node||N instanceof yt(N).Node}function wt(N){return N instanceof Element||N instanceof yt(N).Element}function At(N){return N instanceof HTMLElement||N instanceof yt(N).HTMLElement}function ae(N){return typeof ShadowRoot>"u"?!1:N instanceof ShadowRoot||N instanceof yt(N).ShadowRoot}function ee(N){const{overflow:W,overflowX:Q,overflowY:tt,display:lt}=ct(N);return/auto|scroll|overlay|hidden|clip/.test(W+tt+Q)&&!["inline","contents"].includes(lt)}function Xt(N){return["table","td","th"].includes(Bt(N))}function Mt(N){const W=Et(),Q=ct(N);return Q.transform!=="none"||Q.perspective!=="none"||(Q.containerType?Q.containerType!=="normal":!1)||!W&&(Q.backdropFilter?Q.backdropFilter!=="none":!1)||!W&&(Q.filter?Q.filter!=="none":!1)||["transform","perspective","filter"].some(tt=>(Q.willChange||"").includes(tt))||["paint","layout","strict","content"].some(tt=>(Q.contain||"").includes(tt))}function ui(N){let W=ie(N);for(;At(W)&&!et(W);){if(Mt(W))return W;W=ie(W)}return null}function Et(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function et(N){return["html","body","#document"].includes(Bt(N))}function ct(N){return yt(N).getComputedStyle(N)}function Wt(N){return wt(N)?{scrollLeft:N.scrollLeft,scrollTop:N.scrollTop}:{scrollLeft:N.pageXOffset,scrollTop:N.pageYOffset}}function ie(N){if(Bt(N)==="html")return N;const W=N.assignedSlot||N.parentNode||ae(N)&&N.host||Jt(N);return ae(W)?W.host:W}function qt(N){const W=ie(N);return et(W)?N.ownerDocument?N.ownerDocument.body:N.body:At(W)&&ee(W)?W:qt(W)}function Dt(N,W,Q){var tt;W===void 0&&(W=[]),Q===void 0&&(Q=!0);const lt=qt(N),pt=lt===((tt=N.ownerDocument)==null?void 0:tt.body),mt=yt(lt);return pt?W.concat(mt,mt.visualViewport||[],ee(lt)?lt:[],mt.frameElement&&Q?Dt(mt.frameElement):[]):W.concat(lt,Dt(lt,[],Q))}function ft(N){const W=ct(N);let Q=parseFloat(W.width)||0,tt=parseFloat(W.height)||0;const lt=At(N),pt=lt?N.offsetWidth:Q,mt=lt?N.offsetHeight:tt,Ct=y(Q)!==pt||y(tt)!==mt;return Ct&&(Q=pt,tt=mt),{width:Q,height:tt,$:Ct}}function bt(N){return wt(N)?N:N.contextElement}function rt(N){const W=bt(N);if(!At(W))return A(1);const Q=W.getBoundingClientRect(),{width:tt,height:lt,$:pt}=ft(W);let mt=(pt?y(Q.width):Q.width)/tt,Ct=(pt?y(Q.height):Q.height)/lt;return(!mt||!Number.isFinite(mt))&&(mt=1),(!Ct||!Number.isFinite(Ct))&&(Ct=1),{x:mt,y:Ct}}var oe=A(0);function Se(N){const W=yt(N);return!Et()||!W.visualViewport?oe:{x:W.visualViewport.offsetLeft,y:W.visualViewport.offsetTop}}function Ee(N,W,Q){return W===void 0&&(W=!1),!Q||W&&Q!==yt(N)?!1:W}function He(N,W,Q,tt){W===void 0&&(W=!1),Q===void 0&&(Q=!1);const lt=N.getBoundingClientRect(),pt=bt(N);let mt=A(1);W&&(tt?wt(tt)&&(mt=rt(tt)):mt=rt(N));const Ct=Ee(pt,Q,tt)?Se(pt):A(0);let Ft=(lt.left+Ct.x)/mt.x,It=(lt.top+Ct.y)/mt.y,de=lt.width/mt.x,le=lt.height/mt.y;if(pt){const ye=yt(pt),Qt=tt&&wt(tt)?yt(tt):tt;let ue=ye.frameElement;for(;ue&&tt&&Qt!==ye;){const we=rt(ue),Me=ue.getBoundingClientRect(),Ae=ct(ue),Be=Me.left+(ue.clientLeft+parseFloat(Ae.paddingLeft))*we.x,Fe=Me.top+(ue.clientTop+parseFloat(Ae.paddingTop))*we.y;Ft*=we.x,It*=we.y,de*=we.x,le*=we.y,Ft+=Be,It+=Fe,ue=yt(ue).frameElement}}return vt({width:de,height:le,x:Ft,y:It})}function Di(N){let{rect:W,offsetParent:Q,strategy:tt}=N;const lt=At(Q),pt=Jt(Q);if(Q===pt)return W;let mt={scrollLeft:0,scrollTop:0},Ct=A(1);const Ft=A(0);if((lt||!lt&&tt!=="fixed")&&((Bt(Q)!=="body"||ee(pt))&&(mt=Wt(Q)),At(Q))){const It=He(Q);Ct=rt(Q),Ft.x=It.x+Q.clientLeft,Ft.y=It.y+Q.clientTop}return{width:W.width*Ct.x,height:W.height*Ct.y,x:W.x*Ct.x-mt.scrollLeft*Ct.x+Ft.x,y:W.y*Ct.y-mt.scrollTop*Ct.y+Ft.y}}function Fi(N){return Array.from(N.getClientRects())}function Gi(N){return He(Jt(N)).left+Wt(N).scrollLeft}function $e(N){const W=Jt(N),Q=Wt(N),tt=N.ownerDocument.body,lt=b(W.scrollWidth,W.clientWidth,tt.scrollWidth,tt.clientWidth),pt=b(W.scrollHeight,W.clientHeight,tt.scrollHeight,tt.clientHeight);let mt=-Q.scrollLeft+Gi(N);const Ct=-Q.scrollTop;return ct(tt).direction==="rtl"&&(mt+=b(W.clientWidth,tt.clientWidth)-lt),{width:lt,height:pt,x:mt,y:Ct}}function yi(N,W){const Q=yt(N),tt=Jt(N),lt=Q.visualViewport;let pt=tt.clientWidth,mt=tt.clientHeight,Ct=0,Ft=0;if(lt){pt=lt.width,mt=lt.height;const It=Et();(!It||It&&W==="fixed")&&(Ct=lt.offsetLeft,Ft=lt.offsetTop)}return{width:pt,height:mt,x:Ct,y:Ft}}function Bi(N,W){const Q=He(N,!0,W==="fixed"),tt=Q.top+N.clientTop,lt=Q.left+N.clientLeft,pt=At(N)?rt(N):A(1),mt=N.clientWidth*pt.x,Ct=N.clientHeight*pt.y,Ft=lt*pt.x,It=tt*pt.y;return{width:mt,height:Ct,x:Ft,y:It}}function Ws(N,W,Q){let tt;if(W==="viewport")tt=yi(N,Q);else if(W==="document")tt=$e(Jt(N));else if(wt(W))tt=Bi(W,Q);else{const lt=Se(N);tt={...W,x:W.x-lt.x,y:W.y-lt.y}}return vt(tt)}function Vi(N,W){const Q=ie(N);return Q===W||!wt(Q)||et(Q)?!1:ct(Q).position==="fixed"||Vi(Q,W)}function Un(N,W){const Q=W.get(N);if(Q)return Q;let tt=Dt(N,[],!1).filter(Ct=>wt(Ct)&&Bt(Ct)!=="body"),lt=null;const pt=ct(N).position==="fixed";let mt=pt?ie(N):N;for(;wt(mt)&&!et(mt);){const Ct=ct(mt),Ft=Mt(mt);!Ft&&Ct.position==="fixed"&&(lt=null),(pt?!Ft&&!lt:!Ft&&Ct.position==="static"&&!!lt&&["absolute","fixed"].includes(lt.position)||ee(mt)&&!Ft&&Vi(N,mt))?tt=tt.filter(de=>de!==mt):lt=Ct,mt=ie(mt)}return W.set(N,tt),tt}function us(N){let{element:W,boundary:Q,rootBoundary:tt,strategy:lt}=N;const mt=[...Q==="clippingAncestors"?Un(W,this._c):[].concat(Q),tt],Ct=mt[0],Ft=mt.reduce((It,de)=>{const le=Ws(W,de,lt);return It.top=b(le.top,It.top),It.right=p(le.right,It.right),It.bottom=p(le.bottom,It.bottom),It.left=b(le.left,It.left),It},Ws(W,Ct,lt));return{width:Ft.right-Ft.left,height:Ft.bottom-Ft.top,x:Ft.left,y:Ft.top}}function un(N){return ft(N)}function ze(N,W,Q){const tt=At(W),lt=Jt(W),pt=Q==="fixed",mt=He(N,!0,pt,W);let Ct={scrollLeft:0,scrollTop:0};const Ft=A(0);if(tt||!tt&&!pt)if((Bt(W)!=="body"||ee(lt))&&(Ct=Wt(W)),tt){const It=He(W,!0,pt,W);Ft.x=It.x+W.clientLeft,Ft.y=It.y+W.clientTop}else lt&&(Ft.x=Gi(lt));return{x:mt.left+Ct.scrollLeft-Ft.x,y:mt.top+Ct.scrollTop-Ft.y,width:mt.width,height:mt.height}}function hn(N,W){return!At(N)||ct(N).position==="fixed"?null:W?W(N):N.offsetParent}function hs(N,W){const Q=yt(N);if(!At(N))return Q;let tt=hn(N,W);for(;tt&&Xt(tt)&&ct(tt).position==="static";)tt=hn(tt,W);return tt&&(Bt(tt)==="html"||Bt(tt)==="body"&&ct(tt).position==="static"&&!Mt(tt))?Q:tt||ui(N)||Q}var ds=async function(N){let{reference:W,floating:Q,strategy:tt}=N;const lt=this.getOffsetParent||hs,pt=this.getDimensions;return{reference:ze(W,await lt(Q),tt),floating:{x:0,y:0,...await pt(Q)}}};function Ti(N){return ct(N).direction==="rtl"}var ri={convertOffsetParentRelativeRectToViewportRelativeRect:Di,getDocumentElement:Jt,getClippingRect:us,getOffsetParent:hs,getElementRects:ds,getClientRects:Fi,getDimensions:un,getScale:rt,isElement:wt,isRTL:Ti};function fs(N,W){let Q=null,tt;const lt=Jt(N);function pt(){clearTimeout(tt),Q&&Q.disconnect(),Q=null}function mt(Ct,Ft){Ct===void 0&&(Ct=!1),Ft===void 0&&(Ft=1),pt();const{left:It,top:de,width:le,height:ye}=N.getBoundingClientRect();if(Ct||W(),!le||!ye)return;const Qt=x(de),ue=x(lt.clientWidth-(It+le)),we=x(lt.clientHeight-(de+ye)),Me=x(It),Be={rootMargin:-Qt+"px "+-ue+"px "+-we+"px "+-Me+"px",threshold:b(0,p(1,Ft))||1};let Fe=!0;function wi(Ue){const hi=Ue[0].intersectionRatio;if(hi!==Ft){if(!Fe)return mt();hi?mt(!1,hi):tt=setTimeout(()=>{mt(!1,1e-7)},100)}Fe=!1}try{Q=new IntersectionObserver(wi,{...Be,root:lt.ownerDocument})}catch{Q=new IntersectionObserver(wi,Be)}Q.observe(N)}return mt(!0),pt}function Or(N,W,Q,tt){tt===void 0&&(tt={});const{ancestorScroll:lt=!0,ancestorResize:pt=!0,elementResize:mt=typeof ResizeObserver=="function",layoutShift:Ct=typeof IntersectionObserver=="function",animationFrame:Ft=!1}=tt,It=bt(N),de=lt||pt?[...It?Dt(It):[],...Dt(W)]:[];de.forEach(Ae=>{lt&&Ae.addEventListener("scroll",Q,{passive:!0}),pt&&Ae.addEventListener("resize",Q)});const le=It&&Ct?fs(It,Q):null;let ye=-1,Qt=null;mt&&(Qt=new ResizeObserver(Ae=>{let[Be]=Ae;Be&&Be.target===It&&Qt&&(Qt.unobserve(W),cancelAnimationFrame(ye),ye=requestAnimationFrame(()=>{Qt&&Qt.observe(W)})),Q()}),It&&!Ft&&Qt.observe(It),Qt.observe(W));let ue,we=Ft?He(N):null;Ft&&Me();function Me(){const Ae=He(N);we&&(Ae.x!==we.x||Ae.y!==we.y||Ae.width!==we.width||Ae.height!==we.height)&&Q(),we=Ae,ue=requestAnimationFrame(Me)}return Q(),()=>{de.forEach(Ae=>{lt&&Ae.removeEventListener("scroll",Q),pt&&Ae.removeEventListener("resize",Q)}),le&&le(),Qt&&Qt.disconnect(),Qt=null,Ft&&cancelAnimationFrame(ue)}}var qn=(N,W,Q)=>{const tt=new Map,lt={platform:ri,...Q},pt={...lt.platform,_c:tt};return ge(N,W,{...lt,platform:pt})};function zn(N){N.magic("anchor",W=>{if(!W._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return W._x_anchor}),N.interceptClone((W,Q)=>{W&&W._x_anchor&&!Q._x_anchor&&(Q._x_anchor=W._x_anchor)}),N.directive("anchor",N.skipDuringClone((W,{expression:Q,modifiers:tt,value:lt},{cleanup:pt,evaluate:mt})=>{let{placement:Ct,offsetValue:Ft,unstyled:It}=dn(tt);W._x_anchor=N.reactive({x:0,y:0});let de=mt(Q);if(!de)throw"Alpine: no element provided to x-anchor...";let le=()=>{let Qt;qn(de,W,{placement:Ct,middleware:[Ut(),Vt({padding:5}),Rt(Ft)]}).then(({x:ue,y:we})=>{It||ki(W,ue,we),JSON.stringify({x:ue,y:we})!==Qt&&(W._x_anchor.x=ue,W._x_anchor.y=we),Qt=JSON.stringify({x:ue,y:we})})},ye=Or(de,W,()=>le());pt(()=>ye())},(W,{expression:Q,modifiers:tt,value:lt},{cleanup:pt,evaluate:mt})=>{let{unstyled:Ct}=dn(tt);W._x_anchor&&(Ct||ki(W,W._x_anchor.x,W._x_anchor.y))}))}function ki(N,W,Q){Object.assign(N.style,{left:W+"px",top:Q+"px",position:"absolute"})}function dn(N){let Q=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(pt=>N.includes(pt)),tt=0;if(N.includes("offset")){let pt=N.findIndex(mt=>mt==="offset");tt=N[pt+1]!==void 0?Number(N[pt+1]):tt}let lt=N.includes("no-style");return{placement:Q,offsetValue:tt,unstyled:lt}}var xn=zn}}),dd=$n({"node_modules/nprogress/nprogress.js"(r,t){(function(e,i){typeof define=="function"&&define.amd?define(i):typeof r=="object"?t.exports=i():e.NProgress=i()})(r,function(){var e={};e.version="0.2.0";var i=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(A){var w,T;for(w in A)T=A[w],T!==void 0&&A.hasOwnProperty(w)&&(i[w]=T);return this},e.status=null,e.set=function(A){var w=e.isStarted();A=n(A,i.minimum,1),e.status=A===1?null:A;var T=e.render(!w),E=T.querySelector(i.barSelector),R=i.speed,M=i.easing;return T.offsetWidth,o(function(B){i.positionUsing===""&&(i.positionUsing=e.getPositioningCSS()),u(E,a(A,R,M)),A===1?(u(T,{transition:"none",opacity:1}),T.offsetWidth,setTimeout(function(){u(T,{transition:"all "+R+"ms linear",opacity:0}),setTimeout(function(){e.remove(),B()},R)},R)):setTimeout(B,R)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var A=function(){setTimeout(function(){e.status&&(e.trickle(),A())},i.trickleSpeed)};return i.trickle&&A(),this},e.done=function(A){return!A&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(A){var w=e.status;return w?(typeof A!="number"&&(A=(1-w)*n(Math.random()*w,.1,.95)),w=n(w+A,0,.994),e.set(w)):e.start()},e.trickle=function(){return e.inc(Math.random()*i.trickleRate)},(function(){var A=0,w=0;e.promise=function(T){return!T||T.state()==="resolved"?this:(w===0&&e.start(),A++,w++,T.always(function(){w--,w===0?(A=0,e.done()):e.set((A-w)/A)}),this)}})(),e.render=function(A){if(e.isRendered())return document.getElementById("nprogress");p(document.documentElement,"nprogress-busy");var w=document.createElement("div");w.id="nprogress",w.innerHTML=i.template;var T=w.querySelector(i.barSelector),E=A?"-100":s(e.status||0),R=document.querySelector(i.parent),M;return u(T,{transition:"all 0 linear",transform:"translate3d("+E+"%,0,0)"}),i.showSpinner||(M=w.querySelector(i.spinnerSelector),M&&x(M)),R!=document.body&&p(R,"nprogress-custom-parent"),R.appendChild(w),w},e.remove=function(){b(document.documentElement,"nprogress-busy"),b(document.querySelector(i.parent),"nprogress-custom-parent");var A=document.getElementById("nprogress");A&&x(A)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var A=document.body.style,w="WebkitTransform"in A?"Webkit":"MozTransform"in A?"Moz":"msTransform"in A?"ms":"OTransform"in A?"O":"";return w+"Perspective"in A?"translate3d":w+"Transform"in A?"translate":"margin"};function n(A,w,T){return A<w?w:A>T?T:A}function s(A){return(-1+A)*100}function a(A,w,T){var E;return i.positionUsing==="translate3d"?E={transform:"translate3d("+s(A)+"%,0,0)"}:i.positionUsing==="translate"?E={transform:"translate("+s(A)+"%,0)"}:E={"margin-left":s(A)+"%"},E.transition="all "+w+"ms "+T,E}var o=(function(){var A=[];function w(){var T=A.shift();T&&T(w)}return function(T){A.push(T),A.length==1&&w()}})(),u=(function(){var A=["Webkit","O","Moz","ms"],w={};function T(B){return B.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(U,z){return z.toUpperCase()})}function E(B){var U=document.body.style;if(B in U)return B;for(var z=A.length,f=B.charAt(0).toUpperCase()+B.slice(1),H;z--;)if(H=A[z]+f,H in U)return H;return B}function R(B){return B=T(B),w[B]||(w[B]=E(B))}function M(B,U,z){U=R(U),B.style[U]=z}return function(B,U){var z=arguments,f,H;if(z.length==2)for(f in U)H=U[f],H!==void 0&&U.hasOwnProperty(f)&&M(B,f,H);else M(B,z[1],z[2])}})();function d(A,w){var T=typeof A=="string"?A:y(A);return T.indexOf(" "+w+" ")>=0}function p(A,w){var T=y(A),E=T+w;d(T,w)||(A.className=E.substring(1))}function b(A,w){var T=y(A),E;d(A,w)&&(E=T.replace(" "+w+" "," "),A.className=E.substring(1,E.length-1))}function y(A){return(" "+(A.className||"")+" ").replace(/\s+/gi," ")}function x(A){A&&A.parentNode&&A.parentNode.removeChild(A)}return e})}}),fd=$n({"../alpine/packages/morph/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(f,H)=>{for(var V in H)e(f,V,{get:H[V],enumerable:!0})},o=(f,H,V,at)=>{if(H&&typeof H=="object"||typeof H=="function")for(let st of n(H))!s.call(f,st)&&st!==V&&e(f,st,{get:()=>H[st],enumerable:!(at=i(H,st))||at.enumerable});return f},u=f=>o(e({},"__esModule",{value:!0}),f),d={};a(d,{default:()=>z,morph:()=>U}),t.exports=u(d);function p(f,H,V){M();let at,st,ht,dt,Ht,te,kt,vt,re;function ge(wt={}){let At=ee=>ee.getAttribute("key"),ae=()=>{};dt=wt.updating||ae,Ht=wt.updated||ae,te=wt.removing||ae,kt=wt.removed||ae,vt=wt.adding||ae,re=wt.added||ae,st=wt.key||At,ht=wt.lookahead||!1}function Le(wt,At){if(Ut(wt,At))return Pt(wt,At);let ae=!1,ee=!1;if(!y(dt,()=>ee=!0,wt,At,()=>ae=!0)){if(wt.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(wt,At),wt._x_teleport&&At._x_teleport&&Le(wt._x_teleport,At._x_teleport)),w(At)){Rt(wt,At),Ht(wt,At);return}ae||Vt(wt,At),Ht(wt,At),ee||Bt(wt,At)}}function Ut(wt,At){return wt.nodeType!=At.nodeType||wt.nodeName!=At.nodeName||yt(wt)!=yt(At)}function Pt(wt,At){if(b(te,wt))return;let ae=At.cloneNode(!0);b(vt,ae)||(wt.replaceWith(ae),kt(wt),re(ae))}function Rt(wt,At){let ae=At.nodeValue;wt.nodeValue!==ae&&(wt.nodeValue=ae)}function Vt(wt,At){if(wt._x_transitioning||wt._x_isShown&&!At._x_isShown||!wt._x_isShown&&At._x_isShown)return;let ae=Array.from(wt.attributes),ee=Array.from(At.attributes);for(let Xt=ae.length-1;Xt>=0;Xt--){let Mt=ae[Xt].name;At.hasAttribute(Mt)||wt.removeAttribute(Mt)}for(let Xt=ee.length-1;Xt>=0;Xt--){let Mt=ee[Xt].name,ui=ee[Xt].value;wt.getAttribute(Mt)!==ui&&wt.setAttribute(Mt,ui)}}function Bt(wt,At){let ae=Jt(wt.children),ee={},Xt=E(At),Mt=E(wt);for(;Xt;){B(Xt,Mt);let Et=yt(Xt),et=yt(Mt);if(!Mt)if(Et&&ee[Et]){let qt=ee[Et];wt.appendChild(qt),Mt=qt,et=yt(Mt)}else{if(!b(vt,Xt)){let qt=Xt.cloneNode(!0);wt.appendChild(qt),re(qt)}Xt=R(At,Xt);continue}let ct=qt=>qt&&qt.nodeType===8&&qt.textContent==="[if BLOCK]><![endif]",Wt=qt=>qt&&qt.nodeType===8&&qt.textContent==="[if ENDBLOCK]><![endif]";if(ct(Xt)&&ct(Mt)){let qt=0,Dt=Mt;for(;Mt;){let Ee=R(wt,Mt);if(ct(Ee))qt++;else if(Wt(Ee)&&qt>0)qt--;else if(Wt(Ee)&&qt===0){Mt=Ee;break}Mt=Ee}let ft=Mt;qt=0;let bt=Xt;for(;Xt;){let Ee=R(At,Xt);if(ct(Ee))qt++;else if(Wt(Ee)&&qt>0)qt--;else if(Wt(Ee)&&qt===0){Xt=Ee;break}Xt=Ee}let rt=Xt,oe=new T(Dt,ft),Se=new T(bt,rt);Bt(oe,Se);continue}if(Mt.nodeType===1&&ht&&!Mt.isEqualNode(Xt)){let qt=R(At,Xt),Dt=!1;for(;!Dt&&qt;)qt.nodeType===1&&Mt.isEqualNode(qt)&&(Dt=!0,Mt=Ne(wt,Xt,Mt),et=yt(Mt)),qt=R(At,qt)}if(Et!==et){if(!Et&&et){ee[et]=Mt,Mt=Ne(wt,Xt,Mt),ee[et].remove(),Mt=R(wt,Mt),Xt=R(At,Xt);continue}if(Et&&!et&&ae[Et]&&(Mt.replaceWith(ae[Et]),Mt=ae[Et],et=yt(Mt)),Et&&et){let qt=ae[Et];if(qt)ee[et]=Mt,Mt.replaceWith(qt),Mt=qt,et=yt(Mt);else{ee[et]=Mt,Mt=Ne(wt,Xt,Mt),ee[et].remove(),Mt=R(wt,Mt),Xt=R(At,Xt);continue}}}let ie=Mt&&R(wt,Mt);Le(Mt,Xt),Xt=Xt&&R(At,Xt),Mt=ie}let ui=[];for(;Mt;)b(te,Mt)||ui.push(Mt),Mt=R(wt,Mt);for(;ui.length;){let Et=ui.shift();Et.remove(),kt(Et)}}function yt(wt){return wt&&wt.nodeType===1&&st(wt)}function Jt(wt){let At={};for(let ae of wt){let ee=yt(ae);ee&&(At[ee]=ae)}return At}function Ne(wt,At,ae){if(!b(vt,At)){let ee=At.cloneNode(!0);return wt.insertBefore(ee,ae),re(ee),ee}return At}return ge(V),at=typeof H=="string"?A(H):H,window.Alpine&&window.Alpine.closestDataStack&&!f._x_dataStack&&(at._x_dataStack=window.Alpine.closestDataStack(f),at._x_dataStack&&window.Alpine.cloneNode(f,at)),Le(f,at),at=void 0,f}p.step=()=>{},p.log=()=>{};function b(f,...H){let V=!1;return f(...H,()=>V=!0),V}function y(f,H,...V){let at=!1;return f(...V,()=>at=!0,H),at}var x=!1;function A(f){const H=document.createElement("template");return H.innerHTML=f,H.content.firstElementChild}function w(f){return f.nodeType===3||f.nodeType===8}var T=class{constructor(f,H){this.startComment=f,this.endComment=H}get children(){let f=[],H=this.startComment.nextSibling;for(;H&&H!==this.endComment;)f.push(H),H=H.nextSibling;return f}appendChild(f){this.endComment.before(f)}get firstChild(){let f=this.startComment.nextSibling;if(f!==this.endComment)return f}nextNode(f){let H=f.nextSibling;if(H!==this.endComment)return H}insertBefore(f,H){return H.before(f),f}};function E(f){return f.firstChild}function R(f,H){let V;return f instanceof T?V=f.nextNode(H):V=H.nextSibling,V}function M(){if(x)return;x=!0;let f=Element.prototype.setAttribute,H=document.createElement("div");Element.prototype.setAttribute=function(at,st){if(!at.includes("@"))return f.call(this,at,st);H.innerHTML=`<span ${at}="${st}"></span>`;let ht=H.firstElementChild.getAttributeNode(at);H.firstElementChild.removeAttributeNode(ht),this.setAttributeNode(ht)}}function B(f,H){let V=H&&H._x_bindings&&H._x_bindings.id;V&&f.setAttribute&&(f.setAttribute("id",V),f.id=V)}function U(f){f.morph=p}var z=U}}),pd=$n({"../alpine/packages/mask/dist/module.cjs.js"(r,t){var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(T,E)=>{for(var R in E)e(T,R,{get:E[R],enumerable:!0})},o=(T,E,R,M)=>{if(E&&typeof E=="object"||typeof E=="function")for(let B of n(E))!s.call(T,B)&&B!==R&&e(T,B,{get:()=>E[B],enumerable:!(M=i(E,B))||M.enumerable});return T},u=T=>o(e({},"__esModule",{value:!0}),T),d={};a(d,{default:()=>w,mask:()=>p,stripDown:()=>y}),t.exports=u(d);function p(T){T.directive("mask",(E,{value:R,expression:M},{effect:B,evaluateLater:U,cleanup:z})=>{let f=()=>M,H="";queueMicrotask(()=>{if(["function","dynamic"].includes(R)){let ht=U(M);B(()=>{f=dt=>{let Ht;return T.dontAutoEvaluateFunctions(()=>{ht(te=>{Ht=typeof te=="function"?te(dt):te},{scope:{$input:dt,$money:A.bind({el:E})}})}),Ht},at(E,!1)})}else at(E,!1);if(E._x_model){if(E._x_model.get()===E.value||E._x_model.get()===null&&E.value==="")return;E._x_model.set(E.value)}});const V=new AbortController;z(()=>{V.abort()}),E.addEventListener("input",()=>at(E),{signal:V.signal,capture:!0}),E.addEventListener("blur",()=>at(E,!1),{signal:V.signal});function at(ht,dt=!0){let Ht=ht.value,te=f(Ht);if(!te||te==="false")return!1;if(H.length-ht.value.length===1)return H=ht.value;let kt=()=>{H=ht.value=st(Ht,te)};dt?b(ht,te,()=>{kt()}):kt()}function st(ht,dt){if(ht==="")return"";let Ht=y(dt,ht);return x(dt,Ht)}}).before("model")}function b(T,E,R){let M=T.selectionStart,B=T.value;R();let U=B.slice(0,M),z=x(E,y(E,U)).length;T.setSelectionRange(z,z)}function y(T,E){let R=E,M="",B={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},U="";for(let z=0;z<T.length;z++){if(["9","a","*"].includes(T[z])){U+=T[z];continue}for(let f=0;f<R.length;f++)if(R[f]===T[z]){R=R.slice(0,f)+R.slice(f+1);break}}for(let z=0;z<U.length;z++){let f=!1;for(let H=0;H<R.length;H++)if(B[U[z]].test(R[H])){M+=R[H],R=R.slice(0,H)+R.slice(H+1),f=!0;break}if(!f)break}return M}function x(T,E){let R=Array.from(E),M="";for(let B=0;B<T.length;B++){if(!["9","a","*"].includes(T[B])){M+=T[B];continue}if(R.length===0)break;M+=R.shift()}return M}function A(T,E=".",R,M=2){if(T==="-")return"-";if(/^\D+$/.test(T))return"9";R==null&&(R=E===","?".":",");let B=(H,V)=>{let at="",st=0;for(let ht=H.length-1;ht>=0;ht--)H[ht]!==V&&(st===3?(at=H[ht]+V+at,st=0):at=H[ht]+at,st++);return at},U=T.startsWith("-")?"-":"",z=T.replaceAll(new RegExp(`[^0-9\\${E}]`,"g"),""),f=Array.from({length:z.split(E)[0].length}).fill("9").join("");return f=`${U}${B(f,R)}`,M>0&&T.includes(E)&&(f+=`${E}`+"9".repeat(M)),queueMicrotask(()=>{this.el.value.endsWith(E)||this.el.value[this.el.selectionStart-1]===E&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),f}var w=p}}),gd=class{constructor(){this.arrays={}}add(r,t){this.arrays[r]||(this.arrays[r]=[]),this.arrays[r].push(t)}remove(r){this.arrays[r]&&delete this.arrays[r]}get(r){return this.arrays[r]||[]}each(r,t){return this.get(r).forEach(t)}},Mu=class{constructor(){this.arrays=new WeakMap}add(r,t){this.arrays.has(r)||this.arrays.set(r,[]),this.arrays.get(r).push(t)}remove(r){this.arrays.has(r)&&this.arrays.delete(r,[])}get(r){return this.arrays.has(r)?this.arrays.get(r):[]}each(r,t){return this.get(r).forEach(t)}};function ul(r,t,e={},i=!0){r.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:i,composed:!0,cancelable:!0}))}function hl(r,t,e){return r.addEventListener(t,e),()=>r.removeEventListener(t,e)}function Kl(r){return typeof r=="object"&&r!==null}function Pc(r){return Kl(r)&&!kl(r)}function kl(r){return Array.isArray(r)}function Du(r){return typeof r=="function"}function Rc(r){return typeof r!="object"||r===null}function Ms(r){return JSON.parse(JSON.stringify(r))}function ts(r,t){return t===""?r:t.split(".").reduce((e,i)=>e?.[i],r)}function Co(r,t,e){let i=t.split(".");if(i.length===1)return r[t]=e;let n=i.shift(),s=i.join(".");r[n]===void 0&&(r[n]={}),Co(r[n],s,e)}function Yl(r,t,e={},i=""){if(r===t)return e;if(typeof r!=typeof t||Pc(r)&&kl(t)||kl(r)&&Pc(t)||Rc(r)||Rc(t))return e[i]=t,e;let n=Object.keys(r);return Object.entries(t).forEach(([s,a])=>{e={...e,...Yl(r[s],t[s],e,i===""?s:`${i}.${s}`)},n=n.filter(o=>o!==s)}),n.forEach(s=>{e[`${i}.${s}`]="__rm__"}),e}function yr(r){let t=Mc(r)?r[0]:r;return Mc(r)&&r[1],Kl(t)&&Object.entries(t).forEach(([e,i])=>{t[e]=yr(i)}),t}function Mc(r){return Array.isArray(r)&&r.length===2&&typeof r[1]=="object"&&Object.keys(r[1]).includes("s")}function Ou(){if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if(window.livewireScriptConfig.csrf??!1)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}var gr;function md(){if(gr)return gr;if(window.livewireScriptConfig&&(window.livewireScriptConfig.nonce??!1))return gr=window.livewireScriptConfig.nonce,gr;const r=document.querySelector("style[data-livewire-style][nonce]");return r?(gr=r.nonce,gr):null}function bd(){return document.querySelector("[data-update-uri]")?.getAttribute("data-update-uri")??window.livewireScriptConfig.uri??null}function Lu(r){return!!r.match(/<script>Sfdump\(".+"\)<\/script>/)}function vd(r){let t=r.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[t,r.replace(t,"")]}var dl=new WeakMap;function ya(r){if(!dl.has(r)){let t=new wd(r);dl.set(r,t),t.registerListeners()}return dl.get(r)}function yd(r,t,e,i){let n=ya(e),s=()=>r.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:e.id,property:t}})),a=()=>r.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:e.id,property:t}})),o=()=>r.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:e.id,property:t}})),u=()=>r.dispatchEvent(new CustomEvent("livewire-upload-cancel",{bubbles:!0,detail:{id:e.id,property:t}})),d=y=>{var x=Math.round(y.loaded*100/y.total);r.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:x}}))},p=y=>{y.target.files.length!==0&&(s(),y.target.multiple?n.uploadMultiple(t,y.target.files,a,o,d,u):n.upload(t,y.target.files[0],a,o,d,u))};r.addEventListener("change",p),e.$wire.$watch(t,y=>{r.isConnected&&((y===null||y==="")&&(r.value=""),r.multiple&&Array.isArray(y)&&y.length===0&&(r.value=""))});let b=()=>{r.value=null};r.addEventListener("click",b),r.addEventListener("livewire-upload-cancel",b),i(()=>{r.removeEventListener("change",p),r.removeEventListener("click",b)})}var wd=class{constructor(r){this.component=r,this.uploadBag=new Dc,this.removeBag=new Dc}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:r,url:t})=>{this.component,this.handleSignedUrl(r,t)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:r,payload:t})=>{this.component,this.handleS3PreSignedUrl(r,t)}),this.component.$wire.$on("upload:finished",({name:r,tmpFilenames:t})=>this.markUploadFinished(r,t)),this.component.$wire.$on("upload:errored",({name:r})=>this.markUploadErrored(r)),this.component.$wire.$on("upload:removed",({name:r,tmpFilename:t})=>this.removeBag.shift(r).finishCallback(t))}upload(r,t,e,i,n,s){this.setUpload(r,{files:[t],multiple:!1,finishCallback:e,errorCallback:i,progressCallback:n,cancelledCallback:s})}uploadMultiple(r,t,e,i,n,s){this.setUpload(r,{files:Array.from(t),multiple:!0,finishCallback:e,errorCallback:i,progressCallback:n,cancelledCallback:s})}removeUpload(r,t,e){this.removeBag.push(r,{tmpFilename:t,finishCallback:e}),this.component.$wire.call("_removeUpload",r,t)}setUpload(r,t){this.uploadBag.add(r,t),this.uploadBag.get(r).length===1&&this.startUpload(r,t)}handleSignedUrl(r,t){let e=new FormData;Array.from(this.uploadBag.first(r).files).forEach(s=>e.append("files[]",s,s.name));let i={Accept:"application/json"},n=Ou();n&&(i["X-CSRF-TOKEN"]=n),this.makeRequest(r,e,"post",t,i,s=>s.paths)}handleS3PreSignedUrl(r,t){let e=this.uploadBag.first(r).files[0],i=t.headers;"Host"in i&&delete i.Host;let n=t.url;this.makeRequest(r,e,"put",n,i,s=>[t.path])}makeRequest(r,t,e,i,n,s){let a=new XMLHttpRequest;a.open(e,i),Object.entries(n).forEach(([o,u])=>{a.setRequestHeader(o,u)}),a.upload.addEventListener("progress",o=>{o.detail={},o.detail.progress=Math.floor(o.loaded*100/o.total),this.uploadBag.first(r).progressCallback(o)}),a.addEventListener("load",()=>{if((a.status+"")[0]==="2"){let u=s(a.response&&JSON.parse(a.response));this.component.$wire.call("_finishUpload",r,u,this.uploadBag.first(r).multiple);return}let o=null;a.status===422&&(o=a.response),this.component.$wire.call("_uploadErrored",r,o,this.uploadBag.first(r).multiple)}),this.uploadBag.first(r).request=a,a.send(t)}startUpload(r,t){let e=t.files.map(i=>({name:i.name,size:i.size,type:i.type}));this.component.$wire.call("_startUpload",r,e,t.multiple),this.component}markUploadFinished(r,t){this.component;let e=this.uploadBag.shift(r);e.finishCallback(e.multiple?t:t[0]),this.uploadBag.get(r).length>0&&this.startUpload(r,this.uploadBag.last(r))}markUploadErrored(r){this.component,this.uploadBag.shift(r).errorCallback(),this.uploadBag.get(r).length>0&&this.startUpload(r,this.uploadBag.last(r))}cancelUpload(r,t=null){this.component;let e=this.uploadBag.first(r);e&&(e.request&&e.request.abort(),this.uploadBag.shift(r).cancelledCallback(),t&&t())}},Dc=class{constructor(){this.bag={}}add(r,t){this.bag[r]||(this.bag[r]=[]),this.bag[r].push(t)}push(r,t){this.add(r,t)}first(r){return this.bag[r]?this.bag[r][0]:null}last(r){return this.bag[r].slice(-1)[0]}get(r){return this.bag[r]}shift(r){return this.bag[r].shift()}call(r,...t){(this.listeners[r]||[]).forEach(e=>{e(...t)})}has(r){return Object.keys(this.listeners).includes(r)}};function _d(r,t,e,i=()=>{},n=()=>{},s=()=>{},a=()=>{}){ya(r).upload(t,e,i,n,s,a)}function Ad(r,t,e,i=()=>{},n=()=>{},s=()=>{},a=()=>{}){ya(r).uploadMultiple(t,e,i,n,s,a)}function xd(r,t,e,i=()=>{},n=()=>{}){ya(r).removeUpload(t,e,i,n)}function Sd(r,t,e=()=>{}){ya(r).cancelUpload(t,e)}var Oc=Ie(si());function Iu(r,t){return t||(t=()=>{}),(e,i=!1)=>{let n=i,s=e,a=r.$wire,o=a.get(s);return Oc.default.interceptor((d,p,b,y,x)=>{if(typeof o>"u"){console.error(`Livewire Entangle Error: Livewire property ['${s}'] cannot be found on component: ['${r.name}']`);return}let A=Oc.default.entangle({get(){return a.get(e)},set(w){a.set(e,w,n)}},{get(){return p()},set(w){b(w)}});return t(()=>A()),Ed(a.get(e))},d=>{Object.defineProperty(d,"live",{get(){return n=!0,d}})})(o)}}function Ed(r){return typeof r=="object"?JSON.parse(JSON.stringify(r)):r}var Os=[];function ke(r,t){return Os[r]||(Os[r]=[]),Os[r].push(t),()=>{Os[r]=Os[r].filter(e=>e!==t)}}function Ke(r,...t){let e=Os[r]||[],i=[];for(let n=0;n<e.length;n++){let s=e[n](...t);Du(s)&&i.push(s)}return n=>Fu(i,n)}async function Nu(r,...t){let e=Os[r]||[],i=[];for(let n=0;n<e.length;n++){let s=await e[n](...t);Du(s)&&i.push(s)}return n=>Fu(i,n)}function Fu(r,t){let e=t;for(let i=0;i<r.length;i++){let n=r[i](e);n!==void 0&&(e=n)}return e}function Bu(r){let t=document.createElement("html");t.innerHTML=r,t.querySelectorAll("a").forEach(n=>n.setAttribute("target","_top"));let e=document.getElementById("livewire-error");typeof e<"u"&&e!=null?e.innerHTML="":(e=document.createElement("div"),e.id="livewire-error",e.style.position="fixed",e.style.width="100vw",e.style.height="100vh",e.style.padding="50px",e.style.backgroundColor="rgba(0, 0, 0, .6)",e.style.zIndex=2e5);let i=document.createElement("iframe");i.style.backgroundColor="#17161A",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",e.appendChild(i),document.body.prepend(e),document.body.style.overflow="hidden",i.contentWindow.document.open(),i.contentWindow.document.write(t.outerHTML),i.contentWindow.document.close(),e.addEventListener("click",()=>Lc(e)),e.setAttribute("tabindex",0),e.addEventListener("keydown",n=>{n.key==="Escape"&&Lc(e)}),e.focus()}function Lc(r){r.outerHTML="",document.body.style.overflow="visible"}var Cd=class{constructor(){this.commits=new Set}add(r){this.commits.add(r)}delete(r){this.commits.delete(r)}hasCommitFor(r){return!!this.findCommitByComponent(r)}findCommitByComponent(r){for(let[t,e]of this.commits.entries())if(e.component===r)return e}shouldHoldCommit(r){return!r.isolate}empty(){return this.commits.size===0}async send(){this.prepare(),await Md(this)}prepare(){this.commits.forEach(r=>r.prepare())}payload(){let r=[],t=[],e=[];return this.commits.forEach(s=>{let[a,o,u]=s.toRequestPayload();r.push(a),t.push(o),e.push(u)}),[r,s=>t.forEach(a=>a(s.shift())),()=>e.forEach(s=>s())]}},Td=class{constructor(r){this.component=r,this.isolate=!1,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(r){this.resolvers.push(r)}addCall(r,t,e){this.calls.push({path:"",method:r,params:t,handleReturn(i){e(i)}})}prepare(){Ke("commit.prepare",{component:this.component})}toRequestPayload(){let r=Yl(this.component.canonical,this.component.ephemeral),t=this.component.mergeQueuedUpdates(r),e={snapshot:this.component.snapshotEncoded,updates:t,calls:this.calls.map(y=>({path:y.path,method:y.method,params:y.params}))},i=[],n=[],s=[],a=y=>i.forEach(x=>x(y)),o=()=>n.forEach(y=>y()),u=()=>s.forEach(y=>y()),d=Ke("commit",{component:this.component,commit:e,succeed:y=>{i.push(y)},fail:y=>{n.push(y)},respond:y=>{s.push(y)}});return[e,y=>{let{snapshot:x,effects:A}=y;if(u(),this.component.mergeNewSnapshot(x,A,t),this.component.processEffects(this.component.effects),A.returns){let T=A.returns;this.calls.map(({handleReturn:R})=>R).forEach((R,M)=>{R(T[M])})}let w=JSON.parse(x);d({snapshot:w,effects:A}),this.resolvers.forEach(T=>T()),a(y)},()=>{u(),o()}]}},kd=class{constructor(){this.commits=new Set,this.pools=new Set}add(r){let t=this.findCommitOr(r,()=>{let e=new Td(r);return this.commits.add(e),e});return Pd(t,()=>{this.findPoolWithComponent(t.component)||this.createAndSendNewPool()}),t}findCommitOr(r,t){for(let[e,i]of this.commits.entries())if(i.component===r)return i;return t()}findPoolWithComponent(r){for(let[t,e]of this.pools.entries())if(e.hasCommitFor(r))return e}createAndSendNewPool(){Ke("commit.pooling",{commits:this.commits});let r=this.corraleCommitsIntoPools();this.commits.clear(),Ke("commit.pooled",{pools:r}),r.forEach(t=>{t.empty()||(this.pools.add(t),t.send().then(()=>{this.pools.delete(t),this.sendAnyQueuedCommits()}))})}corraleCommitsIntoPools(){let r=new Set;for(let[t,e]of this.commits.entries()){let i=!1;if(r.forEach(n=>{n.shouldHoldCommit(e)&&(n.add(e),i=!0)}),!i){let n=new Cd;n.add(e),r.add(n)}}return r}sendAnyQueuedCommits(){this.commits.size>0&&this.createAndSendNewPool()}},fl=new WeakMap;function Pd(r,t){fl.has(r)||fl.set(r,setTimeout(()=>{t(),fl.delete(r)},5))}var ju=new kd;async function Hu(r){let t=ju.add(r),e=new Promise(i=>{t.addResolver(i)});return e.commit=t,e}async function Rd(r,t,e){let i=ju.add(r),n=new Promise(s=>{i.addCall(t,e,a=>s(a))});return n.commit=i,n}async function Md(r){let[t,e,i]=r.payload(),n={method:"POST",body:JSON.stringify({_token:Ou(),components:t}),headers:{"Content-type":"application/json","X-Livewire":""}},s=[],a=[],o=[],u=R=>s.forEach(M=>M(R)),d=R=>a.forEach(M=>M(R)),p=R=>o.forEach(M=>M(R)),b=Ke("request.profile",n),y=bd();Ke("request",{url:y,options:n,payload:n.body,respond:R=>o.push(R),succeed:R=>s.push(R),fail:R=>a.push(R)});let x;try{x=await fetch(y,n)}catch{b({content:"{}",failed:!0}),i(),d({status:503,content:null,preventDefault:()=>{}});return}let A={status:x.status,response:x};p(A),x=A.response;let w=await x.text();if(!x.ok){b({content:"{}",failed:!0});let R=!1;return i(),d({status:x.status,content:w,preventDefault:()=>R=!0}),R?void 0:(x.status===419&&Dd(),Od(w))}if(x.redirected&&(window.location.href=x.url),Lu(w)){let R;[R,w]=vd(w),Bu(R),b({content:"{}",failed:!0})}else b({content:w,failed:!1});let{components:T,assets:E}=JSON.parse(w);await Nu("payload.intercept",{components:T,assets:E}),await e(T),u({status:x.status,json:JSON.parse(w)})}function Dd(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function Od(r){Bu(r)}var $u=Ie(si()),Jl={},Uu;function Ze(r,t,e=null){Jl[r]=t}function Ld(r){Uu=r}var Ic={on:"$on",el:"$el",id:"$id",js:"$js",get:"$get",set:"$set",call:"$call",hook:"$hook",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload",cancelUpload:"$cancelUpload"};function Id(r,t){return new Proxy({},{get(e,i){if(i==="__instance")return r;if(i in Ic)return Nc(r,Ic[i]);if(i in Jl)return Nc(r,i);if(i in t)return t[i];if(!["then"].includes(i))return Nd(r)(i)},set(e,i,n){return i in t&&(t[i]=n),!0}})}function Nc(r,t){return Jl[t](r)}function Nd(r){return Uu(r)}$u.default.magic("wire",(r,{cleanup:t})=>{let e;return new Proxy({},{get(i,n){return e||(e=is(r)),["$entangle","entangle"].includes(n)?Iu(e,t):e.$wire[n]},set(i,n,s){return e||(e=is(r)),e.$wire[n]=s,!0}})});Ze("__instance",r=>r);Ze("$get",r=>(t,e=!0)=>ts(e?r.reactive:r.ephemeral,t));Ze("$el",r=>r.el);Ze("$id",r=>r.id);Ze("$js",r=>{let t=r.addJsAction.bind(r),e=r.getJsActions();return Object.keys(e).forEach(i=>{t[i]=r.getJsAction(i)}),t});Ze("$set",r=>async(t,e,i=!0)=>(Co(r.reactive,t,e),i?(r.queueUpdate(t,e),await Hu(r)):Promise.resolve()));Ze("$call",r=>async(t,...e)=>await r.$wire[t](...e));Ze("$entangle",r=>(t,e=!1)=>Iu(r)(t,e));Ze("$toggle",r=>(t,e=!0)=>r.$wire.set(t,!r.$wire.get(t),e));Ze("$watch",r=>(t,e)=>{let i=()=>ts(r.reactive,t),n=$u.default.watch(i,e);r.addCleanup(n)});Ze("$refresh",r=>r.$wire.$commit);Ze("$commit",r=>async()=>await Hu(r));Ze("$on",r=>(...t)=>Vd(r,...t));Ze("$hook",r=>(t,e)=>{let i=ke(t,({component:n,...s})=>{if(n===void 0)return e(s);if(n.id===r.id)return e({component:n,...s})});return r.addCleanup(i),i});Ze("$dispatch",r=>(...t)=>zu(r,...t));Ze("$dispatchSelf",r=>(...t)=>xr(r,...t));Ze("$dispatchTo",()=>(...r)=>Ql(...r));Ze("$upload",r=>(...t)=>_d(r,...t));Ze("$uploadMultiple",r=>(...t)=>Ad(r,...t));Ze("$removeUpload",r=>(...t)=>xd(r,...t));Ze("$cancelUpload",r=>(...t)=>Sd(r,...t));var pl=new WeakMap;Ze("$parent",r=>{if(pl.has(r))return pl.get(r).$wire;let t=r.parent;return pl.set(r,t),t.$wire});var Ar=new WeakMap;function Fd(r,t,e){Ar.has(r)||Ar.set(r,{});let i=Ar.get(r);i[t]=e,Ar.set(r,i)}Ld(r=>t=>async(...e)=>{if(e.length===1&&e[0]instanceof Event&&(e=[]),Ar.has(r)){let i=Ar.get(r);if(typeof i[t]=="function")return i[t](e)}return await Rd(r,t,e)});var Bd=class{constructor(r){if(r.__livewire)throw"Component already initialized";if(r.__livewire=this,this.el=r,this.id=r.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=r.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(r.getAttribute("wire:effects")),this.originalEffects=Ms(this.effects),this.canonical=yr(Ms(this.snapshot.data)),this.ephemeral=yr(Ms(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.queuedUpdates={},this.jsActions={},this.$wire=Id(this,this.reactive),this.cleanups=[],this.processEffects(this.effects)}mergeNewSnapshot(r,t,e={}){let i=JSON.parse(r),n=Ms(this.canonical),s=this.applyUpdates(n,e),a=yr(Ms(i.data)),o=Yl(s,a);this.snapshotEncoded=r,this.snapshot=i,this.effects=t,this.canonical=yr(Ms(i.data));let u=yr(Ms(i.data));return Object.entries(o).forEach(([d,p])=>{let b=d.split(".")[0];this.reactive[b]=u[b]}),o}queueUpdate(r,t){this.queuedUpdates[r]=t}mergeQueuedUpdates(r){return Object.entries(this.queuedUpdates).forEach(([t,e])=>{Object.entries(r).forEach(([i,n])=>{i.startsWith(e)&&delete r[i]}),r[t]=e}),this.queuedUpdates=[],r}applyUpdates(r,t){for(let e in t)Co(r,e,t[e]);return r}replayUpdate(r,t){let e={...this.effects,html:t};this.mergeNewSnapshot(JSON.stringify(r),e),this.processEffects({html:t})}processEffects(r){Ke("effects",this,r),Ke("effect",{component:this,effects:r,cleanup:t=>this.addCleanup(t)})}get children(){let r=this.snapshot.memo;return Object.values(r.children).map(e=>e[1]).map(e=>$d(e))}get parent(){return is(this.el.parentElement)}inscribeSnapshotAndEffectsOnElement(){let r=this.el;r.setAttribute("wire:snapshot",this.snapshotEncoded);let t=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(t.url=this.originalEffects.url),this.originalEffects.scripts&&(t.scripts=this.originalEffects.scripts),r.setAttribute("wire:effects",JSON.stringify(t))}addJsAction(r,t){this.jsActions[r]=t}hasJsAction(r){return this.jsActions[r]!==void 0}getJsAction(r){return this.jsActions[r].bind(this.$wire)}getJsActions(){return this.jsActions}addCleanup(r){this.cleanups.push(r)}cleanup(){for(delete this.el.__livewire;this.cleanups.length>0;)this.cleanups.pop()()}},es={};function jd(r){let t=new Bd(r);if(es[t.id])throw"Component already registered";return Ke("component.init",{component:t,cleanup:i=>t.addCleanup(i)}),es[t.id]=t,t}function Hd(r){let t=es[r];t&&(t.cleanup(),delete es[r])}function $d(r){let t=es[r];if(!t)throw"Component not found: "+r;return t}function is(r,t=!0){let e=Alpine.findClosest(r,i=>i.__livewire);if(!e){if(t)throw"Could not find Livewire component in DOM tree";return}return e.__livewire}function qu(r){return Object.values(es).filter(t=>r==t.name)}function Ud(r){return qu(r).map(t=>t.$wire)}function qd(r){let t=es[r];return t&&t.$wire}function zd(){return Object.values(es)[0].$wire}function Wd(){return Object.values(es)}function zu(r,t,e){To(r.el,t,e)}function Gd(r,t){To(window,r,t)}function xr(r,t,e){To(r.el,t,e,!1)}function Ql(r,t,e){qu(r).forEach(n=>{To(n.el,t,e,!1)})}function Vd(r,t,e){r.el.addEventListener(t,i=>{e(i.detail)})}function Xd(r,t){let e=i=>{i.__livewire&&t(i.detail)};return window.addEventListener(r,e),()=>{window.removeEventListener(r,e)}}function To(r,t,e,i=!0){let n=new CustomEvent(t,{bubbles:i,detail:e});n.__livewire={name:t,params:e,receivedBy:[]},r.dispatchEvent(n)}var pa=new Set;function oa(r){return r.match(new RegExp("wire:"))}function Pl(r,t){let[e,...i]=t.replace(new RegExp("wire:"),"").split(".");return new Qd(e,i,t,r)}function cn(r,t){pa.has(r)||(pa.add(r),ke("directive.init",({el:e,component:i,directive:n,cleanup:s})=>{n.value===r&&t({el:e,directive:n,component:i,$wire:i.$wire,cleanup:s})}))}function Kd(r,t){pa.has(r)||(pa.add(r),ke("directive.global.init",({el:e,directive:i,cleanup:n})=>{i.value===r&&t({el:e,directive:i,cleanup:n})}))}function Zl(r){return new Jd(r)}function Yd(r){return pa.has(r)}var Jd=class{constructor(r){this.el=r,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(r){return this.directives.map(t=>t.value).includes(r)}missing(r){return!this.has(r)}get(r){return this.directives.find(t=>t.value===r)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(r=>oa(r)).map(r=>Pl(this.el,r)))}},Qd=class{constructor(r,t,e,i){this.rawName=this.raw=e,this.el=i,this.eventContext,this.value=r,this.modifiers=t,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:r}=this.parseOutMethodAndParams(this.expression);return r}get params(){const{params:r}=this.parseOutMethodAndParams(this.expression);return r}parseOutMethodAndParams(r){let t=r,e=[];const i=t.match(/(.*?)\((.*)\)/s);return i&&(t=i[1],e=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${i[2]})`)(this.eventContext)),{method:t,params:e}}},Zd=Ie(ad()),tf=Ie(od()),ef=Ie(ld()),nf=Ie(cd()),sf=Ie(ud()),rf=Ie(hd()),Rl=class{constructor(r,t){this.url=r,this.html=t}},Hn={currentKey:null,currentUrl:null,keys:[],lookup:{},limit:10,has(r){return this.lookup[r]!==void 0},retrieve(r){let t=this.lookup[r];if(t===void 0)throw"No back button cache found for current location: "+r;return t},replace(r,t){this.has(r)?this.lookup[r]=t:this.push(r,t)},push(r,t){this.lookup[r]=t;let e=this.keys.indexOf(r);e>-1&&this.keys.splice(e,1),this.keys.unshift(r),this.trim()},trim(){for(let r of this.keys.splice(this.limit))delete this.lookup[r]}};function af(){let r=new URL(window.location.href,document.baseURI);Wu(r,document.documentElement.outerHTML)}function of(r,t){let e=document.documentElement.outerHTML;Hn.replace(r,new Rl(t,e))}function lf(r,t){let e;r(i=>e=i),window.addEventListener("popstate",i=>{let n=i.state||{},s=n.alpine||{};if(Object.keys(n).length!==0&&s.snapshotIdx)if(Hn.has(s.snapshotIdx)){let a=Hn.retrieve(s.snapshotIdx);t(a.html,a.url,Hn.currentUrl,Hn.currentKey)}else e(s.url)})}function cf(r,t){uf(t,r)}function uf(r,t){Gu("pushState",r,t)}function Wu(r,t){Gu("replaceState",r,t)}function Gu(r,t,e){let i=t.toString()+"-"+Math.random();r==="pushState"?Hn.push(i,new Rl(t,e)):Hn.replace(i=Hn.currentKey??i,new Rl(t,e));let n=history.state||{};n.alpine||(n.alpine={}),n.alpine.snapshotIdx=i,n.alpine.url=t.toString();try{history[r](n,JSON.stringify(document.title),t),Hn.currentKey=i,Hn.currentUrl=t}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+t),console.error(s)}}function hf(r,t){let e=s=>!s.isTrusted,i=s=>s.which>1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey,n=s=>s.which!==13||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;r.addEventListener("click",s=>{if(e(s)){s.preventDefault(),t(a=>a());return}i(s)||s.preventDefault()}),r.addEventListener("mousedown",s=>{i(s)||(s.preventDefault(),t(a=>{let o=u=>{u.preventDefault(),a(),r.removeEventListener("mouseup",o)};r.addEventListener("mouseup",o)}))}),r.addEventListener("keydown",s=>{n(s)||(s.preventDefault(),t(a=>a()))})}function df(r,t=60,e){r.addEventListener("mouseenter",i=>{let n=setTimeout(()=>{e(i)},t),s=()=>{clearTimeout(n),r.removeEventListener("mouseleave",s)};r.addEventListener("mouseleave",s)})}function Fc(r){return Tr(r.getAttribute("href"))}function Tr(r){return r!==null&&new URL(r,document.baseURI)}function ko(r){return r.pathname+r.search+r.hash}function ff(r,t){let e=ko(r);Vu(e,(i,n)=>{t(i,n)})}function Vu(r,t){let e={headers:{"X-Livewire-Navigate":""}};Ke("navigate.request",{url:r,options:e});let i;fetch(r,e).then(n=>{let s=Tr(r);return i=Tr(n.url),s.pathname+s.search===i.pathname+i.search&&(i.hash=s.hash),n.text()}).then(n=>{t(n,i)})}var ln={};function Bc(r,t){let e=ko(r);ln[e]||(ln[e]={finished:!1,html:null,whenFinished:()=>{}},Vu(e,(i,n)=>{t(i,n)}))}function jc(r,t,e){let i=ln[ko(t)];i.html=r,i.finished=!0,i.finalDestination=e,i.whenFinished()}function pf(r,t,e){let i=ko(r);if(!ln[i])return e();if(ln[i].finished){let n=ln[i].html,s=ln[i].finalDestination;return delete ln[i],t(n,s)}else ln[i].whenFinished=()=>{let n=ln[i].html,s=ln[i].finalDestination;delete ln[i],t(n,s)}}var tc=Ie(si());function Hc(r){tc.default.mutateDom(()=>{r.querySelectorAll("[data-teleport-template]").forEach(t=>t._x_teleport.remove())})}function $c(r){tc.default.mutateDom(()=>{r.querySelectorAll("[data-teleport-target]").forEach(t=>t.remove())})}function Uc(r){tc.default.walk(r,(t,e)=>{t._x_teleport&&(t._x_teleportPutBack(),e())})}function gf(r){return r.hasAttribute("data-teleport-target")}function qc(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(r=>{r.setAttribute("data-scroll-x",r.scrollLeft),r.setAttribute("data-scroll-y",r.scrollTop)})}function zc(){let r=t=>{t.hasAttribute("data-scroll-x")?(t.scrollTo({top:Number(t.getAttribute("data-scroll-y")),left:Number(t.getAttribute("data-scroll-x")),behavior:"instant"}),t.removeAttribute("data-scroll-x"),t.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{queueMicrotask(()=>{r(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(r)})})}var Ml=Ie(si()),ha={};function Wc(r){ha={},document.querySelectorAll("[x-persist]").forEach(t=>{ha[t.getAttribute("x-persist")]=t,r(t),Ml.default.mutateDom(()=>{t.remove()})})}function Gc(r){let t=[];document.querySelectorAll("[x-persist]").forEach(e=>{let i=ha[e.getAttribute("x-persist")];i&&(t.push(e.getAttribute("x-persist")),i._x_wasPersisted=!0,r(i,e),Ml.default.mutateDom(()=>{e.replaceWith(i)}))}),Object.entries(ha).forEach(([e,i])=>{t.includes(e)||Ml.default.destroyTree(i)}),ha={}}function mf(r){return r.hasAttribute("x-persist")}var Po=Ie(dd());Po.default.configure({minimum:.1,trickleSpeed:200,showSpinner:!1,parent:"body"});wf();var Dl=!1;function bf(){Dl=!0,setTimeout(()=>{Dl&&Po.default.start()},150)}function vf(){Dl=!1,Po.default.done()}function yf(){Po.default.remove()}function wf(){let r=document.createElement("style");r.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px var(--livewire-progress-bar-color, #29d), 0 0 5px var(--livewire-progress-bar-color, #29d);
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `;let t=md();t&&(r.nonce=t),document.head.appendChild(r)}function Vc(r){Xu()&&r.querySelectorAll(":popover-open").forEach(t=>{t.setAttribute("data-navigate-popover-open","");let e=t.getAnimations();t._pausedAnimations=e.map(i=>({keyframes:i.effect.getKeyframes(),options:{duration:i.effect.getTiming().duration,easing:i.effect.getTiming().easing,fill:i.effect.getTiming().fill,iterations:i.effect.getTiming().iterations},currentTime:i.currentTime,playState:i.playState})),e.forEach(i=>i.pause())})}function Xc(r){Xu()&&r.querySelectorAll("[data-navigate-popover-open]").forEach(t=>{t.removeAttribute("data-navigate-popover-open"),queueMicrotask(()=>{t.isConnected&&(t.showPopover(),t.getAnimations().forEach(e=>e.finish()),t._pausedAnimations&&(t._pausedAnimations.forEach(({keyframes:e,options:i,currentTime:n,now:s,playState:a})=>{let o=t.animate(e,i);o.currentTime=n}),delete t._pausedAnimations))})})}function Xu(){return typeof document.createElement("div").showPopover=="function"}var gl=[],Ku=["data-csrf","aria-hidden"];function Kc(r,t){let e=new DOMParser().parseFromString(r,"text/html"),i=e.documentElement,n=document.adoptNode(e.body),s=document.adoptNode(e.head);gl=gl.concat(Array.from(document.body.querySelectorAll("script")).map(u=>Zu(th(u.outerHTML,Ku))));let a=()=>{};Af(i),xf(s).finally(()=>{a()}),_f(n,gl);let o=document.body;document.body.replaceWith(n),Alpine.destroyTree(o),t(u=>a=u)}function _f(r,t){r.querySelectorAll("script").forEach(e=>{if(e.hasAttribute("data-navigate-once")){let i=Zu(th(e.outerHTML,Ku));if(t.includes(i))return}e.replaceWith(Yu(e))})}function Af(r){let t=document.documentElement;Array.from(r.attributes).forEach(e=>{const i=e.name,n=e.value;t.getAttribute(i)!==n&&t.setAttribute(i,n)}),Array.from(t.attributes).forEach(e=>{r.hasAttribute(e.name)||t.removeAttribute(e.name)})}function xf(r){let t=Array.from(document.head.children),e=t.map(s=>s.outerHTML),i=document.createDocumentFragment(),n=[];for(let s of Array.from(r.children))if(Jc(s))if(e.includes(s.outerHTML))i.appendChild(s);else if(Ju(s)&&Ef(s,t)&&setTimeout(()=>window.location.reload()),Qu(s))try{n.push(Sf(Yu(s)))}catch{}else document.head.appendChild(s);for(let s of Array.from(document.head.children))Jc(s)||s.remove();for(let s of Array.from(r.children))s.tagName.toLowerCase()!=="noscript"&&document.head.appendChild(s);return Promise.all(n)}async function Sf(r){return new Promise((t,e)=>{r.src?(r.onload=()=>t(),r.onerror=()=>e()):t(),document.head.appendChild(r)})}function Yu(r){let t=document.createElement("script");t.textContent=r.textContent,t.async=r.async;for(let e of r.attributes)t.setAttribute(e.name,e.value);return t}function Ju(r){return r.hasAttribute("data-navigate-track")}function Ef(r,t){let[e,i]=Yc(r);return t.some(n=>{if(!Ju(n))return!1;let[s,a]=Yc(n);if(s===e&&i!==a)return!0})}function Yc(r){return(Qu(r)?r.src:r.href).split("?")}function Jc(r){return r.tagName.toLowerCase()==="link"&&r.getAttribute("rel").toLowerCase()==="stylesheet"||r.tagName.toLowerCase()==="style"||r.tagName.toLowerCase()==="script"}function Qu(r){return r.tagName.toLowerCase()==="script"}function Zu(r){return r.split("").reduce((t,e)=>(t=(t<<5)-t+e.charCodeAt(0),t&t),0)}function th(r,t){let e=r;return t.forEach(i=>{const n=new RegExp(`${i}="[^"]*"|${i}='[^']*'`,"g");e=e.replace(n,"")}),e=e.replaceAll(" ",""),e.trim()}var ml=!0;function Cf(r){r.navigate=e=>{let i=Tr(e);Yn("alpine:navigate",{url:i,history:!1,cached:!1})||t(i)},r.navigate.disableProgressBar=()=>{ml=!1},r.addInitSelector(()=>`[${r.prefixed("navigate")}]`),r.directive("navigate",(e,{modifiers:i})=>{i.includes("hover")&&df(e,60,()=>{let s=Fc(e);s&&Bc(s,(a,o)=>{jc(a,s,o)})}),hf(e,s=>{let a=Fc(e);a&&(Bc(a,(o,u)=>{jc(o,a,u)}),s(()=>{Yn("alpine:navigate",{url:a,history:!1,cached:!1})||t(a)}))})});function t(e,i=!0){ml&&bf(),Tf(e,(n,s)=>{Yn("alpine:navigating"),qc(),ml&&vf(),kf(),af(),Qc(r,a=>{Wc(o=>{Hc(o),Vc(o)}),i?cf(n,s):Wu(s,n),Kc(n,o=>{$c(document.body),Gc((u,d)=>{Uc(u),Xc(u)}),zc(),o(()=>{a(()=>{setTimeout(()=>{}),Zc(r),Yn("alpine:navigated")})})})})})}lf(e=>{e(i=>{let n=Tr(i);if(Yn("alpine:navigate",{url:n,history:!0,cached:!1}))return;t(n,!1)})},(e,i,n,s)=>{let a=Tr(i);Yn("alpine:navigate",{url:a,history:!0,cached:!0})||(qc(),Yn("alpine:navigating"),of(n,s),Qc(r,u=>{Wc(d=>{Hc(d),Vc(d)}),Kc(e,()=>{yf(),$c(document.body),Gc((d,p)=>{Uc(d),Xc(d)}),zc(),u(()=>{Zc(r),Yn("alpine:navigated")})})}))}),setTimeout(()=>{Yn("alpine:navigated")})}function Tf(r,t){pf(r,t,()=>{ff(r,t)})}function Qc(r,t){r.stopObservingMutations(),t(e=>{r.startObservingMutations(),queueMicrotask(()=>{e()})})}function Yn(r,t){let e=new CustomEvent(r,{cancelable:!0,bubbles:!0,detail:t});return document.dispatchEvent(e),e.defaultPrevented}function Zc(r){r.initTree(document.body,void 0,(t,e)=>{t._x_wasPersisted&&e()})}function kf(){let r=function(t,e){Alpine.walk(t,(i,n)=>{mf(i)&&n(),gf(i)?n():e(i,n)})};Alpine.destroyTree(document.body,r)}function Pf(r){r.magic("queryString",(t,{interceptor:e})=>{let i,n=!1,s=!1;return e((a,o,u,d,p)=>{let b=i||d,{initial:y,replace:x,push:A,pop:w}=Ol(b,a,n);return u(y),s?(r.effect(()=>A(o())),w(async T=>{u(T),await Promise.resolve()})):r.effect(()=>x(o())),y},a=>{a.alwaysShow=()=>(n=!0,a),a.usePush=()=>(s=!0,a),a.as=o=>(i=o,a)})}),r.history={track:Ol}}function Ol(r,t,e=!1,i=null){let{has:n,get:s,set:a,remove:o}=Mf(),u=new URL(window.location.href),d=n(u,r),p=d?s(u,r):t,b=JSON.stringify(p),y=[!1,null,void 0].includes(i)?t:JSON.stringify(i),x=E=>JSON.stringify(E)===b,A=E=>JSON.stringify(E)===y;e&&(u=a(u,r,p)),tu(u,r,{value:p});let w=!1,T=(E,R)=>{if(w)return;let M=new URL(window.location.href);!e&&!d&&x(R)||R===void 0||!e&&A(R)?M=o(M,r):M=a(M,r,R),E(M,r,{value:R})};return{initial:p,replace(E){T(tu,E)},push(E){T(Rf,E)},pop(E){let R=M=>{!M.state||!M.state.alpine||Object.entries(M.state.alpine).forEach(([B,{value:U}])=>{if(B!==r)return;w=!0;let z=E(U);z instanceof Promise?z.finally(()=>w=!1):w=!1})};return window.addEventListener("popstate",R),()=>window.removeEventListener("popstate",R)}}}function tu(r,t,e){let i=window.history.state||{};i.alpine||(i.alpine={}),i.alpine[t]=ec(e);try{window.history.replaceState(i,"",r.toString())}catch(n){console.error(n)}}function Rf(r,t,e){let i=window.history.state||{};i.alpine||(i.alpine={}),i={alpine:{...i.alpine,[t]:ec(e)}};try{window.history.pushState(i,"",r.toString())}catch(n){console.error(n)}}function ec(r){if(r!==void 0)return JSON.parse(JSON.stringify(r))}function Mf(){return{has(r,t){let e=r.search;if(!e)return!1;let i=oo(e,t);return Object.keys(i).includes(t)},get(r,t){let e=r.search;return e?oo(e,t)[t]:!1},set(r,t,e){let i=oo(r.search,t);return i[t]=eh(ec(e)),r.search=eu(i),r},remove(r,t){let e=oo(r.search,t);return delete e[t],r.search=eu(e),r}}}function eh(r){if(!Kl(r))return r;for(let t in r)r[t]===null?delete r[t]:r[t]=eh(r[t]);return r}function eu(r){let t=n=>typeof n=="object"&&n!==null,e=(n,s={},a="")=>(Object.entries(n).forEach(([o,u])=>{let d=a===""?o:`${a}[${o}]`;u===null?s[d]="":t(u)?s={...s,...e(u,s,d)}:s[d]=encodeURIComponent(u).replaceAll("%20","+").replaceAll("%2C",",")}),s),i=e(r);return Object.entries(i).map(([n,s])=>`${n}=${s}`).join("&")}function oo(r,t){if(r=r.replace("?",""),r==="")return{};let e=(s,a,o)=>{let[u,d,...p]=s.split(".");if(!d)return o[s]=a;o[u]===void 0&&(o[u]=isNaN(d)?{}:[]),e([d,...p].join("."),a,o[u])},i=r.split("&").map(s=>s.split("=")),n=Object.create(null);return i.forEach(([s,a])=>{if(typeof a>"u")return;a=decodeURIComponent(a.replaceAll("+","%20"));let o=decodeURIComponent(s);if(!(o.includes("[")&&o.startsWith(t)))n[s]=a;else{let d=o.replaceAll("[",".").replaceAll("]","");e(d,a,n)}}),n}var Df=Ie(fd()),Of=Ie(pd()),pi=Ie(si());function Lf(){setTimeout(()=>If()),ul(document,"livewire:init"),ul(document,"livewire:initializing"),pi.default.plugin(Df.default),pi.default.plugin(Pf),pi.default.plugin(nf.default),pi.default.plugin(sf.default),pi.default.plugin(Zd.default),pi.default.plugin(rf.default),pi.default.plugin(tf.default),pi.default.plugin(ef.default),pi.default.plugin(Cf),pi.default.plugin(Of.default),pi.default.addRootSelector(()=>"[wire\\:id]"),pi.default.onAttributesAdded((r,t)=>{if(!Array.from(t).some(i=>oa(i.name)))return;let e=is(r,!1);e&&t.forEach(i=>{if(!oa(i.name))return;let n=Pl(r,i.name);Ke("directive.init",{el:r,component:e,directive:n,cleanup:s=>{pi.default.onAttributeRemoved(r,n.raw,s)}})})}),pi.default.interceptInit(pi.default.skipDuringClone(r=>{if(!Array.from(r.attributes).some(i=>oa(i.name)))return;if(r.hasAttribute("wire:id")){let i=jd(r);pi.default.onAttributeRemoved(r,"wire:id",()=>{Hd(i.id)})}let t=Array.from(r.getAttributeNames()).filter(i=>oa(i)).map(i=>Pl(r,i));t.forEach(i=>{Ke("directive.global.init",{el:r,directive:i,cleanup:n=>{pi.default.onAttributeRemoved(r,i.raw,n)}})});let e=is(r,!1);e&&(Ke("element.init",{el:r,component:e}),t.forEach(i=>{Ke("directive.init",{el:r,component:e,directive:i,cleanup:n=>{pi.default.onAttributeRemoved(r,i.raw,n)}})}))})),pi.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),ul(document,"livewire:initialized")}function If(){let r=document.querySelector("script[data-update-uri][data-csrf]");if(!r)return;let t=r.closest("[wire\\:id]");t&&console.warn("Livewire: missing closing tags found. Ensure your template elements contain matching closing tags.",t)}var ic=Ie(si());ke("effect",({component:r,effects:t})=>{Nf(r,t.listeners||[])});function Nf(r,t){t.forEach(e=>{let i=n=>{n.__livewire&&n.__livewire.receivedBy.push(r),r.$wire.call("__dispatch",e,n.detail||{})};window.addEventListener(e,i),r.addCleanup(()=>window.removeEventListener(e,i)),r.el.addEventListener(e,n=>{n.__livewire&&(n.bubbles||(n.__livewire&&n.__livewire.receivedBy.push(r.id),r.$wire.call("__dispatch",e,n.detail||{})))})})}var iu=Ie(si()),mr=new WeakMap,wo=new Set;ke("payload.intercept",async({assets:r})=>{if(r)for(let[t,e]of Object.entries(r))await jf(t,async()=>{await Hf(e)})});ke("component.init",({component:r})=>{let t=r.snapshot.memo.assets;t&&t.forEach(e=>{wo.has(e)||wo.add(e)})});ke("effect",({component:r,effects:t})=>{let e=t.scripts;e&&Object.entries(e).forEach(([i,n])=>{Ff(r,i,()=>{let s=Bf(n);iu.default.dontAutoEvaluateFunctions(()=>{iu.default.evaluate(r.el,s,{$wire:r.$wire,$js:r.$wire.$js})})})})});function Ff(r,t,e){if(mr.has(r)&&mr.get(r).includes(t))return;e(),mr.has(r)||mr.set(r,[]);let i=mr.get(r);i.push(t),mr.set(r,i)}function Bf(r){let e=/<script\b[^>]*>([\s\S]*?)<\/script>/gm.exec(r);return e&&e[1]?e[1].trim():""}async function jf(r,t){wo.has(r)||(await t(),wo.add(r))}async function Hf(r){let t=new DOMParser().parseFromString(r,"text/html"),e=document.adoptNode(t.head);for(let i of e.children)try{await $f(i)}catch{}}async function $f(r){return new Promise((t,e)=>{if(Uf(r)){let i=qf(r);i.src?(i.onload=()=>t(),i.onerror=()=>e()):t(),document.head.appendChild(i)}else document.head.appendChild(r),t()})}function Uf(r){return r.tagName.toLowerCase()==="script"}function qf(r){let t=document.createElement("script");t.textContent=r.textContent,t.async=r.async;for(let e of r.attributes)t.setAttribute(e.name,e.value);return t}var Ll=Ie(si());Ll.default.magic("js",r=>is(r).$wire.js);ke("effect",({component:r,effects:t})=>{let e=t.js,i=t.xjs;e&&Object.entries(e).forEach(([n,s])=>{Fd(r,n,()=>{Ll.default.evaluate(r.el,s)})}),i&&i.forEach(({expression:n,params:s})=>{s=Object.values(s),Ll.default.evaluate(r.el,n,{scope:r.jsActions,params:s})})});var zf=Ie(si());function Wf(r,t,e){let i=t.parentElement?t.parentElement.tagName.toLowerCase():"div",n=document.createElement(i);n.innerHTML=e;let s;try{s=is(t.parentElement)}catch{}s&&(n.__livewire=s);let a=n.firstElementChild;a.__livewire=r,Ke("morph",{el:t,toEl:a,component:r}),zf.default.morph(t,a,{updating:(o,u,d,p,b)=>{if(!br(o)){if(Ke("morph.updating",{el:o,toEl:u,component:r,skip:p,childrenOnly:d,skipChildren:b}),o.__livewire_replace===!0&&(o.innerHTML=u.innerHTML),o.__livewire_replace_self===!0)return o.outerHTML=u.outerHTML,p();if(o.__livewire_ignore===!0)return p();if(o.__livewire_ignore_self===!0&&d(),o.__livewire_ignore_children===!0)return b();if(nu(o)&&o.getAttribute("wire:id")!==r.id)return p();nu(o)&&(u.__livewire=r)}},updated:o=>{br(o)||Ke("morph.updated",{el:o,component:r})},removing:(o,u)=>{br(o)||Ke("morph.removing",{el:o,component:r,skip:u})},removed:o=>{br(o)||Ke("morph.removed",{el:o,component:r})},adding:o=>{Ke("morph.adding",{el:o,component:r})},added:o=>{br(o)||(is(o).id,Ke("morph.added",{el:o}))},key:o=>{if(!br(o))return o.hasAttribute("wire:key")?o.getAttribute("wire:key"):o.hasAttribute("wire:id")?o.getAttribute("wire:id"):o.id},lookahead:!1}),Ke("morphed",{el:t,component:r})}function br(r){return typeof r.hasAttribute!="function"}function nu(r){return r.hasAttribute("wire:id")}ke("effect",({component:r,effects:t})=>{let e=t.html;e&&queueMicrotask(()=>{queueMicrotask(()=>{Wf(r,r.el,e)})})});ke("effect",({component:r,effects:t})=>{Gf(r,t.dispatches||[])});function Gf(r,t){t.forEach(({name:e,params:i={},self:n=!1,to:s})=>{n?xr(r,e,i):s?Ql(s,e,i):zu(r,e,i)})}var Vf=Ie(si()),Il=new gd;ke("directive.init",({el:r,directive:t,cleanup:e,component:i})=>setTimeout(()=>{t.value==="submit"&&r.addEventListener("submit",()=>{let n=t.expression.startsWith("$parent")?i.parent.id:i.id,s=Xf(r);Il.add(n,s)})}));ke("commit",({component:r,respond:t})=>{t(()=>{Il.each(r.id,e=>e()),Il.remove(r.id)})});function Xf(r){let t=[];return Vf.default.walk(r,(e,i)=>{if(r.contains(e)){if(e.hasAttribute("wire:ignore"))return i();Kf(e)?t.push(Jf(e)):Yf(e)&&t.push(Qf(e))}}),()=>{for(;t.length>0;)t.shift()()}}function Kf(r){let t=r.tagName.toLowerCase();return t==="select"||t==="button"&&r.type==="submit"||t==="input"&&(r.type==="checkbox"||r.type==="radio")}function Yf(r){return["input","textarea"].includes(r.tagName.toLowerCase())}function Jf(r){let t=r.disabled?()=>{}:()=>r.disabled=!1;return r.disabled=!0,t}function Qf(r){let t=r.readOnly?()=>{}:()=>r.readOnly=!1;return r.readOnly=!0,t}ke("commit.pooling",({commits:r})=>{r.forEach(t=>{let e=t.component;ih(e,i=>{i.$wire.$commit()})})});ke("commit.pooled",({pools:r})=>{Zf(r).forEach(e=>{let i=e.component;ih(i,n=>{tp(r,i,n)})})});function Zf(r){let t=[];return r.forEach(e=>{e.commits.forEach(i=>{t.push(i)})}),t}function tp(r,t,e){let i=su(r,t),n=su(r,e),s=n.findCommitByComponent(e);n.delete(s),i.add(s),r.forEach(a=>{a.empty()&&r.delete(a)})}function su(r,t){for(let[e,i]of r.entries())if(i.hasCommitFor(t))return i}function ih(r,t){nh(r,e=>{(ep(e)||ip(e))&&t(e)})}function ep(r){return!!r.snapshot.memo.props}function ip(r){return!!r.snapshot.memo.bindings}function nh(r,t){r.children.forEach(e=>{t(e),nh(e,t)})}ke("commit",({succeed:r})=>{r(({effects:t})=>{let e=t.download;if(!e)return;let i=window.webkitURL||window.URL,n=i.createObjectURL(np(e.content,e.contentType)),s=document.createElement("a");s.style.display="none",s.href=n,s.download=e.name,document.body.appendChild(s),s.click(),setTimeout(function(){i.revokeObjectURL(n)},0)})});function np(r,t="",e=512){const i=atob(r),n=[];t===null&&(t="");for(let s=0;s<i.length;s+=e){let a=i.slice(s,s+e),o=new Array(a.length);for(let d=0;d<a.length;d++)o[d]=a.charCodeAt(d);let u=new Uint8Array(o);n.push(u)}return new Blob(n,{type:t})}var Nl=new WeakSet,Fl=new WeakSet;ke("component.init",({component:r})=>{let t=r.snapshot.memo;t.lazyLoaded!==void 0&&(Fl.add(r),t.lazyIsolated!==void 0&&t.lazyIsolated===!1&&Nl.add(r))});ke("commit.pooling",({commits:r})=>{r.forEach(t=>{Fl.has(t.component)&&(Nl.has(t.component)?(t.isolate=!1,Nl.delete(t.component)):t.isolate=!0,Fl.delete(t.component))})});var ru=Ie(si());ke("effect",({component:r,effects:t,cleanup:e})=>{let i=t.url;i&&Object.entries(i).forEach(([n,s])=>{let{name:a,as:o,use:u,alwaysShow:d,except:p}=sp(n,s);o||(o=a);let b=[!1,null,void 0].includes(p)?ts(r.ephemeral,a):p,{replace:y,push:x,pop:A}=Ol(o,b,d,p);if(u==="replace"){let w=ru.default.effect(()=>{y(ts(r.reactive,a))});e(()=>ru.default.release(w))}else if(u==="push"){let w=ke("commit",({component:E,succeed:R})=>{if(r!==E)return;let M=ts(r.canonical,a);R(()=>{let B=ts(r.canonical,a);JSON.stringify(M)!==JSON.stringify(B)&&x(B)})}),T=A(async E=>{await r.$wire.set(a,E),document.querySelectorAll("input").forEach(R=>{R._x_forceModelUpdate&&R._x_forceModelUpdate(R._x_model.get())})});e(()=>{w(),T()})}})});function sp(r,t){let e={use:"replace",alwaysShow:!1};return typeof t=="string"?{...e,name:t,as:t}:{...{...e,name:r,as:r},...t}}ke("request",({options:r})=>{window.Echo&&(r.headers["X-Socket-ID"]=window.Echo.socketId())});ke("effect",({component:r,effects:t})=>{(t.listeners||[]).forEach(i=>{if(i.startsWith("echo")){if(typeof window.Echo>"u"){console.warn("Laravel Echo cannot be found");return}let n=i.split(/(echo:|echo-)|:|,/);n[1]=="echo:"&&n.splice(2,0,"channel",void 0),n[2]=="notification"&&n.push(void 0,void 0);let[s,a,o,u,d,p,b]=n;if(["channel","private","encryptedPrivate"].includes(o)){let y=x=>xr(r,i,[x]);window.Echo[o](d).listen(b,y),r.addCleanup(()=>{window.Echo[o](d).stopListening(b,y)})}else if(o=="presence")if(["here","joining","leaving"].includes(b))window.Echo.join(d)[b](y=>{xr(r,i,[y])});else{let y=x=>xr(r,i,[x]);window.Echo.join(d).listen(b,y),r.addCleanup(()=>{window.Echo.leaveChannel(d)})}else o=="notification"?window.Echo.private(d).notification(y=>{xr(r,i,[y])}):console.warn("Echo channel type not yet supported")}})});var sh=new WeakSet;ke("component.init",({component:r})=>{r.snapshot.memo.isolate===!0&&sh.add(r)});ke("commit.pooling",({commits:r})=>{r.forEach(t=>{sh.has(t.component)&&(t.isolate=!0)})});ap()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigate",r=>nc("livewire:navigate",r));document.addEventListener("alpine:navigating",r=>nc("livewire:navigating",r));document.addEventListener("alpine:navigated",r=>nc("livewire:navigated",r));function nc(r,t){let e=new CustomEvent(r,{cancelable:!0,bubbles:!0,detail:t.detail});document.dispatchEvent(e),e.defaultPrevented&&t.preventDefault()}function rp(r,t,e){r.redirectUsingNavigate?Alpine.navigate(t):e()}function ap(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}ke("effect",({effects:r})=>{if(!r.redirect)return;let t=r.redirect;rp(r,t,()=>{window.location.href=t})});var bl=Ie(si());ke("morph.added",({el:r})=>{r.__addedByMorph=!0});cn("transition",({el:r,directive:t,component:e,cleanup:i})=>{for(let a=0;a<r.attributes.length;a++)if(r.attributes[a].name.startsWith("wire:show")){bl.default.bind(r,{[t.rawName.replace("wire:transition","x-transition")]:t.expression});return}let n=bl.default.reactive({state:!r.__addedByMorph});bl.default.bind(r,{[t.rawName.replace("wire:","x-")]:"","x-show"(){return n.state}}),r.__addedByMorph&&setTimeout(()=>n.state=!0);let s=[];s.push(ke("morph.removing",({el:a,skip:o})=>{o(),a.addEventListener("transitionend",()=>{a.remove()}),n.state=!1,s.push(ke("morph",({component:u})=>{u===e&&(a.remove(),s.forEach(d=>d()))}))})),i(()=>s.forEach(a=>a()))});var op=new Mu;function lp(r,t){op.each(r,e=>{e.callback(),e.callback=()=>{}}),t()}var au=Ie(si());ke("directive.init",({el:r,directive:t,cleanup:e,component:i})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(t.value)||Yd(t.value))return;let n=t.rawName.replace("wire:","x-on:");t.value==="submit"&&!t.modifiers.includes("prevent")&&(n=n+".prevent");let s=au.default.bind(r,{[n](a){let o=()=>{lp(i,()=>{au.default.evaluate(r,"$wire."+t.expression,{scope:{$event:a}})})};r.__livewire_confirm?r.__livewire_confirm(()=>{o()},()=>{a.stopImmediatePropagation()}):o()}});e(s)});var Sr=Ie(si());Sr.default.addInitSelector(()=>"[wire\\:navigate]");Sr.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");Sr.default.interceptInit(Sr.default.skipDuringClone(r=>{r.hasAttribute("wire:navigate")?Sr.default.bind(r,{"x-navigate":!0}):r.hasAttribute("wire:navigate.hover")&&Sr.default.bind(r,{"x-navigate.hover":!0})}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(r=>{r.inscribeSnapshotAndEffectsOnElement()})});cn("confirm",({el:r,directive:t})=>{let e=t.expression,i=t.modifiers.includes("prompt");e=e.replaceAll("\\n",`
`),e===""&&(e="Are you sure?"),r.__livewire_confirm=(n,s)=>{if(i){let[a,o]=e.split("|");o?prompt(a)===o?n():s():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(e)?n():s()}});var cp=Ie(si());cp.default.addInitSelector(()=>"[wire\\:current]");var Bl=new Map;document.addEventListener("livewire:navigated",()=>{Bl.forEach(r=>r(new URL(window.location.href)))});Kd("current",({el:r,directive:t,cleanup:e})=>{let i=t.expression,n={exact:t.modifiers.includes("exact"),strict:t.modifiers.includes("strict")};if(i.startsWith("#")||!r.hasAttribute("href"))return;let s=r.getAttribute("href"),a=new URL(s,window.location.href),o=i.split(" ").filter(String),u=d=>{up(a,d,n)?(r.classList.add(...o),r.setAttribute("data-current","")):(r.classList.remove(...o),r.removeAttribute("data-current"))};u(new URL(window.location.href)),Bl.set(r,u),e(()=>Bl.delete(r))});function up(r,t,e){if(r.hostname!==t.hostname)return!1;let i=e.strict?r.pathname:r.pathname.replace(/\/+$/,""),n=e.strict?t.pathname:t.pathname.replace(/\/+$/,"");if(e.exact)return i===n;let s=i.split("/"),a=n.split("/");for(let o=0;o<s.length;o++)if(s[o]!==a[o])return!1;return!0}function Is(r,t,e,i=null){if(e=t.modifiers.includes("remove")?!e:e,t.modifiers.includes("class")){let n=t.expression.split(" ").filter(String);e?r.classList.add(...n):r.classList.remove(...n)}else if(t.modifiers.includes("attr"))e?r.setAttribute(t.expression,!0):r.removeAttribute(t.expression);else{let n=i??window.getComputedStyle(r,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(a=>t.modifiers.includes(a))[0]||"inline-block";s=t.modifiers.includes("remove")&&!e?n:s,r.style.display=e?s:"none"}}var jl=new Set,Hl=new Set;window.addEventListener("offline",()=>jl.forEach(r=>r()));window.addEventListener("online",()=>Hl.forEach(r=>r()));cn("offline",({el:r,directive:t,cleanup:e})=>{let i=()=>Is(r,t,!0),n=()=>Is(r,t,!1);jl.add(i),Hl.add(n),e(()=>{jl.delete(i),Hl.delete(n)})});cn("loading",({el:r,directive:t,component:e,cleanup:i})=>{let{targets:n,inverted:s}=gp(r),[a,o]=hp(t),u=dp(e,n,s,[()=>a(()=>Is(r,t,!0)),()=>o(()=>Is(r,t,!1))]),d=fp(e,n,[()=>a(()=>Is(r,t,!0)),()=>o(()=>Is(r,t,!1))]);i(()=>{u(),d()})});function hp(r){if(!r.modifiers.includes("delay")||r.modifiers.includes("none"))return[s=>s(),s=>s()];let t=200,e={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(e).some(s=>{if(r.modifiers.includes(s))return t=e[s],!0});let i,n=!1;return[s=>{i=setTimeout(()=>{s(),n=!0},t)},async s=>{n?(await s(),n=!1):clearTimeout(i)}]}function dp(r,t,e,[i,n]){return ke("commit",({component:s,commit:a,respond:o})=>{s===r&&(t.length>0&&pp(a,t)===e||(i(),o(()=>{n()})))})}function fp(r,t,[e,i]){let n=u=>{let{id:d,property:p}=u.detail;return d!==r.id||t.length>0&&!t.map(b=>b.target).includes(p)},s=hl(window,"livewire-upload-start",u=>{n(u)||e()}),a=hl(window,"livewire-upload-finish",u=>{n(u)||i()}),o=hl(window,"livewire-upload-error",u=>{n(u)||i()});return()=>{s(),a(),o()}}function pp(r,t){let{updates:e,calls:i}=r;return t.some(({target:n,params:s})=>{if(s)return i.some(({method:o,params:u})=>n===o&&s===rh(JSON.stringify(u)));if(Object.keys(e).some(o=>o.includes(".")&&o.split(".")[0]===n?!0:o===n)||i.map(o=>o.method).includes(n))return!0})}function gp(r){let t=Zl(r),e=[],i=!1;if(t.has("target")){let n=t.get("target"),s=n.expression;n.modifiers.includes("except")&&(i=!0),s.includes("(")&&s.includes(")")?e.push({target:n.method,params:rh(JSON.stringify(n.params))}):s.includes(",")?s.split(",").map(a=>a.trim()).forEach(a=>{e.push({target:a})}):e.push({target:s})}else{let n=["init","dirty","offline","target","loading","poll","ignore","key","id"];t.all().filter(s=>!n.includes(s.value)).map(s=>s.expression.split("(")[0]).forEach(s=>e.push({target:s}))}return{targets:e,inverted:i}}function rh(r){return btoa(encodeURIComponent(r))}cn("stream",({el:r,directive:t,cleanup:e})=>{let{expression:i,modifiers:n}=t,s=ke("stream",({name:a,content:o,replace:u})=>{a===i&&(n.includes("replace")||u?r.innerHTML=o:r.innerHTML=r.innerHTML+o)});e(s)});ke("request",({respond:r})=>{r(t=>{let e=t.response;e.headers.has("X-Livewire-Stream")&&(t.response={ok:!0,redirected:!1,status:200,async text(){let i=await mp(e,n=>{Ke("stream",n)});return Lu(i)&&(this.ok=!1),i}})})});async function mp(r,t){let e=r.body.getReader(),i="";for(;;){let{done:n,value:s}=await e.read(),o=new TextDecoder().decode(s),[u,d]=bp(i+o);if(u.forEach(p=>{t(p)}),i=d,n)return i}}function bp(r){let t=/({"stream":true.*?"endStream":true})/g,e=r.match(t),i=[];if(e)for(let s=0;s<e.length;s++)i.push(JSON.parse(e[s]).body);let n=r.replace(t,"");return[i,n]}cn("replace",({el:r,directive:t})=>{t.modifiers.includes("self")?r.__livewire_replace_self=!0:r.__livewire_replace=!0});cn("ignore",({el:r,directive:t})=>{t.modifiers.includes("self")?r.__livewire_ignore_self=!0:t.modifiers.includes("children")?r.__livewire_ignore_children=!0:r.__livewire_ignore=!0});var ou=Ie(si());ou.default.interceptInit(r=>{r.hasAttribute("wire:cloak")&&ou.default.mutateDom(()=>r.removeAttribute("wire:cloak"))});var ah=new Mu;ke("commit",({component:r,respond:t})=>{t(()=>{setTimeout(()=>{ah.each(r,e=>e(!1))})})});cn("dirty",({el:r,directive:t,component:e})=>{let i=vp(r),n=!1,s=r.style.display,a=o=>{Is(r,t,o,s),n=o};ah.add(e,a),Alpine.effect(()=>{let o=!1;if(i.length===0)o=JSON.stringify(e.canonical)!==JSON.stringify(e.reactive);else for(let u=0;u<i.length&&!o;u++){let d=i[u];o=JSON.stringify(ts(e.canonical,d))!==JSON.stringify(ts(e.reactive,d))}n!==o&&a(o),n=o})});function vp(r){let t=Zl(r),e=[];return t.has("model")&&e.push(t.get("model").expression),t.has("target")&&(e=e.concat(t.get("target").expression.split(",").map(i=>i.trim()))),e}var yp=Ie(si());cn("model",({el:r,directive:t,component:e,cleanup:i})=>{let{expression:n,modifiers:s}=t;if(!n)return console.warn("Livewire: [wire:model] is missing a value.",r);if(oh(e,n))return console.warn('Livewire: [wire:model="'+n+'"] property does not exist on component: ['+e.name+"]",r);if(r.type&&r.type.toLowerCase()==="file")return yd(r,n,e,i);let a=s.includes("live"),o=s.includes("lazy")||s.includes("change"),u=s.includes("blur"),d=s.includes("debounce"),p=n.startsWith("$parent")?()=>e.$wire.$parent.$commit():()=>e.$wire.$commit(),b=_p(r)&&!d&&a?Ap(p,150):p;yp.default.bind(r,{"@change"(){o&&p()},"@blur"(){u&&p()},["x-model"+wp(s)](){return{get(){return ts(e.$wire,n)},set(y){Co(e.$wire,n,y),a&&!o&&!u&&b()}}}})});function wp(r){return r=r.filter(t=>!["lazy","defer"].includes(t)),r.length===0?"":"."+r.join(".")}function _p(r){return["INPUT","TEXTAREA"].includes(r.tagName.toUpperCase())&&!["checkbox","radio"].includes(r.type)}function oh(r,t){if(t.startsWith("$parent")){let i=is(r.el.parentElement,!1);return i?oh(i,t.split("$parent.")[1]):!0}let e=t.split(".")[0];return!Object.keys(r.canonical).includes(e)}function Ap(r,t){var e;return function(){var i=this,n=arguments,s=function(){e=null,r.apply(i,n)};clearTimeout(e),e=setTimeout(s,t)}}var xp=Ie(si());cn("init",({el:r,directive:t})=>{let e=t.expression??"$refresh";xp.default.evaluate(r,`$wire.${e}`)});var Sp=Ie(si());cn("poll",({el:r,directive:t})=>{let e=Ip(t.modifiers,2e3),{start:i,pauseWhile:n,throttleWhile:s,stopWhen:a}=Cp(()=>{Ep(r,t)},e);i(),s(()=>Pp()&&Mp(t)),n(()=>Dp(t)&&Op(r)),n(()=>Rp(r)),n(()=>kp()),a(()=>Lp(r))});function Ep(r,t){Sp.default.evaluate(r,t.expression?"$wire."+t.expression:"$wire.$commit()")}function Cp(r,t=2e3){let e=[],i=[],n=[];return{start(){let s=Tp(t,()=>{if(n.some(a=>a()))return s();e.some(a=>a())||i.some(a=>a())&&Math.random()<.95||r()})},pauseWhile(s){e.push(s)},throttleWhile(s){i.push(s)},stopWhen(s){n.push(s)}}}var Ds=[];function Tp(r,t){if(!Ds[r]){let e={timer:setInterval(()=>e.callbacks.forEach(i=>i()),r),callbacks:new Set};Ds[r]=e}return Ds[r].callbacks.add(t),()=>{Ds[r].callbacks.delete(t),Ds[r].callbacks.size===0&&(clearInterval(Ds[r].timer),delete Ds[r])}}var sc=!1;window.addEventListener("offline",()=>sc=!0);window.addEventListener("online",()=>sc=!1);function kp(){return sc}var lh=!1;document.addEventListener("visibilitychange",()=>{lh=document.hidden},!1);function Pp(){return lh}function Rp(r){return!Zl(r).has("poll")}function Mp(r){return!r.modifiers.includes("keep-alive")}function Dp(r){return r.modifiers.includes("visible")}function Op(r){let t=r.getBoundingClientRect();return!(t.top<(window.innerHeight||document.documentElement.clientHeight)&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.bottom>0&&t.right>0)}function Lp(r){return r.isConnected===!1}function Ip(r,t){let e,i=r.find(s=>s.match(/([0-9]+)ms/)),n=r.find(s=>s.match(/([0-9]+)s/));return i?e=Number(i.replace("ms","")):n&&(e=Number(n.replace("s",""))*1e3),e||t}var vl=Ie(si());vl.default.interceptInit(r=>{for(let t=0;t<r.attributes.length;t++)if(r.attributes[t].name.startsWith("wire:show")){let{name:e,value:i}=r.attributes[t],n=e.split("wire:show")[1],s=i.startsWith("!")?"!$wire."+i.slice(1).trim():"$wire."+i.trim();vl.default.bind(r,{["x-show"+n](){return vl.default.evaluate(r,s)}})}});var yl=Ie(si());yl.default.interceptInit(r=>{for(let t=0;t<r.attributes.length;t++)if(r.attributes[t].name.startsWith("wire:text")){let{name:e,value:i}=r.attributes[t],n=e.split("wire:text")[1],s=i.startsWith("!")?"!$wire."+i.slice(1).trim():"$wire."+i.trim();yl.default.bind(r,{["x-text"+n](){return yl.default.evaluate(r,s)}})}});var rc={directive:cn,dispatchTo:Ql,start:Lf,first:zd,find:qd,getByName:Ud,all:Wd,hook:ke,trigger:Ke,triggerAsync:Nu,dispatch:Gd,on:Xd,get navigate(){return ic.default.navigate}},ac=r=>console.warn(`Detected multiple instances of ${r} running`);window.Livewire&&ac("Livewire");window.Alpine&&ac("Alpine");window.Livewire=rc;window.Alpine=ic.default;window.livewireScriptConfig===void 0&&(window.Alpine.__fromLivewire=!0,document.addEventListener("DOMContentLoaded",()=>{window.Alpine.__fromLivewire===void 0&&ac("Alpine"),rc.start()}));var Np=ic.default;/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT *//*! Bundled license information:

tabbable/dist/index.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/const Ii=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$l=[.001,0,0,.001,0,0],wl=1.35,Ji={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Zn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ch="pdfjs_internal_editor_",ce={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},uh={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ei={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},da={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ti={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},wr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},wa={ERRORS:0,WARNINGS:1,INFOS:5},Rr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},lo={moveTo:0,lineTo:1,curveTo:2,closePath:3},hh={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ro=wa.WARNINGS;function Fp(r){Number.isInteger(r)&&(Ro=r)}function Bp(){return Ro}function Mo(r){Ro>=wa.INFOS&&console.log(`Info: ${r}`)}function he(r){Ro>=wa.WARNINGS&&console.log(`Warning: ${r}`)}function je(r){throw new Error(r)}function ci(r,t){r||je(t)}function jp(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function oc(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=zp(r)}catch{}const i=t?URL.parse(r,t):URL.parse(r);return jp(i)?i:null}function lc(r,t,e=!1){const i=URL.parse(r);return i?(i.hash=t,i.href):e&&oc(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ve(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const qs=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class lu extends qs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class _l extends qs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class _o extends qs{constructor(t){super(t,"InvalidPDFException")}}class ga extends qs{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class Hp extends qs{constructor(t){super(t,"FormatError")}}class ns extends qs{constructor(t){super(t,"AbortException")}}function dh(r){(typeof r!="object"||r?.length===void 0)&&je("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const i=[];for(let n=0;n<t;n+=e){const s=Math.min(n+e,t),a=r.subarray(n,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function _a(r){typeof r!="string"&&je("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function $p(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function Up(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function qp(){try{return new Function(""),!0}catch{return!1}}class vi{static get isLittleEndian(){return ve(this,"isLittleEndian",Up())}static get isEvalSupported(){return ve(this,"isEvalSupported",qp())}static get isOffscreenCanvasSupported(){return ve(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ve(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ve(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return ve(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Al=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class Nt{static makeHexColor(t,e,i){return`#${Al[t]}${Al[e]}${Al[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const n=t[i],s=t[i+1];t[i]=n*e[0]+s*e[2]+e[4],t[i+1]=n*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const n=e[0],s=e[1],a=e[2],o=e[3],u=e[4],d=e[5];for(let p=0;p<6;p+=2){const b=t[i+p],y=t[i+p+1];t[i+p]=b*n+y*a+u,t[i+p+1]=b*s+y*o+d}}static applyInverseTransform(t,e){const i=t[0],n=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-i*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,i){const n=e[0],s=e[1],a=e[2],o=e[3],u=e[4],d=e[5],p=t[0],b=t[1],y=t[2],x=t[3];let A=n*p+u,w=A,T=n*y+u,E=T,R=o*b+d,M=R,B=o*x+d,U=B;if(s!==0||a!==0){const z=s*p,f=s*y,H=a*b,V=a*x;A+=H,E+=H,T+=V,w+=V,R+=z,U+=z,B+=f,M+=f}i[0]=Math.min(i[0],A,T,w,E),i[1]=Math.min(i[1],R,B,M,U),i[2]=Math.max(i[2],A,T,w,E),i[3]=Math.max(i[3],R,B,M,U)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],n=t[1],s=t[2],a=t[3],o=i**2+n**2,u=i*s+n*a,d=s**2+a**2,p=(o+d)/2,b=Math.sqrt(p**2-(o*d-u**2));e[0]=Math.sqrt(p+b||1),e[1]=Math.sqrt(p-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>a?null:[i,s,n,a]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,n,s){s[0]=Math.min(s[0],t,i),s[1]=Math.min(s[1],e,n),s[2]=Math.max(s[2],t,i),s[3]=Math.max(s[3],e,n)}static#t(t,e,i,n,s,a,o,u,d,p){if(d<=0||d>=1)return;const b=1-d,y=d*d,x=y*d,A=b*(b*(b*t+3*d*e)+3*y*i)+x*n,w=b*(b*(b*s+3*d*a)+3*y*o)+x*u;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],w)}static#e(t,e,i,n,s,a,o,u,d,p,b,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,i,n,s,a,o,u,-b/p,y);return}const x=p**2-4*b*d;if(x<0)return;const A=Math.sqrt(x),w=2*d;this.#t(t,e,i,n,s,a,o,u,(-p+A)/w,y),this.#t(t,e,i,n,s,a,o,u,(-p-A)/w,y)}static bezierBoundingBox(t,e,i,n,s,a,o,u,d){d[0]=Math.min(d[0],t,o),d[1]=Math.min(d[1],e,u),d[2]=Math.max(d[2],t,o),d[3]=Math.max(d[3],e,u),this.#e(t,i,s,o,e,n,a,u,3*(-t+3*(i-s)+o),6*(t-2*i+s),3*(i-t),d),this.#e(t,i,s,o,e,n,a,u,3*(-e+3*(n-a)+u),6*(e-2*n+a),3*(n-e),d)}}function zp(r){return decodeURIComponent(escape(r))}let xl=null,cu=null;function fh(r){return xl||(xl=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,cu=new Map([["ï¬","Å¿t"]])),r.replaceAll(xl,(t,e,i)=>e?e.normalize("NFKC"):cu.get(i))}function cc(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),dh(r)}const uc="pdfjs_internal_id_";function Wp(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,n,...s]=e;if(!r(i)&&!Number.isInteger(i)||!t(n))return!1;const a=s.length;let o=!0;switch(n.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const u of s)if(!(typeof u=="number"||o&&u===null))return!1;return!0}function Mi(r,t,e){return Math.min(Math.max(r,t),e)}function ph(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(dh(r))}function Gp(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):_a(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});const Jn="http://www.w3.org/2000/svg";class $s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Dr(r,t="text"){if(la(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class Aa{constructor({viewBox:t,userUnit:e,scale:i,rotation:n,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=a,i*=e;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,b,y,x;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,b=0,y=0,x=1;break;case 90:p=0,b=1,y=1,x=0;break;case 270:p=0,b=-1,y=-1,x=0;break;case 0:p=1,b=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(y=-y,x=-x);let A,w,T,E;p===0?(A=Math.abs(d-t[1])*i+s,w=Math.abs(u-t[0])*i+a,T=(t[3]-t[1])*i,E=(t[2]-t[0])*i):(A=Math.abs(u-t[0])*i+s,w=Math.abs(d-t[1])*i+a,T=(t[2]-t[0])*i,E=(t[3]-t[1])*i),this.transform=[p*i,b*i,y*i,x*i,A-p*i*u-y*i*d,w-b*i*u-x*i*d],this.width=T,this.height=E}get rawDims(){const t=this.viewBox;return ve(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new Aa({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){const i=[t,e];return Nt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Nt.applyTransform(e,this.transform);const i=[t[2],t[3]];return Nt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Nt.applyInverseTransform(i,this.transform),i}}class Do extends qs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function xa(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function Oo(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function gh(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function mh(r,t="document.pdf"){if(typeof r!="string")return t;if(xa(r))return he('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;const n=o=>{try{let u=decodeURIComponent(o);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:o):u}catch{return o}},s=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(s.test(a))return n(a);if(i.searchParams.size>0){const o=Array.from(i.searchParams.values()).reverse();for(const d of o)if(s.test(d))return n(d);const u=Array.from(i.searchParams.keys()).reverse();for(const d of u)if(s.test(d))return n(d)}if(i.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(u)return n(u[0])}return t}class uu{started=Object.create(null);times=[];time(t){t in this.started&&he(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||he(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms
`);return t.join("")}}function la(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function tn(r){r.preventDefault()}function ii(r){r.preventDefault(),r.stopPropagation()}function Vp(r){console.log("Deprecated API usage: "+r)}class Ao{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,d==="-"?(a+=p,o+=b):d==="+"&&(a-=p,o-=b),new Date(Date.UTC(i,n,s,a,o,u))}}function bh(r,{scale:t=1,rotation:e=0}){const{width:i,height:n}=r.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new Aa({viewBox:s,userUnit:1,scale:t,rotation:e})}function Sa(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(he(`Not a valid color format: "${r}"`),[0,0,0])}function Xp(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;r.set(e,Sa(i))}t.remove()}function Je(r){const{a:t,b:e,c:i,d:n,e:s,f:a}=r.getTransform();return[t,e,i,n,s,a]}function In(r){const{a:t,b:e,c:i,d:n,e:s,f:a}=r.getTransform().invertSelf();return[t,e,i,n,s,a]}function cs(r,t,e=!1,i=!0){if(t instanceof Aa){const{pageWidth:n,pageHeight:s}=t.rawDims,{style:a}=r,o=vi.isCSSRoundSupported,u=`var(--total-scale-factor) * ${n}px`,d=`var(--total-scale-factor) * ${s}px`,p=o?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,b=o?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(a.width=p,a.height=b):(a.width=b,a.height=p)}i&&r.setAttribute("data-main-rotation",t.rotation)}class An{constructor(){const{pixelRatio:t}=An;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,n,s=-1){let a=1/0,o=1/0,u=1/0;i=An.capPixels(i,s),i>0&&(a=Math.sqrt(i/(t*e))),n!==-1&&(o=n/t,u=n/e);const d=Math.min(a,o,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const xo=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class fa{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;static#o=null;constructor(t){this.#i=t,fa.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",tn,{signal:e}),t.addEventListener("pointerdown",fa.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const n=this.#i.toolbarPosition;if(n){const{style:s}=t,a=this.#i._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#c(t){this.#i._focusEventsAllowed=!1,ii(t)}#d(t){this.#i._focusEventsAllowed=!0,ii(t)}#u(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",tn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",fa.#o[t]),this.#u(i)&&i.addEventListener("click",n=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#u(e),this.#n.append(e,this.#f),this.#r=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#u(e),this.#n.append(e,this.#f),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#u(e),this.#n.append(e,this.#f)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#i);this.#u(e),this.#n.append(e,this.#f)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Kp{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",tn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,n=0;for(const s of t){const a=s.y+s.height;if(a<i)continue;const o=s.x+(e?s.width:0);if(a>i){n=o,i=a;continue}e?o>n&&(n=o):o<n&&(n=o)}return[e?1-n:n,i]}show(t,e,i){const[n,s]=this.#r(e,i),{style:a}=this.#e||=this.#n();t.append(this.#e),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,i,n){const s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const o=this.#i._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",tn,{signal:o}),s.addEventListener("click",n,{signal:o})),this.#t.append(s)}}function vh(r,t,e){for(const i of e)t.addEventListener(i,r[i].bind(r))}class Yp{#t=0;get id(){return`${ch}${this.#t++}`}}class hc{#t=cc();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ve(this,"_isSVGFittingCanvas",s)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(i.url=e,n=await Dr(e,"blob")):e instanceof File?n=i.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const s=hc._isSVGFittingCanvas,a=new FileReader,o=new Image,u=new Promise((d,p)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,d()},a.onload=async()=>{const b=i.svgUrl=a.result;o.src=await s?`${b}#svgView(preserveAspectRatio(none))`:b},o.onerror=a.onerror=p});a.readAsDataURL(n),await u}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){he(n),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:s}=t;return this.#n(`${e}_${i}_${n}_${s}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const n=new OffscreenCanvas(i.width,i.height);n.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=n.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Jp{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&t(),this.#e)return;const u={cmd:t,undo:e,post:i,type:s};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(u);return}if(a&&this.#t[this.#n].type===s){o&&(u.undo=this.#t[this.#n].undo),this.#t[this.#n]=u;return}const d=this.#n+1;d===this.#i?this.#t.splice(0,1):(this.#n=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(u)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Ea{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=vi.platform;for(const[i,n,s={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(n.bind(t,...a,e)(),s||ii(e))}}class dc{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Xp(t),ve(this,"_colors",t)}convert(t){const e=Sa(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,n]of this._colors)if(n.every((s,a)=>s===e[a]))return dc._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Nt.makeHexColor(...e):t}}class ss{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#l=new Jp;#c=null;#d=null;#u=null;#f=0;#g=new Set;#p=null;#h=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#_=!1;#A=null;#v=null;#x=null;#k=null;#C=!1;#S=null;#D=new Yp;#T=!1;#P=!1;#I=!1;#O=null;#L=null;#N=null;#M=null;#j=null;#E=ce.NONE;#w=new Set;#H=null;#$=null;#q=null;#X=null;#G=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#z=null;#W=null;#Q=null;#Z=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ss.prototype,e=a=>a.#W.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:u}=o;return u!=="text"&&u!=="number"}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ve(this,"_keyboardManager",new Ea([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#W.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#W.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,i,n,s,a,o,u,d,p,b,y,x,A,w,T){const E=this._signal=this.#t.signal;this.#W=t,this.#Q=e,this.#Z=i,this.#s=n,this.#c=s,this.#$=a,this.#G=u,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:E}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),o._on("setpreference",this.onSetPreference.bind(this),{signal:E}),o._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#a=u.annotationStorage,this.#A=u.filterFactory,this.#q=d,this.#k=p||null,this.#y=b,this.#b=y,this.#_=x,this.#j=A||null,this.viewParameters={realScale:$s.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=T!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#M?.clear(),this.#e=null,this.#w.clear(),this.#l.destroy(),this.#s?.destroy(),this.#c?.destroy(),this.#$?.destroy(),this.#S?.hide(),this.#S=null,this.#N?.destroy(),this.#N=null,this.#i=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#G=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#_}get hcmFilter(){return ve(this,"hcmFilter",this.#q?this.#A.addHCMFilter(this.#q.foreground,this.#q.background):"none")}get direction(){return ve(this,"direction",getComputedStyle(this.#W).direction)}get _highlightColors(){return ve(this,"_highlightColors",this.#k?new Map(this.#k.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return ve(this,"highlightColors",null);const e=new Map,i=!!this.#q;for(const[n,s]of t){const a=n.endsWith("_HCM");if(i&&a){e.set(n.replace("_HCM",""),s);continue}!i&&!a&&e.set(n,s)}return ve(this,"highlightColors",e)}get highlightColorNames(){return ve(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#N=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#c}editComment(t,e){this.#c?.open(this,t,e)}getSignature(t){this.#$?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#$}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#_=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#W.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:n,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(t>=n&&t<=n+a&&e>=s&&e<=s+o)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*$s.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#J({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o}=i,u=i.toString(),p=this.#J(i).closest(".textLayer"),b=this.getSelectionBoxes(p);if(!b)return;i.empty();const y=this.#tt(p),x=this.#E===ce.NONE,A=()=>{const w=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o,text:u});x&&this.showAllEditors("highlight",!0,!0),e&&w?.editComment()};if(x){this.switchToMode(ce.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#J(t).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(this.#S||=new Kp(this),this.#S.show(i,n,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#Z;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#H&&(this.#S?.hide(),this.#H=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#H)return;const n=this.#J(t).closest(".textLayer");if(!n){this.#H&&(this.#S?.hide(),this.#H=null,this.#R({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#H=e,this.#R({hasSelectedText:!0}),!(this.#E!==ce.HIGHLIGHT&&this.#E!==ce.NONE)&&(this.#E===ce.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#E===ce.HIGHLIGHT?this.#tt(n):null;if(s?.toggleDrawing(),this.#P){const a=new AbortController,o=this.combinedSignal(a),u=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),s?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}else s?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#E===ce.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#w){const n=i.serialize(!0);n&&e.push(n)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){he(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const s=[];for(const u of i){const d=await n.deserialize(u);if(!d)return;s.push(d)}const a=()=>{for(const u of s)this.#st(u);this.#rt(s)},o=()=>{for(const u of s)u.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){he(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==ce.NONE&&!this.isEditorHandlingKeyboard&&ss._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([i,n])=>this.#V[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#E===ce.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#U([[Ce.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#R({isEditing:this.#E!==ce.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#U(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#T?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,n=!1,s=!1){if(this.#E!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#E===ce.POPUP&&this.#c?.hideSidebar(),this.#E=t,t===ce.NONE){this.setEditingState(!1),this.#pt(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===ce.SIGNATURE&&await this.#$?.loadSignatures(),t===ce.POPUP&&(this.#i||=await this.#G.getAnnotationsByType(new Set(this.#h.map(a=>a._editorType))),this.#c?.showSidebar(this.#i)),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const a of this.#r.values())a.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const a of this.#n.values())a.annotationElementId===e||a.id===e?(this.setSelected(a),s?a.editComment():n&&a.enterInEditMode()):a.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case Ce.CREATE:this.currentLayer.addNewEditor(e);return;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(t,e);else for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const s of this.#n.values())s.editorType===t&&s.show(e);(this.#X?.get(Ce.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#U([[Ce.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#T){this.#T=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#T){this.#T=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#n.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#M?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#U(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#U(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#U(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#R({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#l.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#l.cleanType(t)}#Y(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],i=()=>{this._editorUndoBar?.show(n,e.length===1?e[0].editorType:e.length);for(const s of e)s.remove()},n=()=>{for(const s of e)this.#st(s)};this.addCommands({cmd:i,undo:n,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#rt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#rt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==ce.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=t,this.#F[1]+=e;const[n,s]=this.#F,a=[...this.#w],o=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(const u of a)this.#n.has(u.id)&&(u.translateInPage(n,s),u.translationDone())},undo:()=>{for(const u of a)this.#n.has(u.id)&&(u.translateInPage(-n,-s),u.translationDone())},mustExec:!1})},o);for(const u of a)u.translateInPage(t,e),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:n,y:s,pageIndex:a},o]of t)o.newX=n,o.newY=s,o.newPageIndex=a,e||=n!==o.savedX||s!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(n,s,a,o)=>{if(this.#n.has(n.id)){const u=this.#r.get(o);u?n._setParentAndPosition(u,s,a):(n.pageIndex=o,n.x=s,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:s,newY:a,newPageIndex:o}]of t)i(n,s,a,o)},undo:()=>{for(const[n,{savedX:s,savedY:a,savedPageIndex:o}]of t)i(n,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}get imageManager(){return ve(this,"imageManager",new hc)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(d,p,b,y)=>({x:(p-n)/a,y:1-(d+b-i)/s,width:y/a,height:b/s});break;case"180":o=(d,p,b,y)=>({x:1-(d+b-i)/s,y:1-(p+y-n)/a,width:b/s,height:y/a});break;case"270":o=(d,p,b,y)=>({x:1-(p+y-n)/a,y:(d-i)/s,width:y/a,height:b/s});break;default:o=(d,p,b,y)=>({x:(d-i)/s,y:(p-n)/a,width:b/s,height:y/a});break}const u=[];for(let d=0,p=e.rangeCount;d<p;d++){const b=e.getRangeAt(d);if(!b.collapsed)for(const{x:y,y:x,width:A,height:w}of b.getClientRects())A===0||w===0||u.push(o(y,x,A,w))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#E===ce.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const n=this.#M?.get(t);n&&(n.setCanvas(e,i),this.#M.delete(t))}addMissingCanvas(t,e){(this.#M||=new Map).set(t,e)}}class Bn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#l=null;#c=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#l=t,this.#u=t._uiManager.useNewAltTextFlow,Bn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Bn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bn.#f.missing),e.setAttribute("data-l10n-id",Bn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#l._uiManager._signal;t.addEventListener("contextmenu",tn,{signal:i}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const n=s=>{s.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#a=!0,n(s))},{signal:i}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Bn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#l.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(this.#c=i,this.#d=n),!(this.#t===t&&this.#e===e)&&(s||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Bn.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Bn.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#l.id}`;const n=100,s=this.#l._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},n)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:s})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#l.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class co{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;constructor(t){this.#i=t,this.toolbar=null}render(){if(!this.#i._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#i._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",tn,{signal:e}),t.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:e});const i=n=>{n.preventDefault(),this.edit()};return t.addEventListener("click",i,{capture:!0,signal:e}),t.addEventListener("keydown",n=>{n.target===t&&n.key==="Enter"&&(this.#e=!0,i(n))},{signal:e}),t}edit(){const{bottom:t,left:e,right:i}=this.#i.getClientDimensions(),n={top:t};this.#i._uiManager.direction==="ltr"?n.right=i:n.left=e,this.#i._uiManager.editComment(this.#i,n)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#a||this.#r===""}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#n}serialize(){return this.data}get data(){return{text:this.#r,date:this.#s,deleted:this.#a}}set data(t){if(t===null){this.#r="",this.#a=!0;return}this.#r=t,this.#s=new Date,this.#a=!1}setInitialText(t){this.#n=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#r="",this.#s=null,this.#i=null,this.#e=!1,this.#a=!1}}class Ca{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#l;#c=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){this.#t=t,this.#i=i,this.#n=e,this.#r=n,this.#s=s,this.#a=a,this.#d=new AbortController,this.#l=AbortSignal.any([o,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/An.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const n=this.#o=new AbortController,s=AbortSignal.any([this.#l,n.signal]),a=this.#t,o={capture:!0,signal:s,passive:!1},u=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(ii(d),u(d))},o),a.addEventListener("pointerup",u,o),a.addEventListener("pointercancel",u,o);return}if(!this.#u){this.#u=new AbortController;const n=AbortSignal.any([this.#l,this.#u.signal]),s=this.#t,a={signal:n,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),a);const o=this.#p.bind(this);s.addEventListener("touchend",o,a),s.addEventListener("touchcancel",o,a),a.capture=!0,s.addEventListener("pointerdown",ii,a),s.addEventListener("pointermove",ii,a),s.addEventListener("pointercancel",ii,a),s.addEventListener("pointerup",ii,a),this.#r?.()}if(ii(t),t.touches.length!==2||this.#i?.()){this.#c=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;ii(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:n,screenY:s}=e,{screenX:a,screenY:o}=i,u=this.#c,{touch0X:d,touch0Y:p,touch1X:b,touch1Y:y}=u,x=b-d,A=y-p,w=a-n,T=o-s,E=Math.hypot(w,T)||1,R=Math.hypot(x,A)||1;if(!this.#e&&Math.abs(R-E)<=Ca.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=n,u.touch0Y=s,u.touch1X=a,u.touch1Y=o,!this.#e){this.#e=!0;return}const M=[(n+a)/2,(s+o)/2];this.#s?.(M,R,E)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#c&&(ii(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ne{#t=null;#e=null;#i=null;#n=null;#r=!1;#s=null;#a="";#o=!1;#l=null;#c=null;#d=null;#u=null;#f="";#g=!1;#p=null;#h=!1;#m=!1;#y=!1;#b=null;#_=0;#A=0;#v=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#C=ne._zIndex++;static _borderLineWidth=-1;static _colorManager=new dc;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ne.prototype._resizeWithKeyboard,e=ss.TRANSLATE_SMALL,i=ss.TRANSLATE_BIG;return ve(this,"_resizerKeyboardManager",new Ea([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ne.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,a];const[o,u]=this.parentDimensions;this.x=t.x/o,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ve(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Qp({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ne._l10n??=t,ne._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ne._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ne._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){je("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(t){this.#k=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[s,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n),this._onTranslated()}#S([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#S(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#S(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[n,s]}=this;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[u,d]=this.getBaseTranslation();a+=u,o+=d;const{style:p}=i;p.left=`${(100*a).toFixed(2)}%`,p.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ne,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,n]}=this;let{x:s,y:a,width:o,height:u}=this;if(o*=i,u*=n,s*=i,a*=n,this._mustFixPosition)switch(t){case 0:s=Mi(s,0,i-o),a=Mi(a,0,n-u);break;case 90:s=Mi(s,0,i-u),a=Mi(a,o,n);break;case 180:s=Mi(s,o,i),a=Mi(a,u,n);break;case 270:s=Mi(s,u,i),a=Mi(a,0,n-o);break}this.x=s/=i,this.y=a/=n;const[d,p]=this.getBaseTranslation();s+=d,a+=p,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#D(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ne.#D(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ne.#D(t,e,360-this.parentRotation)}#T(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,n]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/i).toFixed(2)}%`,this.#o||(s.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!this.#o&&e.endsWith("%");if(n&&s)return;const[a,o]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#o&&!s&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#P(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const n=document.createElement("div");this.#l.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#I.bind(this,i),{signal:e}),n.addEventListener("contextmenu",tn,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#l)}#I(t,e){e.preventDefault();const{isMac:i}=vi.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#N.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ii,{passive:!1,signal:a}),window.addEventListener("contextmenu",tn,{signal:a}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=o,this.div.style.cursor=u,this.#L()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#O(t,e,i,n){this.width=i,this.height=n,this.x=t,this.y=e;const[s,a]=this.parentDimensions;this.setDims(s*i,a*n),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#d;this.#d=null;const s=this.x,a=this.y,o=this.width,u=this.height;s===t&&a===e&&o===i&&u===n||this.addCommands({cmd:this.#O.bind(this,s,a,o,u),undo:this.#O.bind(this,t,e,i,n),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#N(t,e){const[i,n]=this.parentDimensions,s=this.x,a=this.y,o=this.width,u=this.height,d=ne.MIN_SIZE/i,p=ne.MIN_SIZE/n,b=this.#T(this.rotation),y=(kt,vt)=>[b[0]*kt+b[2]*vt,b[1]*kt+b[3]*vt],x=this.#T(360-this.rotation),A=(kt,vt)=>[x[0]*kt+x[2]*vt,x[1]*kt+x[3]*vt];let w,T,E=!1,R=!1;switch(t){case"topLeft":E=!0,w=(kt,vt)=>[0,0],T=(kt,vt)=>[kt,vt];break;case"topMiddle":w=(kt,vt)=>[kt/2,0],T=(kt,vt)=>[kt/2,vt];break;case"topRight":E=!0,w=(kt,vt)=>[kt,0],T=(kt,vt)=>[0,vt];break;case"middleRight":R=!0,w=(kt,vt)=>[kt,vt/2],T=(kt,vt)=>[0,vt/2];break;case"bottomRight":E=!0,w=(kt,vt)=>[kt,vt],T=(kt,vt)=>[0,0];break;case"bottomMiddle":w=(kt,vt)=>[kt/2,vt],T=(kt,vt)=>[kt/2,0];break;case"bottomLeft":E=!0,w=(kt,vt)=>[0,vt],T=(kt,vt)=>[kt,0];break;case"middleLeft":R=!0,w=(kt,vt)=>[0,vt/2],T=(kt,vt)=>[kt,vt/2];break}const M=w(o,u),B=T(o,u);let U=y(...B);const z=ne._round(s+U[0]),f=ne._round(a+U[1]);let H=1,V=1,at,st;if(e.fromKeyboard)({deltaX:at,deltaY:st}=e);else{const{screenX:kt,screenY:vt}=e,[re,ge]=this.#c;[at,st]=this.screenToPageTranslation(kt-re,vt-ge),this.#c[0]=kt,this.#c[1]=vt}if([at,st]=A(at/i,st/n),E){const kt=Math.hypot(o,u);H=V=Math.max(Math.min(Math.hypot(B[0]-M[0]-at,B[1]-M[1]-st)/kt,1/o,1/u),d/o,p/u)}else R?H=Mi(Math.abs(B[0]-M[0]-at),d,1)/o:V=Mi(Math.abs(B[1]-M[1]-st),p,1)/u;const ht=ne._round(o*H),dt=ne._round(u*V);U=y(...T(ht,dt));const Ht=z-U[0],te=f-U[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=dt,this.x=Ht,this.y=te,this.setDims(i*ht,n*dt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new fa(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Bn.initialize(ne._l10n),this.#i=new Bn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}addCommentButton(){return this.#n?this.#n:this.#n=new co(this)}get commentColor(){return null}get comment(){const t=this.#n;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#n||(this.#n=new co(this)),this.#n.data=t}setCommentData(t){this.#n||(this.#n=new co(this)),this.#n.setInitialText(t)}get hasEditedComment(){return this.#n?.hasBeenEdited()}async editComment(){this.#n||(this.#n=new co(this)),this.#n.edit()}addComment(t){if(this.hasEditedComment){const[,,,n]=t.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,u=n-100,d=o+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,u,d,n]}}}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#$();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),vh(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new Ca({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#M.bind(this),onPinching:this.#j.bind(this),onPinchEnd:this.#E.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#M(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#j(t,e,i){let s=.7*(i/e)+1-.7;if(s===1)return;const a=this.#T(this.rotation),o=(z,f)=>[a[0]*z+a[2]*f,a[1]*z+a[3]*f],[u,d]=this.parentDimensions,p=this.x,b=this.y,y=this.width,x=this.height,A=ne.MIN_SIZE/u,w=ne.MIN_SIZE/d;s=Math.max(Math.min(s,1/y,1/x),A/y,w/x);const T=ne._round(y*s),E=ne._round(x*s);if(T===y&&E===x)return;this.#p||=[p,b,y,x];const R=o(y/2,x/2),M=ne._round(p+R[0]),B=ne._round(b+R[1]),U=o(T/2,E/2);this.x=M-U[0],this.y=B-U[1],this.width=T,this.height=E,this.setDims(u*T,d*E),this.fixAndSetPosition(),this._onResizing()}#E(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#H(t);return}this.#w(t)}#w(t){const{isMac:e}=vi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const n=new AbortController,s=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:s},o=d=>{n.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#w(d),i&&this._onStopDragging()};e&&(this.#_=t.clientX,this.#A=t.clientY,this.#s=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._onStartDragging());const{clientX:p,clientY:b,pointerId:y}=d;if(y!==this.#s){ii(d);return}const[x,A]=this.screenToPageTranslation(p-this.#_,b-this.#A);this.#_=p,this.#A=b,this._uiManager.dragSelectedEditors(x,A)},a),window.addEventListener("touchmove",ii,a),window.addEventListener("pointerdown",d=>{d.pointerType===this.#a&&(this.#x||d.isPrimary)&&o(d),ii(d)},a));const u=d=>{if(!this.#s||this.#s===d.pointerId){o(d);return}ii(d)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const n=this.parentScale,[s,a]=this.pageDimensions,[o,u]=this.pageTranslation,d=t/n,p=e/n,b=this.x*s,y=this.y*a,x=this.width*s,A=this.height*a;switch(i){case 0:return[b+d+o,a-y-p-A+u,b+d+x+o,a-y-p+u];case 90:return[b+p+o,a-y+d+u,b+p+A+o,a-y+d+x+u];case 180:return[b-d-x+o,a-y+p+u,b-d+o,a-y+p+A+u];case 270:return[b-p-A+o,a-y-d-x+u,b-p+o,a-y-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,s,a]=t,o=s-i,u=a-n;switch(this.rotation){case 0:return[i,e-a,o,u];case 90:return[i,e-n,u,o];case 180:return[s,e-n,o,u];case 270:return[s,e-a,u,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return e<a&&n>0&&t<s&&i>0}#$(){if(this.#u||!this.div)return;this.#u=new AbortController;const t=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#$()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){je("An editor must be serializable")}static async deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});n.rotation=t.rotation,n.#t=t.accessibilityData,n._isCopy=t.isCopy||!1;const[s,a]=n.pageDimensions,[o,u,d,p]=n.getRectInCurrentCoords(t.rect,a);return n.x=o/s,n.y=u/a,n.width=d/s,n.height=p/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null,this.#x?.destroy(),this.#x=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#l.children;if(!this.#e){this.#e=Array.from(e);const a=this.#q.bind(this),o=this.#X.bind(this),u=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:u}),d.addEventListener("blur",o,{signal:u}),d.addEventListener("focus",this.#G.bind(this,p),{signal:u}),d.setAttribute("data-l10n-id",ne._l10nResizer[p])}}const i=this.#e[0];let n=0;for(const a of e){if(a===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==n){if(s<n)for(let o=0;o<n-s;o++)this.#l.append(this.#l.firstChild);else if(s>n)for(let o=0;o<s-n;o++)this.#l.firstChild.before(this.#l.lastChild);let a=0;for(const o of e){const d=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ne._l10nResizer[d])}}this.#V(0),this.#y=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){ne._resizerKeyboardManager.exec(this,t)}#X(t){this.#y&&t.relatedTarget?.parentNode!==this.#l&&this.#F()}#G(t){this.#f=this.#y?t:""}#V(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#N(this.#f,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#y=!1,this.#V(-1),this.#L()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:i}=t;let n=this.#v.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(i),this.#v.size===0&&(this.#v=null)},ne._telemetryTimeout),this.#v.set(i,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Qp extends ne{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hu=3285377520,an=4294901760,Nn=65535;class yh{constructor(t){this.h1=t?t&4294967295:hu,this.h2=t?t&4294967295:hu}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let w=0,T=t.length;w<T;w++){const E=t.charCodeAt(w);E<=255?e[i++]=E:(e[i++]=E>>>8,e[i++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,s=i-n*4,a=new Uint32Array(e.buffer,0,n);let o=0,u=0,d=this.h1,p=this.h2;const b=3432918353,y=461845907,x=b&Nn,A=y&Nn;for(let w=0;w<n;w++)w&1?(o=a[w],o=o*b&an|o*x&Nn,o=o<<15|o>>>17,o=o*y&an|o*A&Nn,d^=o,d=d<<13|d>>>19,d=d*5+3864292196):(u=a[w],u=u*b&an|u*x&Nn,u=u<<15|u>>>17,u=u*y&an|u*A&Nn,p^=u,p=p<<13|p>>>19,p=p*5+3864292196);switch(o=0,s){case 3:o^=e[n*4+2]<<16;case 2:o^=e[n*4+1]<<8;case 1:o^=e[n*4],o=o*b&an|o*x&Nn,o=o<<15|o>>>17,o=o*y&an|o*A&Nn,n&1?d^=o:p^=o}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&an|t*36045&Nn,e=e*4283543511&an|((e<<16|t>>>16)*2950163797&an)>>>16,t^=e>>>1,t=t*444984403&an|t*60499&Nn,e=e*3301882366&an|((e<<16|t>>>16)*3120437893&an)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ul=Object.freeze({map:null,hash:"",transfer:void 0});class fc{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#i.values())if(e instanceof ne)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let n=!1;if(i!==void 0)for(const[s,a]of Object.entries(e))i[s]!==a&&(n=!0,i[s]=a);else n=!0,this.#i.set(t,e);n&&this.#n(),e instanceof ne&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#i.has(t)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wh(this)}get serializable(){if(this.#i.size===0)return Ul;const t=new Map,e=new yh,i=[],n=Object.create(null);let s=!1;for(const[a,o]of this.#i){const u=o instanceof ne?o.serialize(!1,n):o;u&&(t.set(a,u),e.update(`${a}:${JSON.stringify(u)}`),s||=!!u.bitmap)}if(s)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ul}get editorStats(){let t=null;const e=new Map;for(const i of this.#i.values()){if(!(i instanceof ne))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const a=t[s]||=new Map;for(const[o,u]of Object.entries(n)){if(o==="type")continue;let d=a.get(o);d||(d=new Map,a.set(o,d));const p=d.get(u)??0;d.set(u,p+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#i.values())!(e instanceof ne)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class wh extends fc{#t;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);this.#t={map:s,hash:i,transfer:n}}get print(){je("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return ve(this,"modifiedIds",{ids:new Set,hash:""})}}class Zp{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(ci(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=t,o=new FontFace(n,s,a);this.addNativeFontFace(o);try{await o.load(),this.#t.add(n),i?.(t)}catch{he(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}je("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw he(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return ve(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ve(this,"isSyncFontLoadingSupported",Ii||vi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ci(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ve(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(B,U){return B.charCodeAt(U)<<24|B.charCodeAt(U+1)<<16|B.charCodeAt(U+2)<<8|B.charCodeAt(U+3)&255}function n(B,U,z,f){const H=B.substring(0,U),V=B.substring(U+z);return H+f+V}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const u=o.getContext("2d");let d=0;function p(B,U){if(++d>30){he("Load test font never loaded."),U();return}if(u.font="30px "+B,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(p.bind(null,B,U))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=n(y,976,b.length,b);const A=16,w=1482184792;let T=i(y,A);for(s=0,a=b.length-3;s<a;s+=4)T=T-w+i(b,s)|0;s<b.length&&(T=T-w+i(b+"XXX",s)|0),y=n(y,A,4,$p(T));const E=`url(data:font/opentype;base64,${btoa(y)});`,R=`@font-face {font-family:"${b}";src:${E}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const B of[t.loadedName,b]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=B,M.append(U)}this._document.body.append(M),p(b,()=>{M.remove(),e.complete()})}}class tg{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${ph(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let n;try{n=t.get(i)}catch(a){he(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(n||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=s}}function eg(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ii)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ig(r){if(Ii&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return _a(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function uo(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const ql=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,ng=r=>typeof r=="object"&&typeof r?.name=="string",_h=Wp.bind(null,ql,ng);class sg{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[n]of this.#t)n.call(this,i)})}addEventListener(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){he("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);n=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#t.set(e,n)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const ho={DATA:1,ERROR:2},li={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function du(){}function zi(r){if(r instanceof ns||r instanceof _o||r instanceof lu||r instanceof ga||r instanceof _l)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||je('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new ns(r.message);case"InvalidPDFException":return new _o(r.message);case"PasswordException":return new lu(r.message,r.code);case"ResponseException":return new ga(r.message,r.status,r.missing);case"UnknownErrorException":return new _l(r.message,r.details)}return new _l(r.message,r.toString())}class ca{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===ho.DATA)n.resolve(t.data);else if(t.callback===ho.ERROR)n.reject(zi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,n=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(a){s.postMessage({sourceName:i,targetName:n,callback:ho.DATA,callbackId:t.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:n,callback:ho.ERROR,callbackId:t.callbackId,reason:zi(a)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(t,e,i,n){const s=this.streamId++,a=this.sourceName,o=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:o,action:t,streamId:s,data:e,desiredSize:d.desiredSize},n),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[s].pullCall=p,u.postMessage({sourceName:a,targetName:o,stream:li.PULL,streamId:s,desiredSize:d.desiredSize}),p.promise},cancel:d=>{ci(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[s].cancelCall=p,this.streamControllers[s].isClosed=!0,u.postMessage({sourceName:a,targetName:o,stream:li.CANCEL,streamId:s,reason:zi(d)}),p.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,a=this,o=this.actionHandler[t.action],u={enqueue(d,p=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:li.ENQUEUE,streamId:e,chunk:d},b)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:li.CLOSE,streamId:e}),delete a.streamSinks[e])},error(d){ci(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:li.ERROR,streamId:e,reason:zi(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,Promise.try(o,t.data,u).then(function(){s.postMessage({sourceName:i,targetName:n,stream:li.START_COMPLETE,streamId:e,success:!0})},function(d){s.postMessage({sourceName:i,targetName:n,stream:li.START_COMPLETE,streamId:e,reason:zi(d)})})}#n(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case li.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(zi(t.reason));break;case li.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(zi(t.reason));break;case li.PULL:if(!o){s.postMessage({sourceName:i,targetName:n,stream:li.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||du).then(function(){s.postMessage({sourceName:i,targetName:n,stream:li.PULL_COMPLETE,streamId:e,success:!0})},function(d){s.postMessage({sourceName:i,targetName:n,stream:li.PULL_COMPLETE,streamId:e,reason:zi(d)})});break;case li.ENQUEUE:if(ci(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case li.CLOSE:if(ci(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#r(a,e);break;case li.ERROR:ci(a,"error should have stream controller"),a.controller.error(zi(t.reason)),this.#r(a,e);break;case li.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(zi(t.reason)),this.#r(a,e);break;case li.CANCEL:if(!o)break;const u=zi(t.reason);Promise.try(o.onCancel||du,u).then(function(){s.postMessage({sourceName:i,targetName:n,stream:li.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){s.postMessage({sourceName:i,targetName:n,stream:li.CANCEL_COMPLETE,streamId:e,reason:zi(d)})}),o.sinkCapability.reject(u),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Ah{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){je("Abstract method `_createCanvas` called.")}}class rg extends Ah{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class xh{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){je("Abstract method `_fetch` called.")}}class fu extends xh{async _fetch(t){const e=await Dr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):_a(e)}}class Sh{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}}class ag extends Sh{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#l(){return this.#s||=new Map}get#c(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(Jn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(Jn,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const u=t[0],d=new Array(256);for(let b=0;b<256;b++)d[b]=u[b]/255;const p=d.join(",");return[p,p,p]}const[e,i,n]=t,s=new Array(256),a=new Array(256),o=new Array(256);for(let u=0;u<256;u++)s[u]=e[u]/255,a[u]=i[u]/255,o[u]=n[u]/255;return[s.join(","),a.join(","),o.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(xa(e)?he('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=lc(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,n,s]=this.#d(t),a=t.length===1?i:`${i}${n}${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_transfer_map_${this.#a++}`,u=this.#u(o);this.#o.set(t,u),this.#o.set(a,u);const d=this.#p(o);return this.#m(i,n,s,d),u}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let s=this.#l.get(n);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#l.set(n,s)),!t||!e))return s.url;const a=this.#b(t);t=Nt.makeHexColor(...a);const o=this.#b(e);if(e=Nt.makeHexColor(...o),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;const u=new Array(256);for(let x=0;x<=255;x++){const A=x/255;u[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=u.join(","),p=`g_${this.#n}_hcm_filter`,b=s.filter=this.#p(p);this.#m(d,d,d,b),this.#g(b);const y=(x,A)=>{const w=a[x]/255,T=o[x]/255,E=new Array(A+1);for(let R=0;R<=A;R++)E[R]=w+R/A*(T-w);return E.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),b),s.url=this.#u(p),s.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),n=`alpha_${i}`;if(e=this.#o.get(n),e)return this.#o.set(t,e),e;const s=`g_${this.#n}_alpha_map_${this.#a++}`,a=this.#u(s);this.#o.set(t,a),this.#o.set(n,a);const o=this.#p(s);return this.#y(i,o),a}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,n;if(t?([i]=this.#d([t]),n=`luminosity_${i}`):n="luminosity",e=this.#o.get(n),e)return this.#o.set(t,e),e;const s=`g_${this.#n}_luminosity_map_${this.#a++}`,a=this.#u(s);this.#o.set(t,a),this.#o.set(n,a);const o=this.#p(s);return this.#f(o),t&&this.#y(i,o),a}addHighlightHCMFilter(t,e,i,n,s){const a=`${e}-${i}-${n}-${s}`;let o=this.#l.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#l.set(t,o)),!e||!i))return o.url;const[u,d]=[e,i].map(this.#b.bind(this));let p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),b=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,x]=[n,s].map(this.#b.bind(this));b<p&&([p,b,y,x]=[b,p,x,y]),this.#c.style.color="";const A=(E,R,M)=>{const B=new Array(256),U=(b-p)/M,z=E/255,f=(R-E)/(255*M);let H=0;for(let V=0;V<=M;V++){const at=Math.round(p+V*U),st=z+V*f;for(let ht=H;ht<=at;ht++)B[ht]=st;H=at+1}for(let V=H;V<256;V++)B[V]=B[H-1];return B.join(",")},w=`g_${this.#n}_hcm_${t}_filter`,T=o.filter=this.#p(w);return this.#g(T),this.#m(A(y[0],x[0],5),A(y[1],x[1],5),A(y[2],x[2],5),T),o.url=this.#u(w),o.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(Jn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Jn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(Jn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,i){const n=this.#r.createElementNS(Jn,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#m(t,e,i,n){const s=this.#r.createElementNS(Jn,"feComponentTransfer");n.append(s),this.#h(s,"feFuncR",t),this.#h(s,"feFuncG",e),this.#h(s,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(Jn,"feComponentTransfer");e.append(i),this.#h(i,"feFuncA",t)}#b(t){return this.#c.style.color=t,Sa(getComputedStyle(this.#c).getPropertyValue("color"))}}class Eh{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){je("Abstract method `_fetch` called.")}}class pu extends Eh{async _fetch(t){const e=await Dr(t,"arraybuffer");return new Uint8Array(e)}}class Ch{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){je("Abstract method `_fetch` called.")}}class gu extends Ch{async _fetch(t){const e=await Dr(t,"arraybuffer");return new Uint8Array(e)}}Ii&&he("Please use the `legacy` build in Node.js environments.");async function pc(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class og extends Sh{}class lg extends Ah{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class cg extends xh{async _fetch(t){return pc(t)}}class ug extends Eh{async _fetch(t){return pc(t)}}class hg extends Ch{async _fetch(t){return pc(t)}}const vr="__forcedDependency";class dg{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[vr]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#d=new Map;#u=new Map;#f;#g;constructor(t){this.#f=t.width,this.#g=t.height}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[vr]:{__proto__:this.#e[vr]}},this.#a={__proto__:this.#a},this.#n.push([t,null]),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(i[1]=t),this}recordOpenMarker(t){return this.#n.push([t,null]),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)[0]}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return this.#r.push([t,null]),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return this.#s.push(Nt.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(vr,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#c)this.recordFutureForcedDependency(vr,t);return this}resetBBox(t){return this.#l=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(t,e,i,n,s,a){const o=Nt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),u=[1/0,1/0,-1/0,-1/0];Nt.axialAlignedBoundingBox([i,s,n,a],o,u);const d=Nt.intersect(this.#a,u);return d?(this.#a[0]=d[0],this.#a[1]=d[1],this.#a[2]=d[2],this.#a[3]=d[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,n,s,a){const o=this.#a;if(o[0]===1/0)return this;const u=Nt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(o[0]===-1/0)return Nt.axialAlignedBoundingBox([i,s,n,a],u,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Nt.axialAlignedBoundingBox([i,s,n,a],u,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],o[3])),this}recordCharacterBBox(t,e,i,n=1,s=0,a=0,o){const u=i.bbox;let d,p;if(u&&(d=u[2]!==u[0]&&u[3]!==u[1]&&this.#u.get(i),d!==!1&&(p=[0,0,0,0],Nt.axialAlignedBoundingBox(u,i.fontMatrix,p),(n!==1||s!==0||a!==0)&&Nt.scaleMinMax([n,0,0,-n,s,a],p),d)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!o)return this.recordFullPageBBox(t);const b=o();return u&&p&&d===void 0&&(d=p[0]<=s-b.actualBoundingBoxLeft&&p[2]>=s+b.actualBoundingBoxRight&&p[1]<=a-b.actualBoundingBoxAscent&&p[3]>=a+b.actualBoundingBoxDescent,this.#u.set(i,d),d)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,s-b.actualBoundingBoxLeft,s+b.actualBoundingBoxRight,a-b.actualBoundingBoxAscent,a+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#c,n=this.#t,s=this.#e;for(const a of e)a in this.#t?i.add(n[a]):a in s&&s[a].forEach(i.add,i);return this}copyDependenciesFromIncrementalOperation(t,e){const i=this.#d,n=this.#c;for(const s of this.#e[e])i.get(s).dependencies.forEach(n.add,n.add(s));return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#c.add(this.#i.get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[vr]);const i=new Set(this.#c),n=this.#n.concat(this.#r),s=this.#l===t?{minX:this.#o[0],minY:this.#o[1],maxX:this.#o[2],maxY:this.#o[3]}:null;return this.#d.set(t,{bbox:s,pairs:n,dependencies:i}),e||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(t){return this.#l!==-1&&(this.#l=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3])),this.#c.clear(),this}_takePendingDependencies(){const t=this.#c;return this.#c=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#c.add(e)}take(){return this.#u.clear(),Array.from(this.#d,([t,{bbox:e,pairs:i,dependencies:n}])=>(i.forEach(s=>s.forEach(n.add,n)),n.delete(t),{minX:(e?.minX??0)/this.#f,maxX:(e?.maxX??this.#f)/this.#f,minY:(e?.minY??0)/this.#g,maxY:(e?.maxY??this.#g)/this.#g,dependencies:Array.from(n).sort((s,a)=>s-a),idx:t}))}}class So{#t;#e;#i=0;#n;#r=0;constructor(t,e){if(t instanceof So)return t;this.#t=t,this.#n=t._takePendingDependencies(),this.#e=e}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#t.hasPendingBBox||this.#t.resetBBox(this.#e),this}get hasPendingBBox(){return this.#t.hasPendingBBox}recordClipBox(t,e,i,n,s,a){return this.#t.recordClipBox(this.#e,e,i,n,s,a),this}recordBBox(t,e,i,n,s,a){return this.#t.recordBBox(this.#e,e,i,n,s,a),this}recordCharacterBBox(t,e,i,n,s,a,o){return this.#t.recordCharacterBBox(this.#e,e,i,n,s,a,o),this}recordFullPageBBox(t){return this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}copyDependenciesFromIncrementalOperation(t,e){return this.#t.copyDependenciesFromIncrementalOperation(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){this.#t.recordOperation(this.#e,!0);const e=this.#t._extractOperation(this.#e);for(const i of e.dependencies)this.#n.add(i);return this.#n.delete(this.#e),this.#n.delete(null),this}bboxToClipBoxDropOperation(t){return this.#t.bboxToClipBoxDropOperation(this.#e),this}recordNestedDependencies(){this.#t._pushPendingDependencies(this.#n)}take(){throw new Error("Unreachable")}}const on={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ci={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function zl(r,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),r.clip(n)}class gc{isModifyingCurrentTransform(){return!1}getPattern(){je("Abstract method `getPattern` called.")}}class fg extends gc{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let s;if(n===Ci.STROKE||n===Ci.FILL){const a=e.current.getClippedPathBoundingBox(n,Je(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,d=e.cachedCanvases.getCanvas("pattern",o,u),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-a[0],-a[1]),i=Nt.transform(i,[1,0,0,1,a[0],a[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),zl(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),s=t.createPattern(d.canvas,"no-repeat");const b=new DOMMatrix(i);s.setTransform(b)}else zl(t,this._bbox),s=this._createGradient(t);return s}}function Sl(r,t,e,i,n,s,a,o){const u=t.coords,d=t.colors,p=r.data,b=r.width*4;let y;u[e+1]>u[i+1]&&(y=e,e=i,i=y,y=s,s=a,a=y),u[i+1]>u[n+1]&&(y=i,i=n,n=y,y=a,a=o,o=y),u[e+1]>u[i+1]&&(y=e,e=i,i=y,y=s,s=a,a=y);const x=(u[e]+t.offsetX)*t.scaleX,A=(u[e+1]+t.offsetY)*t.scaleY,w=(u[i]+t.offsetX)*t.scaleX,T=(u[i+1]+t.offsetY)*t.scaleY,E=(u[n]+t.offsetX)*t.scaleX,R=(u[n+1]+t.offsetY)*t.scaleY;if(A>=R)return;const M=d[s],B=d[s+1],U=d[s+2],z=d[a],f=d[a+1],H=d[a+2],V=d[o],at=d[o+1],st=d[o+2],ht=Math.round(A),dt=Math.round(R);let Ht,te,kt,vt,re,ge,Le,Ut;for(let Pt=ht;Pt<=dt;Pt++){if(Pt<T){const Jt=Pt<A?0:(A-Pt)/(A-T);Ht=x-(x-w)*Jt,te=M-(M-z)*Jt,kt=B-(B-f)*Jt,vt=U-(U-H)*Jt}else{let Jt;Pt>R?Jt=1:T===R?Jt=0:Jt=(T-Pt)/(T-R),Ht=w-(w-E)*Jt,te=z-(z-V)*Jt,kt=f-(f-at)*Jt,vt=H-(H-st)*Jt}let Rt;Pt<A?Rt=0:Pt>R?Rt=1:Rt=(A-Pt)/(A-R),re=x-(x-E)*Rt,ge=M-(M-V)*Rt,Le=B-(B-at)*Rt,Ut=U-(U-st)*Rt;const Vt=Math.round(Math.min(Ht,re)),Bt=Math.round(Math.max(Ht,re));let yt=b*Pt+Vt*4;for(let Jt=Vt;Jt<=Bt;Jt++)Rt=(Ht-Jt)/(Ht-re),Rt<0?Rt=0:Rt>1&&(Rt=1),p[yt++]=te-(te-ge)*Rt|0,p[yt++]=kt-(kt-Le)*Rt|0,p[yt++]=vt-(vt-Ut)*Rt|0,p[yt++]=255}}function pg(r,t,e){const i=t.coords,n=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,u=Math.floor(i.length/o)-1,d=o-1;for(s=0;s<u;s++){let p=s*o;for(let b=0;b<d;b++,p++)Sl(r,e,i[p],i[p+1],i[p+o],n[p],n[p+1],n[p+o]),Sl(r,e,i[p+o+1],i[p+1],i[p+o],n[p+o+1],n[p+1],n[p+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Sl(r,e,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class gg extends gc{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-o,p=Math.ceil(this._bounds[3])-u,b=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),x=d/b,A=p/y,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-u,scaleX:1/x,scaleY:1/A},T=b+4,E=y+4,R=i.getCanvas("mesh",T,E),M=R.context,B=M.createImageData(b,y);if(e){const z=B.data;for(let f=0,H=z.length;f<H;f+=4)z[f]=e[0],z[f+1]=e[1],z[f+2]=e[2],z[f+3]=255}for(const z of this._figures)pg(B,z,w);return M.putImageData(B,2,2),{canvas:R.canvas,offsetX:o-2*x,offsetY:u-2*A,scaleX:x,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,n){zl(t,this._bbox);const s=new Float32Array(2);if(n===Ci.SHADING)Nt.singularValueDecompose2dScale(Je(t),s);else if(this.matrix){Nt.singularValueDecompose2dScale(this.matrix,s);const[o,u]=s;Nt.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=o,s[1]*=u}else Nt.singularValueDecompose2dScale(e.baseTransform,s);const a=this._createMeshCanvas(s,n===Ci.SHADING?null:this._background,e.cachedCanvases);return n!==Ci.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class mg extends gc{getPattern(){return"hotpink"}}function bg(r){switch(r[0]){case"RadialAxial":return new fg(r);case"Mesh":return new gg(r);case"Dummy":return new mg}throw new Error(`Unknown IR type: ${r[0]}`)}const mu={COLORED:1,UNCOLORED:2};class mc{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:n,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),Mo("TilingType: "+s);const p=e[0],b=e[1],y=e[2],x=e[3],A=y-p,w=x-b,T=new Float32Array(2);Nt.singularValueDecompose2dScale(this.matrix,T);const[E,R]=T;Nt.singularValueDecompose2dScale(this.baseTransform,T);const M=E*T[0],B=R*T[1];let U=A,z=w,f=!1,H=!1;const V=Math.ceil(u*M),at=Math.ceil(d*B),st=Math.ceil(A*M),ht=Math.ceil(w*B);V>=st?U=u:f=!0,at>=ht?z=d:H=!0;const dt=this.getSizeAndScale(U,this.ctx.canvas.width,M),Ht=this.getSizeAndScale(z,this.ctx.canvas.height,B),te=t.cachedCanvases.getCanvas("pattern",dt.size,Ht.size),kt=te.context,vt=o.createCanvasGraphics(kt);if(vt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(vt,n,a),kt.translate(-dt.scale*p,-Ht.scale*b),vt.transform(0,dt.scale,0,0,Ht.scale,0,0),kt.save(),vt.dependencyTracker?.save(),this.clipBbox(vt,p,b,y,x),vt.baseTransform=Je(vt.ctx),vt.executeOperatorList(i),vt.endDrawing(),vt.dependencyTracker?.restore().recordNestedDependencies?.(),kt.restore(),f||H){const re=te.canvas;f&&(U=u),H&&(z=d);const ge=this.getSizeAndScale(U,this.ctx.canvas.width,M),Le=this.getSizeAndScale(z,this.ctx.canvas.height,B),Ut=ge.size,Pt=Le.size,Rt=t.cachedCanvases.getCanvas("pattern-workaround",Ut,Pt),Vt=Rt.context,Bt=f?Math.floor(A/u):0,yt=H?Math.floor(w/d):0;for(let Jt=0;Jt<=Bt;Jt++)for(let Ne=0;Ne<=yt;Ne++)Vt.drawImage(re,Ut*Jt,Pt*Ne,Ut,Pt,0,0,Ut,Pt);return{canvas:Rt.canvas,scaleX:ge.scale,scaleY:Le.scale,offsetX:p,offsetY:b}}return{canvas:te.canvas,scaleX:dt.scale,scaleY:Ht.scale,offsetX:p,offsetY:b}}getSizeAndScale(t,e,i){const n=Math.max(mc.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=n?s=n:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,n,s){const a=n-e,o=s-i;t.ctx.rect(e,i,a,o),Nt.axialAlignedBoundingBox([e,i,n,s],Je(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,s=t.current;switch(e){case mu.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;n.fillStyle=s.fillColor=a,n.strokeStyle=s.strokeColor=o;break;case mu.UNCOLORED:n.fillStyle=n.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new Hp(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,n){let s=i;n!==Ci.SHADING&&(s=Nt.transform(s,e.baseTransform),this.matrix&&(s=Nt.transform(s,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(o),u}}function vg({src:r,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=vi.isLittleEndian?4278190080:255,[u,d]=a?[s,o]:[o,s],p=i>>3,b=i&7,y=r.length;e=new Uint32Array(e.buffer);let x=0;for(let A=0;A<n;A++){for(const T=t+p;t<T;t++){const E=t<y?r[t]:255;e[x++]=E&128?d:u,e[x++]=E&64?d:u,e[x++]=E&32?d:u,e[x++]=E&16?d:u,e[x++]=E&8?d:u,e[x++]=E&4?d:u,e[x++]=E&2?d:u,e[x++]=E&1?d:u}if(b===0)continue;const w=t<y?r[t++]:255;for(let T=0;T<b;T++)e[x++]=w&1<<7-T?d:u}return{srcPos:t,destPos:x}}const bu=16,vu=100,yg=15,yu=10,Wi=16,El=new DOMMatrix,Zi=new Float32Array(2),Er=new Float32Array([1/0,1/0,-1/0,-1/0]);function wg(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,n,s,a,o){t.transform(e,i,n,s,a,o),this.__originalTransform(e,i,n,s,a,o)},r.setTransform=function(e,i,n,s,a,o){t.setTransform(e,i,n,s,a,o),this.__originalSetTransform(e,i,n,s,a,o)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,n,s,a,o){t.bezierCurveTo(e,i,n,s,a,o),this.__originalBezierCurveTo(e,i,n,s,a,o)},r.rect=function(e,i,n,s){t.rect(e,i,n,s),this.__originalRect(e,i,n,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class _g{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function fo(r,t,e,i,n,s,a,o,u,d){const[p,b,y,x,A,w]=Je(r);if(b===0&&y===0){const R=a*p+A,M=Math.round(R),B=o*x+w,U=Math.round(B),z=(a+u)*p+A,f=Math.abs(Math.round(z)-M)||1,H=(o+d)*x+w,V=Math.abs(Math.round(H)-U)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(x),M,U),r.drawImage(t,e,i,n,s,0,0,f,V),r.setTransform(p,b,y,x,A,w),[f,V]}if(p===0&&x===0){const R=o*y+A,M=Math.round(R),B=a*b+w,U=Math.round(B),z=(o+d)*y+A,f=Math.abs(Math.round(z)-M)||1,H=(a+u)*b+w,V=Math.abs(Math.round(H)-U)||1;return r.setTransform(0,Math.sign(b),Math.sign(y),0,M,U),r.drawImage(t,e,i,n,s,0,0,V,f),r.setTransform(p,b,y,x,A,w),[V,f]}r.drawImage(t,e,i,n,s,a,o,u,d);const T=Math.hypot(p,b),E=Math.hypot(y,x);return[T*u,E*d]}class wu{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=$l;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ei.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Er.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ci.FILL,e=null){const i=this.minMax.slice();if(t===Ci.STROKE){e||je("Stroke bounding box must include transform."),Nt.singularValueDecompose2dScale(e,Zi);const n=Zi[0]*this.lineWidth/2,s=Zi[1]*this.lineWidth/2;i[0]-=n,i[1]-=s,i[2]+=n,i[3]+=s}return i}updateClipFromPath(){const t=Nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Er,0)}getClippedPathBoundingBox(t=Ci.FILL,e=null){return Nt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function _u(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,i=t.width,n=e%Wi,s=(e-n)/Wi,a=n===0?s:s+1,o=r.createImageData(i,Wi);let u=0,d;const p=t.data,b=o.data;let y,x,A,w;if(t.kind===da.GRAYSCALE_1BPP){const T=p.byteLength,E=new Uint32Array(b.buffer,0,b.byteLength>>2),R=E.length,M=i+7>>3,B=4294967295,U=vi.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(A=y<s?Wi:n,d=0,x=0;x<A;x++){const z=T-u;let f=0;const H=z>M?i:z*8-7,V=H&-8;let at=0,st=0;for(;f<V;f+=8)st=p[u++],E[d++]=st&128?B:U,E[d++]=st&64?B:U,E[d++]=st&32?B:U,E[d++]=st&16?B:U,E[d++]=st&8?B:U,E[d++]=st&4?B:U,E[d++]=st&2?B:U,E[d++]=st&1?B:U;for(;f<H;f++)at===0&&(st=p[u++],at=128),E[d++]=st&at?B:U,at>>=1}for(;d<R;)E[d++]=0;r.putImageData(o,0,y*Wi)}}else if(t.kind===da.RGBA_32BPP){for(x=0,w=i*Wi*4,y=0;y<s;y++)b.set(p.subarray(u,u+w)),u+=w,r.putImageData(o,0,x),x+=Wi;y<a&&(w=i*n*4,b.set(p.subarray(u,u+w)),r.putImageData(o,0,x))}else if(t.kind===da.RGB_24BPP)for(A=Wi,w=i*A,y=0;y<a;y++){for(y>=s&&(A=n,w=i*A),d=0,x=w;x--;)b[d++]=p[u++],b[d++]=p[u++],b[d++]=p[u++],b[d++]=255;r.putImageData(o,0,y*Wi)}else throw new Error(`bad image kind: ${t.kind}`)}function Au(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,n=e%Wi,s=(e-n)/Wi,a=n===0?s:s+1,o=r.createImageData(i,Wi);let u=0;const d=t.data,p=o.data;for(let b=0;b<a;b++){const y=b<s?Wi:n;({srcPos:u}=vg({src:d,srcPos:u,dest:p,width:i,height:y,nonBlackColor:0})),r.putImageData(o,0,b*Wi)}}function na(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function po(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function xu(r,t){if(t)return!0;Nt.singularValueDecompose2dScale(r,Zi);const e=Math.fround(An.pixelRatio*$s.PDF_TO_CSS_UNITS);return Zi[0]<=e&&Zi[1]<=e}const Ag=["butt","round","square"],xg=["miter","round","bevel"],Sg={},Su={};class kr{constructor(t,e,i,n,s,{optionalContentConfig:a,markedContentStack:o=null},u,d,p){this.ctx=t,this.current=new wu(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new _g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const u=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),po(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(t,e,i,n,s){const a=t.argsArray,o=t.fnArray;let u=e||0;const d=a.length;if(d===u)return u;const p=d-u>yu&&typeof i=="function",b=p?Date.now()+yg:0;let y=0;const x=this.commonObjs,A=this.objs;let w,T;for(;;){if(n!==void 0&&u===n.nextBreakPoint)return n.breakIt(u,i),u;if(!s||s.has(u))if(w=o[u],T=a[u]??null,w!==Rr.dependency)T===null?this[w](u):this[w](u,...T);else for(const E of T){this.dependencyTracker?.recordNamedData(E,u);const R=E.startsWith("g_")?x:A;if(!R.has(E))return R.get(E,i),u}if(u++,u===d)return u;if(p&&++y>yu){if(Date.now()>b)return i(),u;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,n=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,u=n,d="prescale1",p,b;for(;s>2&&o>1||a>2&&u>1;){let y=o,x=u;s>2&&o>1&&(y=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/y),a>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/x),p=this.cachedCanvases.getCanvas(d,y,x),b=p.context,b.clearRect(0,0,y,x),b.drawImage(t,0,0,o,u,0,0,y,x),t=p.canvas,o=y,u=x,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:u}}_createMaskCanvas(t,e){const i=this.ctx,{width:n,height:s}=e,a=this.current.fillColor,o=this.current.patternFill,u=Je(i);let d,p,b,y;if((e.bitmap||e.data)&&e.count>1){const at=e.bitmap||e.data.buffer;p=JSON.stringify(o?u:[u.slice(0,4),a]),d=this._cachedBitmapsMap.get(at),d||(d=new Map,this._cachedBitmapsMap.set(at,d));const st=d.get(p);if(st&&!o){const ht=Math.round(Math.min(u[0],u[2])+u[4]),dt=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(t,on.transformAndFill),{canvas:st,offsetX:ht,offsetY:dt}}b=st}b||(y=this.cachedCanvases.getCanvas("maskCanvas",n,s),Au(y.context,e));let x=Nt.transform(u,[1/n,0,0,-1/s,0,0]);x=Nt.transform(x,[1,0,0,1,0,-s]);const A=Er.slice();Nt.axialAlignedBoundingBox([0,0,n,s],x,A);const[w,T,E,R]=A,M=Math.round(E-w)||1,B=Math.round(R-T)||1,U=this.cachedCanvases.getCanvas("fillCanvas",M,B),z=U.context,f=w,H=T;z.translate(-f,-H),z.transform(...x),b||(b=this._scaleImage(y.canvas,In(z)),b=b.img,d&&o&&d.set(p,b)),z.imageSmoothingEnabled=xu(Je(z),e.interpolate),fo(z,b,0,0,b.width,b.height,0,0,n,s),z.globalCompositeOperation="source-in";const V=Nt.transform(In(z),[1,0,0,1,-f,-H]);return z.fillStyle=o?a.getPattern(i,this,V,Ci.FILL):a,z.fillRect(0,0,n,s),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,U.canvas)),this.dependencyTracker?.recordDependencies(t,on.transformAndFill),{canvas:U.canvas,offsetX:Math.round(f),offsetY:Math.round(H)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Ag[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=xg[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,n]of e)switch(i){case"LW":this.setLineWidth(t,n);break;case"LC":this.setLineCap(t,n);break;case"LJ":this.setLineJoin(t,n);break;case"ML":this.setMiterLimit(t,n);break;case"D":this.setDash(t,n[0],n[1]);break;case"RI":this.setRenderingIntent(t,n);break;case"FL":this.setFlatness(t,n);break;case"Font":this.setFont(t,n[0],n[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=n;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=n;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,i);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),na(this.suspendedCtx,a),wg(a,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),na(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const s=n[0],a=n[1],o=n[2]-s,u=n[3]-a;o===0||u===0||(this.genericComposeSMask(e.context,i,o,u,e.subtype,e.backdrop,e.transferMap,s,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,a,o,u,d,p,b){let y=t.canvas,x=u-p,A=d-b;if(a)if(x<0||A<0||x+i>y.width||A+n>y.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,n),E=T.context;E.drawImage(y,-x,-A),E.globalCompositeOperation="destination-atop",E.fillStyle=a,E.fillRect(0,0,i,n),E.globalCompositeOperation="source-over",y=T.canvas,x=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(x,A,i,n),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(x,A,i,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(u,d,i,n),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(y,x,A,i,n,u,d,i,n),e.restore()}save(t){this.inSMaskMode&&na(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&na(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,n,s,a,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,n,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,n){let[s]=i;if(!n){s||=i[0]=new Path2D,this[e](t,s);return}if(this.dependencyTracker!==null){const a=e===Rr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,n[0]-a,n[2]+a,n[1]-a,n[3]+a).recordDependencies(t,["transform"])}if(!(s instanceof Path2D)){const a=i[0]=new Path2D;for(let o=0,u=s.length;o<u;)switch(s[o++]){case lo.moveTo:a.moveTo(s[o++],s[o++]);break;case lo.lineTo:a.lineTo(s[o++],s[o++]);break;case lo.curveTo:a.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case lo.closePath:a.closePath();break;default:he(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=a}Nt.axialAlignedBoundingBox(n,Je(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,In(n),Ci.STROKE),a){const o=new Path2D;o.addPath(e,n.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,on.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ci.STROKE,Je(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const d=s.isModifyingCurrentTransform()?n.getTransform():null;if(this.dependencyTracker?.save(t),n.save(),n.fillStyle=s.getPattern(n,this,In(n),Ci.FILL),d){const p=new Path2D;p.addPath(e,n.getTransform().invertSelf().multiplySelf(d)),e=p}o=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),this.dependencyTracker?.recordDependencies(t,on.fill),o&&(n.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,u)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,on.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Sg}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Su}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;e!==void 0&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",t),n.recordCloseMarker(t)}if(e!==void 0){const n=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:o,y:u,fontSize:d,path:p}of e)p&&n.addPath(p,new DOMMatrix(a).preMultiplySelf(s).translate(o,u).scale(d,-d));i.clip(n)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordNamedDependency(t,e);const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||$l,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&he("Invalid font matrix for font "+e),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;const a=n.loadedName||"sans-serif",o=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let p=i;i<bu?p=bu:i>vu&&(p=vu),this.current.fontSizeScale=i/p,this.ctx.font=`${d} ${u} ${p}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const n=new Path2D;return n.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),n}paintChar(t,e,i,n,s,a){const o=this.ctx,u=this.current,d=u.font,p=u.textRenderingMode,b=u.fontSize/u.fontSizeScale,y=p&Ei.FILL_STROKE_MASK,x=!!(p&Ei.ADD_TO_PATH_FLAG),A=u.patternFill&&!d.missingFile,w=u.patternStroke&&!d.missingFile;let T;if((d.disableFontFace||x||A||w)&&!d.missingFile&&(T=d.getPathGenerator(this.commonObjs,e)),T&&(d.disableFontFace||A||w)){o.save(),o.translate(i,n),o.scale(b,-b),this.dependencyTracker?.recordCharacterBBox(t,o,d);let E;if(y===Ei.FILL||y===Ei.FILL_STROKE)if(s){E=o.getTransform(),o.setTransform(...s);const R=this.#i(T,E,s);o.fill(R)}else o.fill(T);if(y===Ei.STROKE||y===Ei.FILL_STROKE)if(a){E||=o.getTransform(),o.setTransform(...a);const{a:R,b:M,c:B,d:U}=E,z=Nt.inverseTransform(a),f=Nt.transform([R,M,B,U,0,0],z);Nt.singularValueDecompose2dScale(f,Zi),o.lineWidth*=Math.max(Zi[0],Zi[1])/b,o.stroke(this.#i(T,E,a))}else o.lineWidth/=b,o.stroke(T);o.restore()}else(y===Ei.FILL||y===Ei.FILL_STROKE)&&(o.fillText(e,i,n),this.dependencyTracker?.recordCharacterBBox(t,o,d,b,i,n,()=>o.measureText(e))),(y===Ei.STROKE||y===Ei.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,d,b,i,n,()=>o.measureText(e)).recordDependencies(t,on.stroke),o.strokeText(e,i,n));x&&((this.pendingTextPaths||=[]).push({transform:Je(o),x:i,y:n,fontSize:b,path:T}),this.dependencyTracker?.recordCharacterBBox(t,o,d,b,i,n))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return ve(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,on.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Ei.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,n=i.font;if(n.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t);return}const s=i.fontSize;if(s===0){this.dependencyTracker?.recordOperation(t);return}const a=this.ctx,o=i.fontSizeScale,u=i.charSpacing,d=i.wordSpacing,p=i.fontDirection,b=i.textHScale*p,y=e.length,x=n.vertical,A=x?1:-1,w=n.defaultVMetrics,T=s*i.fontMatrix[0],E=i.textRenderingMode===Ei.FILL&&!n.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),p>0?a.scale(b,-1):a.scale(b,1);let R,M;if(i.patternFill){a.save();const H=i.fillColor.getPattern(a,this,In(a),Ci.FILL);R=Je(a),a.restore(),a.fillStyle=H}if(i.patternStroke){a.save();const H=i.strokeColor.getPattern(a,this,In(a),Ci.STROKE);M=Je(a),a.restore(),a.strokeStyle=H}let B=i.lineWidth;const U=i.textMatrixScale;if(U===0||B===0){const H=i.textRenderingMode&Ei.FILL_STROKE_MASK;(H===Ei.STROKE||H===Ei.FILL_STROKE)&&(B=this.getSinglePixelWidth())}else B/=U;if(o!==1&&(a.scale(o,o),B/=o),a.lineWidth=B,n.isInvalidPDFjsFont){const H=[];let V=0;for(const st of e)H.push(st.unicode),V+=st.width;const at=H.join("");if(a.fillText(at,0,0),this.dependencyTracker!==null){const st=a.measureText(at);this.dependencyTracker.recordBBox(t,this.ctx,-st.actualBoundingBoxLeft,st.actualBoundingBoxRight,-st.actualBoundingBoxAscent,st.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}i.x+=V*T*b,a.restore(),this.compose();return}let z=0,f;for(f=0;f<y;++f){const H=e[f];if(typeof H=="number"){z+=A*H*s/1e3;continue}let V=!1;const at=(H.isSpace?d:0)+u,st=H.fontChar,ht=H.accent;let dt,Ht,te=H.width;if(x){const re=H.vmetric||w,ge=-(H.vmetric?re[1]:te*.5)*T,Le=re[2]*T;te=re?-re[0]:te,dt=ge/o,Ht=(z+Le)/o}else dt=z/o,Ht=0;let kt;if(n.remeasure&&te>0){kt=a.measureText(st);const re=kt.width*1e3/s*o;if(te<re&&this.isFontSubpixelAAEnabled){const ge=te/re;V=!0,a.save(),a.scale(ge,1),dt/=ge}else te!==re&&(dt+=(te-re)/2e3*s/o)}if(this.contentVisible&&(H.isInFont||n.missingFile)){if(E&&!ht)a.fillText(st,dt,Ht),this.dependencyTracker?.recordCharacterBBox(t,a,kt?{bbox:null}:n,s/o,dt,Ht,()=>kt??a.measureText(st));else if(this.paintChar(t,st,dt,Ht,R,M),ht){const re=dt+s*ht.offset.x/o,ge=Ht-s*ht.offset.y/o;this.paintChar(t,ht.fontChar,re,ge,R,M)}}const vt=x?te*T-at*p:te*T+at*p;z+=vt,V&&a.restore()}x?i.y-=z:i.x+=z*b,a.restore(),this.compose(),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){const i=this.ctx,n=this.current,s=n.font,a=n.fontSize,o=n.fontDirection,u=s.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,b=n.textHScale*o,y=n.fontMatrix||$l,x=e.length,A=n.textRenderingMode===Ei.INVISIBLE;let w,T,E,R;if(A||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),n.textMatrix&&i.transform(...n.textMatrix),i.translate(n.x,n.y+n.textRise),i.scale(b,o);const M=this.dependencyTracker;for(this.dependencyTracker=M?new So(M,t):null,w=0;w<x;++w){if(T=e[w],typeof T=="number"){R=u*T*a/1e3,this.ctx.translate(R,0),n.x+=R*b;continue}const B=(T.isSpace?p:0)+d,U=s.charProcOperatorList[T.operatorListId];U?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...y),this.executeOperatorList(U),this.restore()):he(`Type3 character "${T.operatorListId}" is not available.`);const z=[T.width,0];Nt.applyTransform(z,y),E=z[0]*a+B,i.translate(E,0),n.x+=E*b}i.restore(),M&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=M)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,n,s,a,o){const u=new Path2D;u.rect(n,s,a-n,o-s),this.ctx.clip(u),this.dependencyTracker?.recordBBox(t,this.ctx,n,a,s,o).recordClipBox(t,this.ctx,n,a,s,o),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const n=this.baseTransform||Je(this.ctx),s={createCanvasGraphics:a=>new kr(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new So(this.dependencyTracker,t):null)};i=new mc(e,this.ctx,s,n)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=bg(this.getObject(t,e)),this.cachedPatterns.set(e,n)),i&&(n.matrix=i),n}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const n=this._getPattern(t,e);i.fillStyle=n.getPattern(i,this,In(i),Ci.SHADING);const s=In(i);if(s){const{width:a,height:o}=i.canvas,u=Er.slice();Nt.axialAlignedBoundingBox([0,0,a,o],s,u);const[d,p,b,y]=u;this.ctx.fillRect(d,p,b-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,on.transform).recordDependencies(t,on.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){je("Should not call beginInlineImage")}beginImageData(){je("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Je(this.ctx),i)){Nt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[n,s,a,o]=i,u=new Path2D;u.rect(n,s,a-n,o-s),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(t,this.ctx,n,a,s,o),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Mo("TODO: Support non-isolated groups."),e.knockout&&he("Knockout groups not supported.");const n=Je(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Er.slice();Nt.axialAlignedBoundingBox(e.bbox,Je(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=Nt.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),u=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-o,1),p=Math.max(Math.ceil(s[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,p]);let b="groupAt"+this.groupLevel;e.smask&&(b+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(b,d,p),x=y.context;x.translate(-o,-u),x.transform(...n);let A=new Path2D;const[w,T,E,R]=e.bbox;if(A.rect(w,T,E-w,R-T),e.matrix){const M=new Path2D;M.addPath(A,new DOMMatrix(e.matrix)),A=M}x.clip(A),e.smask&&this.smaskStack.push({canvas:y.canvas,context:x,offsetX:o,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,u),i.save()),na(i,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=Je(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...s);const a=Er.slice();Nt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,n,s,a){if(this.#t(),po(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const o=i[2]-i[0],u=i[3]-i[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=u,Nt.singularValueDecompose2dScale(Je(this.ctx),Zi);const{viewportScale:d}=this,p=Math.ceil(o*this.outputScaleX*d),b=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,b);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Zi[0],0,0,-Zi[1],0,u*Zi[1]),po(this.ctx)}else{po(this.ctx),this.endPath(t);const d=new Path2D;d.rect(i[0],i[1],o,u),this.ctx.clip(d)}}this.current=new wu(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...n),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const n=this.ctx,s=this._createMaskCanvas(t,e),a=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(t),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,n=0,s=0,a,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const u=this.ctx;u.save();const d=Je(u);u.transform(i,n,s,a,0,0);const p=this._createMaskCanvas(t,e);u.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),this.dependencyTracker?.resetBBox(t);for(let b=0,y=o.length;b<y;b+=2){const x=Nt.transform(d,[i,n,s,a,o[b],o[b+1]]);u.drawImage(p.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(t,this.ctx,x[4],x[4]+p.canvas.width,x[5],x[5]+p.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,n=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,on.transformAndFill);for(const a of e){const{data:o,width:u,height:d,transform:p}=a,b=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=b.context;y.save();const x=this.getObject(t,o,a);Au(y,x),y.globalCompositeOperation="source-in",y.fillStyle=s?n.getPattern(y,this,In(i),Ci.FILL):n,y.fillRect(0,0,u,d),y.restore(),i.save(),i.transform(...p),i.scale(1,-1),fo(i,b.canvas,0,0,u,d,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,u,0,d),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){he("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,n,s){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){he("Dependent image isn't ready yet");return}const o=a.width,u=a.height,d=[];for(let p=0,b=s.length;p<b;p+=2)d.push({transform:[i,0,0,n,s[p],s[p+1]],x:0,y:0,w:o,h:u});this.paintInlineImageXObjectGroup(t,a,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",s.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,n=e.height,s=this.ctx;this.save(t);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/i,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,n).context;_u(p,e),o=this.applyTransferMapsToCanvas(p)}const u=this._scaleImage(o,In(s));s.imageSmoothingEnabled=xu(Je(s),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,s,0,i,-n,0).recordDependencies(t,on.imageXObject).recordOperation(t),fo(s,u.img,0,0,u.paintWidth,u.paintHeight,0,-n,i,n),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const a=e.width,o=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,o).context;_u(d,e),s=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(t);for(const a of i)n.save(),n.transform(...a.transform),n.scale(1,-1),fo(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,1,-1,0),n.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,on.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(n||(this.pendingClip===Su?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Je(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform();let a,o;if(i===0&&n===0){const u=Math.abs(e),d=Math.abs(s);if(u===d)if(t===0)a=o=1/u;else{const p=u*t;a=o=p<1?1/p:1}else if(t===0)a=1/u,o=1/d;else{const p=u*t,b=d*t;a=p<1?1/p:1,o=b<1?1/b:1}}else{const u=Math.abs(e*s-i*n),d=Math.hypot(e,i),p=Math.hypot(n,s);if(t===0)a=p/u,o=d/u;else{const b=t*u;a=p>b?p/b:1,o=d>b?d/b:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:n}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(n||1)*s,i.stroke(t);return}const o=i.getLineDash();e&&i.save(),i.scale(s,a),El.a=1/s,El.d=1/a;const u=new Path2D;if(u.addPath(t,El),o.length>0){const d=Math.max(s,a);i.setLineDash(o.map(p=>p/d)),i.lineDashOffset/=d}i.lineWidth=n||1,i.stroke(u),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in Rr)kr.prototype[r]!==void 0&&(kr.prototype[Rr[r]]=kr.prototype[r]);class Hs{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Eg{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const _r=Symbol("INTERNAL");class Cg{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:n,rbGroups:s}){this.#t=!!(t&Ji.DISPLAY),this.#e=!!(t&Ji.PRINT),this.name=e,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==_r&&je("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class Tg{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Ji.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new Cg(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(_r,!1);for(const i of t.on)this.#e.get(i)._setVisible(_r,!0);for(const i of t.off)this.#e.get(i)._setVisible(_r,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const s=t[n];let a;if(Array.isArray(s))a=this.#r(s);else if(this.#e.has(s))a=this.#e.get(s).visible;else return he(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Mo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(he(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return he(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return he(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return he(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return he(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return he(`Unknown optional content policy ${t.policy}.`),!0}return he(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const n=this.#e.get(t);if(!n){he(`Optional content group not found: ${t}`);return}if(i&&e&&n.rbGroups.length)for(const s of n.rbGroups)for(const a of s)a!==t&&this.#e.get(a)?._setVisible(_r,!1,!0);n._setVisible(_r,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const s=this.#e.get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!s.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new yh;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class kg{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ci(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,s?.length>0){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),t.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});ci(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ci(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Pg(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Rg(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Pg{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=Oo(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Rg{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Mg(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let p=o(e);return p=unescape(p),p=u(p),p=d(p),s(p)}if(e=a(r),e){const p=d(e);return s(p)}if(e=i("filename","i").exec(r),e){e=e[1];let p=o(e);return p=d(p),s(p)}function i(p,b){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function n(p,b){if(p){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(p,{fatal:!0}),x=_a(b);b=y.decode(x),t=!1}catch{}}return b}function s(p){return t&&/[\x80-\xff]/.test(p)&&(p=n("utf-8",p),t&&(p=n("iso-8859-1",p))),p}function a(p){const b=[];let y;const x=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=x.exec(p))!==null;){let[,w,T,E]=y;if(w=parseInt(w,10),w in b){if(w===0)break;continue}b[w]=[T,E]}const A=[];for(let w=0;w<b.length&&w in b;++w){let[T,E]=b[w];E=o(E),T&&(E=unescape(E),w===0&&(E=u(E))),A.push(E)}return A.join("")}function o(p){if(p.startsWith('"')){const b=p.slice(1).split('\\"');for(let y=0;y<b.length;++y){const x=b[y].indexOf('"');x!==-1&&(b[y]=b[y].slice(0,x),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}p=b.join('"')}return p}function u(p){const b=p.indexOf("'");if(b===-1)return p;const y=p.slice(0,b),A=p.slice(b+1).replace(/^[^']*'/,"");return n(y,A)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,x,A){if(x==="q"||x==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,T){return String.fromCharCode(parseInt(T,16))}),n(y,A);try{A=atob(A)}catch{}return n(y,A)})}return""}function Th(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const i in t){const n=t[i];n!==void 0&&e.append(i,n)}return e}function Lo(r){return URL.parse(r)?.origin??null}function kh({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Ph(r){const t=r.get("Content-Disposition");if(t){let e=Mg(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Oo(e))return e}return null}function Ta(r,t){return new ga(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function Rh(r){return r===200||r===206}function Mh(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Dh(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(he(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class Dg{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Th(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ci(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Og(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Lg(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Og{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),n=e.url;fetch(n,Mh(i,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=Lo(s.url),!Rh(s.status))throw Ta(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:u}=kh({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=u||this._contentLength,this._filename=Ph(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ns("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Dh(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Lg{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const a=n.url;fetch(a,Mh(s,this._withCredentials,this._abortController)).then(o=>{const u=Lo(o.url);if(u!==t._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${t._responseOrigin}".`);if(!Rh(o.status))throw Ta(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Dh(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Cl=200,Tl=206;function Ig(r){const t=r.response;return typeof t!="string"?t:_a(t).buffer}class Ng{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Th(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Tl):n.expectedStatus=Cl,e.responseType="arraybuffer",ci(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){i.onError(n.status);return}const s=n.status||Cl;if(!(s===Cl&&i.expectedStatus===Tl)&&s!==i.expectedStatus){i.onError(n.status);return}const o=Ig(n);if(s===Tl){const u=n.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?i.onDone({begin:parseInt(d[1],10),chunk:o}):(he('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Fg{constructor(t){this._source=t,this._manager=new Ng(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ci(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Bg(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new jg(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Bg{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Lo(e.responseURL);const i=e.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[u,...d]=o.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=kh({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Ph(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ta(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class jg{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Lo(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Ta(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Hg=/^[a-z][a-z0-9\-+.]+:/i;function $g(r){if(Hg.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class Ug{constructor(t){this.source=t,this.url=$g(t.url),ci(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ci(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new qg(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new zg(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class qg{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=Ta(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ns("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class zg{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const sa=Symbol("INITIAL_DATA");class Oh{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:sa}}get(t,e=null){if(e){const n=this.#e(t);return n.promise.then(()=>e(n.data)),null}const i=this.#t[t];if(!i||i.data===sa)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==sa}delete(t){const e=this.#t[t];return!e||e.data===sa?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==sa&&(yield[t,e])}}}const Wg=1e5,Eu=30;class Ri{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#l=null;#c=null;#d=0;#u=0;#f=Object.create(null);#g=[];#p=null;#h=[];#m=new WeakMap;#y=null;static#b=new Map;static#_=new Map;static#A=new WeakMap;static#v=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(u){u.enqueue(t),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#u=i.scale*An.pixelRatio,this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:s,pageX:a,pageY:o}=i.rawDims;this.#y=[1,0,0,-1,-a,o+s],this.#o=n,this.#a=s,Ri.#P(),cs(e,i),this.#t.promise.finally(()=>{Ri.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=vi.platform;return ve(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#l.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#l=this.#p.getReader(),Ri.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*An.pixelRatio,n=t.rotation;if(n!==this.#d&&(e?.(),this.#d=n,cs(this.#c,{rotation:n})),i!==this.#u){e?.(),this.#u=i;const s={div:null,properties:null,ctx:Ri.#D(this.#r)};for(const a of this.#h)s.properties=this.#m.get(a),s.div=a,this.#S(s)}}cancel(){const t=new ns("TextLayer task cancelled.");this.#l?.cancel(t).catch(()=>{}),this.#l=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#g}#k(t){if(this.#i)return;this.#s.ctx??=Ri.#D(this.#r);const e=this.#h,i=this.#g;for(const n of t){if(e.length>Wg){he("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id&&this.#e.setAttribute("id",`${n.id}`),s.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(n.str),this.#C(n)}}#C(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const n=Nt.transform(this.#y,t.transform);let s=Math.atan2(n[1],n[0]);const a=this.#f[t.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#n&&a.fontSubstitution||a.fontFamily;o=Ri.fontFamilyMap.get(o)||o;const u=Math.hypot(n[2],n[3]),d=u*Ri.#I(o,a,this.#r);let p,b;s===0?(p=n[4],b=n[5]-d):(p=n[4]+d*Math.sin(s),b=n[5]-d*Math.cos(s));const y="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#c?(x.left=`${(100*p/this.#o).toFixed(2)}%`,x.top=`${(100*b/this.#a).toFixed(2)}%`):(x.left=`${y}${p.toFixed(2)}px)`,x.top=`${y}${b.toFixed(2)}px)`),x.fontSize=`${y}${(Ri.#v*u).toFixed(2)}px)`,x.fontFamily=o,i.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);w!==T&&Math.max(w,T)/Math.min(w,T)>1.5&&(A=!0)}if(A&&(i.canvasWidth=a.vertical?t.height:t.width),this.#m.set(e,i),this.#s.div=e,this.#s.properties=i,this.#S(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#S(t){const{div:e,properties:i,ctx:n}=t,{style:s}=e;let a="";if(Ri.#v>1&&(a=`scale(${1/Ri.#v})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=s,{canvasWidth:u,fontSize:d}=i;Ri.#T(n,d*this.#u,o);const{width:p}=n.measureText(e.textContent);p>0&&(a=`scaleX(${u*this.#u/p}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#_.values())t.remove();this.#_.clear()}}static#D(t=null){let e=this.#_.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#T(t,e,i){const n=this.#A.get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)}static#P(){if(this.#v!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#v=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const n=this.#b.get(t);if(n)return n;const s=this.#D(i);s.canvas.width=s.canvas.height=Eu,this.#T(s,Eu,t);const a=s.measureText(""),o=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let d=.8;return o?d=o/(o+u):(vi.platform.isFirefox&&he("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#b.set(t,d),d}}class ma{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function n(s){if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(ma.shouldBuildText(o))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&e.push({str:a}),!!s.children)for(const u of s.children)n(u)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Gg=100;function Lh(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new bc,{docId:e}=t,i=r.url?eg(r.url):null,n=r.data?ig(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,u=r.range instanceof vc?r.range:null,d=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof Mr?r.worker:null;const b=r.verbosity,y=typeof r.docBaseUrl=="string"&&!xa(r.docBaseUrl)?r.docBaseUrl:null,x=uo(r.cMapUrl),A=r.cMapPacked!==!1,w=r.CMapReaderFactory||(Ii?cg:fu),T=uo(r.iccUrl),E=uo(r.standardFontDataUrl),R=r.StandardFontDataFactory||(Ii?ug:pu),M=uo(r.wasmUrl),B=r.WasmFactory||(Ii?hg:gu),U=r.stopAtErrors!==!0,z=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,f=r.isEvalSupported!==!1,H=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ii,V=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ii&&(vi.platform.isFirefox||!globalThis.chrome),at=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,st=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ii,ht=r.fontExtraProperties===!0,dt=r.enableXfa===!0,Ht=r.ownerDocument||globalThis.document,te=r.disableRange===!0,kt=r.disableStream===!0,vt=r.disableAutoFetch===!0,re=r.pdfBug===!0,ge=r.CanvasFactory||(Ii?lg:rg),Le=r.FilterFactory||(Ii?og:ag),Ut=r.enableHWA===!0,Pt=r.useWasm!==!1,Rt=u?u.length:r.length??NaN,Vt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ii&&!st,Bt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(w===fu&&R===pu&&B===gu&&x&&E&&M&&la(x,document.baseURI)&&la(E,document.baseURI)&&la(M,document.baseURI)),yt=null;Fp(b);const Jt={canvasFactory:new ge({ownerDocument:Ht,enableHWA:Ut}),filterFactory:new Le({docId:e,ownerDocument:Ht}),cMapReaderFactory:Bt?null:new w({baseUrl:x,isCompressed:A}),standardFontDataFactory:Bt?null:new R({baseUrl:E}),wasmFactory:Bt?null:new B({baseUrl:M})};p||(p=Mr.create({verbosity:b,port:Hs.workerPort}),t._worker=p);const Ne={docId:e,apiVersion:"5.4.149",data:n,password:o,disableAutoFetch:vt,rangeChunkSize:d,length:Rt,docBaseUrl:y,enableXfa:dt,evaluatorOptions:{maxImageSize:z,disableFontFace:st,ignoreErrors:U,isEvalSupported:f,isOffscreenCanvasSupported:H,isImageDecoderSupported:V,canvasMaxAreaInBytes:at,fontExtraProperties:ht,useSystemFonts:Vt,useWasm:Pt,useWorkerFetch:Bt,cMapUrl:x,iccUrl:T,standardFontDataUrl:E,wasmUrl:M}},wt={ownerDocument:Ht,pdfBug:re,styleElement:yt,loadingParams:{disableAutoFetch:vt,enableXfa:dt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const At=p.messageHandler.sendWithPromise("GetDocRequest",Ne,n?[n.buffer]:null);let ae;if(u)ae=new kg(u,{disableRange:te,disableStream:kt});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ee=la(i)?Dg:Ii?Ug:Fg;ae=new ee({url:i,length:Rt,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:te,disableStream:kt})}return At.then(ee=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Xt=new ca(e,ee,p.port),Mt=new Kg(Xt,t,ae,wt,Jt,Ut);t._transport=Mt,Xt.send("Ready",null)})}).catch(t._capability.reject),t}class bc{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${bc.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class vc{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){je("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Vg{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ve(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Xg{#t=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new uu:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Oh,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new Aa({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ve(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:n="display",annotationMode:s=Zn.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:b=null,isEditing:y=!1,recordOperations:x=!1,filteredOperationIndexes:A=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(n,s,b,y),{renderingIntent:T,cacheKey:E}=w;this.#t=!1,u||=this._transport.getOptionalContentConfig(T);let R=this._intentStates.get(E);R||(R=Object.create(null),this._intentStates.set(E,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const M=!!(T&Ji.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const B=!this.recordedGroups&&(x||this._pdfBug&&globalThis.StepperManager?.enabled),U=H=>{if(R.renderTasks.delete(z),B){const V=z.gfx?.dependencyTracker.take();V?(z.stepper?.setOperatorGroups(V),x&&(this.recordedGroups=V)):x&&(this.recordedGroups=[])}M&&(this.#t=!0),this.#e(),H?(z.capability.reject(H),this._abortOperatorList({intentState:R,reason:H instanceof Error?H:new Error(H)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new Cr({callback:U,params:{canvas:e,canvasContext:t,dependencyTracker:B?new dg(e):null,viewport:i,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,filteredOperationIndexes:A});(R.renderTasks||=new Set).add(z);const f=z.task;return Promise.all([R.displayReadyCapability.promise,u]).then(([H,V])=>{if(this.destroyed){U();return}if(this._stats?.time("Rendering"),!(V.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:H,optionalContentConfig:V}),z.operatorListChanged()}).catch(U),f}getOperatorList({intent:t="display",annotationMode:e=Zn.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(t,e,i,n,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let u;return o.opListReadCapability||(u=Object.create(null),u.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(u),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>ma.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,n){function s(){a.read().then(function({value:u,done:d}){if(d){i(o);return}o.lang??=u.lang,Object.assign(o.styles,u.styles),o.items.push(...u.items),s()},n)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new uu),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:a}=i,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},a).getReader(),d=this._intentStates.get(e);d.streamReader=u;const p=()=>{u.read().then(({value:b,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,d),p())},b=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(b);else if(d.opListReadCapability)d.opListReadCapability.reject(b);else throw b}})};p()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Do){let n=Gg;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new ns(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,s]of this._intentStates)if(s===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}var ls,_n,Qn,Fs,Eo,Bs,js,Ni,vo,Ih,Nh,ua,Pr,yo;const Xe=class Xe{constructor({name:t=null,port:e=null,verbosity:i=Bp()}={}){On(this,Ni);On(this,ls,Promise.withResolvers());On(this,_n,null);On(this,Qn,null);On(this,Fs,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Ve(Xe,js).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ve(Xe,js).set(e,this),Ln(this,Ni,Ih).call(this,e)}else Ln(this,Ni,Nh).call(this)}get promise(){return Ve(this,ls).promise}get port(){return Ve(this,Qn)}get messageHandler(){return Ve(this,_n)}destroy(){this.destroyed=!0,Ve(this,Fs)?.terminate(),qi(this,Fs,null),Ve(Xe,js).delete(Ve(this,Qn)),qi(this,Qn,null),Ve(this,_n)?.destroy(),qi(this,_n,null)}static create(t){const e=Ve(this,js).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xe(t)}static get workerSrc(){if(Hs.workerSrc)return Hs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ve(this,"_setupFakeWorkerGlobal",(async()=>Ve(this,Pr,yo)?Ve(this,Pr,yo):(await import(this.workerSrc)).WorkerMessageHandler)())}};ls=new WeakMap,_n=new WeakMap,Qn=new WeakMap,Fs=new WeakMap,Eo=new WeakMap,Bs=new WeakMap,js=new WeakMap,Ni=new WeakSet,vo=function(){Ve(this,ls).resolve(),Ve(this,_n).send("configure",{verbosity:this.verbosity})},Ih=function(t){qi(this,Qn,t),qi(this,_n,new ca("main","worker",t)),Ve(this,_n).on("ready",()=>{}),Ln(this,Ni,vo).call(this)},Nh=function(){if(Ve(Xe,Bs)||Ve(Xe,Pr,yo)){Ln(this,Ni,ua).call(this);return}let{workerSrc:t}=Xe;try{Xe._isSameOrigin(window.location,t)||(t=Xe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new ca("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?Ve(this,ls).reject(new Error("Worker was destroyed")):Ln(this,Ni,ua).call(this)},s=new AbortController;e.addEventListener("error",()=>{Ve(this,Fs)||n()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){n();return}qi(this,_n,i),qi(this,Qn,e),qi(this,Fs,e),Ln(this,Ni,vo).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){n();return}try{a()}catch{Ln(this,Ni,ua).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Mo("The worker has been disabled.")}Ln(this,Ni,ua).call(this)},ua=function(){Ve(Xe,Bs)||(he("Setting up fake worker."),qi(Xe,Bs,!0)),Xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ve(this,ls).reject(new Error("Worker was destroyed"));return}const e=new sg;qi(this,Qn,e);const i=`fake${Tc(Xe,Eo)._++}`,n=new ca(i+"_worker",i,e);t.setup(n,e),qi(this,_n,new ca(i,i+"_worker",e)),Ln(this,Ni,vo).call(this)}).catch(t=>{Ve(this,ls).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Pr=new WeakSet,yo=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},On(Xe,Pr),On(Xe,Eo,0),On(Xe,Bs,!1),On(Xe,js,new WeakMap),Ii&&(qi(Xe,Bs,!0),Hs.workerSrc||="./pdf.worker.mjs"),Xe._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const n=new URL(e,i);return i.origin===n.origin},Xe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Xe.fromPort=t=>{if(Vp("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Xe.create(t)};let Mr=Xe;class Kg{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,n,s,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Oh,this.fontLoader=new Zp({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,n),n}get annotationStorage(){return ve(this,"annotationStorage",new fc)}getRenderingIntent(t,e=Zn.ENABLE,i=null,n=!1,s=!1){let a=Ji.DISPLAY,o=Ul;switch(t){case"any":a=Ji.ANY;break;case"display":break;case"print":a=Ji.PRINT;break;default:he(`getRenderingIntent - invalid intent: ${t}`)}const u=a&Ji.PRINT&&i instanceof wh?i:this.annotationStorage;switch(e){case Zn.DISABLE:a+=Ji.ANNOTATIONS_DISABLE;break;case Zn.ENABLE:break;case Zn.ENABLE_FORMS:a+=Ji.ANNOTATIONS_FORMS;break;case Zn.ENABLE_STORAGE:a+=Ji.ANNOTATIONS_STORAGE,o=u.serializable;break;default:he(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(a+=Ji.IS_EDITING),s&&(a+=Ji.OPLIST);const{ids:d,hash:p}=u.modifiedIds,b=[a,o.hash,p];return{renderingIntent:a,cacheKey:b.join("_"),annotationStorageSerializable:o,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ri.cleanup(),this._networkStream?.cancelAllRequests(new ns("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{ci(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){n.close();return}ci(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:a}=this._fullReader;return(!n||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:a}}),t.on("GetRangeReader",(i,n)=>{ci(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){n.close();return}ci(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{s.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Vg(i,this))}),t.on("DocException",i=>{e._capability.reject(zi(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw zi(i);const n=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};e.onPassword(n,i.code)}catch(n){this.#r.reject(n)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":if("error"in s){const d=s.error;he(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,p)=>globalThis.FontInspector.fontAdded(d,p):null,o=new tg(s,a);this.fontLoader.bind(o).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(i,o)});break;case"CopyLocalImage":const{imageRef:u}=s;ci(u,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,p]of d.objs)if(p?.ref===u)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,s,a])=>{if(this.destroyed)return;const o=this.#e.get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[i.type];if(!n)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&he("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#n.set(s.refStr,t);const a=new Xg(e,s,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#i.set(e,n),n}getPageIndex(t){return ql(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new Tg(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new Eg(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ri.cleanup()}}cachedPageNumber(t){if(!ql(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Yg{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Cr{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:x=!1,filteredOperationIndexes:A=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Yg(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=x,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Cr.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Cr.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:n,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new kr(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:n,viewport:i,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Cr.#e.delete(this._canvas),t||=new Do(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Cr.#e.delete(this._canvas),this.callback())))}}const Fh="5.4.149",Bh="9e2e9e209";class Qi{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#l=null;#c=null;static#d=null;static get _keyboardManager(){return ve(this,"_keyboardManager",new Ea([[["Escape","mac+Escape"],Qi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qi.prototype._moveToPrevious],[["Home","mac+Home"],Qi.prototype._moveToBeginning],[["End","mac+End"],Qi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#i=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",Qi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",tn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,n]of this.#c.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",Qi.#d[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=n,s.ariaSelected=n===this.#i,s.addEventListener("click",this.#f.bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ce.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){Qi._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#u();this.#t.append(e)}#h(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#c.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class ba{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,ba.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,n=this.#t=document.createElement("input");return n.type="color",n.value=i||"#000000",n.className="basicColorPicker",n.tabIndex=0,n.setAttribute("data-l10n-id",ba.#n[t]),n.addEventListener("input",()=>{this.#i.updateParams(e,n.value)},{signal:this.#i._signal}),n}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Cu(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function ra(r){return Math.max(0,Math.min(255,255*r))}class Tu{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ra(t),[t,t,t]}static G_HTML([t]){const e=Cu(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(ra)}static RGB_HTML(t){return`#${t.map(Cu).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[ra(1-Math.min(1,t+n)),ra(1-Math.min(1,i+n)),ra(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,s=1-e,a=1-i,o=Math.min(n,s,a);return["CMYK",n,s,a,o]}}class Jg{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){je("Abstract method `_createSVG` called.")}}class va extends Jg{_createSVG(t){return document.createElementNS(Jn,t)}}class yc{static setupStorage(t,e,i,n,s){const a=n.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),s==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",o=>{n.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),s==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const u=o.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;n.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[u,d]of Object.entries(a))if(d!=null)switch(u){case"class":d.length&&t.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!o||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,d)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:s,linkService:i});const o=s!=="richText",u=t.div;if(u.append(a),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=b}o&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(n.children.length===0){if(n.value){const b=document.createTextNode(n.value);a.append(b),o&&ma.shouldBuildText(n.name)&&d.push(b)}return{textDivs:d}}const p=[[n,-1,a]];for(;p.length>0;){const[b,y,x]=p.at(-1);if(y+1===b.children.length){p.pop();continue}const A=b.children[++p.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const E=document.createTextNode(A.value);d.push(E),x.append(E);continue}const T=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(x.append(T),A.attributes&&this.setAttributes({html:T,element:A,storage:e,intent:s,linkService:i}),A.children?.length>0)p.push([A,-1,T]);else if(A.value){const E=document.createTextNode(A.value);o&&ma.shouldBuildText(w)&&d.push(E),T.append(E)}}for(const b of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qg=9,Us=new WeakSet,Zg=new Date().getTimezoneOffset()*60*1e3;class ku{static create(t){switch(t.data.annotationType){case ti.LINK:return new wc(t);case ti.TEXT:return new tm(t);case ti.WIDGET:switch(t.data.fieldType){case"Tx":return new em(t);case"Btn":return t.data.radioButton?new jh(t):t.data.checkBox?new nm(t):new sm(t);case"Ch":return new rm(t);case"Sig":return new im(t)}return new zs(t);case ti.POPUP:return new Wl(t);case ti.FREETEXT:return new Hh(t);case ti.LINE:return new om(t);case ti.SQUARE:return new lm(t);case ti.CIRCLE:return new cm(t);case ti.POLYLINE:return new $h(t);case ti.CARET:return new hm(t);case ti.INK:return new _c(t);case ti.POLYGON:return new um(t);case ti.HIGHLIGHT:return new Uh(t);case ti.UNDERLINE:return new dm(t);case ti.SQUIGGLY:return new fm(t);case ti.STRIKEOUT:return new pm(t);case ti.STAMP:return new qh(t);case ti.FILEATTACHMENT:return new gm(t);default:return new ni(t)}}}class ni{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ni._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:t,rect:e}=this.data;let i=-1/0,n=-1/0;if(t?.length>=8){for(let s=0;s<t.length;s+=8)t[s+1]>n?(n=t[s+1],i=t[s+2]):t[s+1]===n&&(i=Math.max(i,t[s+2]));return[i,n]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[t,e,i]=this.data.color,s=255*(1-(this.data.opacity??1));return this.#n(Math.min(t+s,255),Math.min(e+s,255),Math.min(i+s,255))}#n(t,e,i){t/=255,e/=255,i/=255;const n=Math.max(t,e,i),s=Math.min(t,e,i),a=(n+s)/2,o=((1+Math.sqrt(a))/2*100).toFixed(2);if(n===s)return`hsl(0, 0%, ${o}%)`;const u=n-s;let d;n===t?d=(e-i)/u+(e<i?6:0):n===e?d=(i-t)/u+2:d=(t-e)/u+4,d=(d*60).toFixed(2);const p=(u/(1-Math.abs(2*a-1))*100).toFixed(2);return`hsl(${d}, ${p}%, ${o}%)`}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:a}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/i,t[1]=100*(t[1]-a)/n,t}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#r(e);let n=this.#i?.popup||this.popup;!n&&i?.text&&(this._createPopup(i),n=this.#i.popup),n&&(n.updateEdited(t),i?.deleted&&(n.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#r(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#r(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:u}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-o)/s}%`,e.top=`${100*(a-t[3]+u)/a}%`,n===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof zs)&&!(this instanceof wc)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Wl){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:o,height:u}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(w>0||T>0){const R=`calc(${w}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;a.borderRadius=R}else if(this instanceof jh){const R=`calc(${o}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;a.borderRadius=R}switch(e.borderStyle.style){case wr.SOLID:a.borderStyle="solid";break;case wr.DASHED:a.borderStyle="dashed";break;case wr.BEVELED:he("Unimplemented border style: beveled");break;case wr.INSET:he("Unimplemented border style: inset");break;case wr.UNDERLINE:a.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,a.borderColor=Nt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):a.borderWidth=0}const d=Nt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:b,pageX:y,pageY:x}=n.rawDims;a.left=`${100*(d[0]-y)/p}%`,a.top=`${100*(d[1]-x)/b}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(a.width=`${100*o/p}%`,a.height=`${100*u/b}%`):this.setRotation(A,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims;let{width:s,height:a}=this;t%180!==0&&([s,a]=[a,s]),e.style.width=`${100*s/i}%`,e.style.height=`${100*a/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,n)=>{const s=n.detail[e],a=s[0],o=s.slice(1);n.target.style[i]=Tu[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:Tu[`${a}_rgb`](o)})};return ve(this,"_commonActions",{display:e=>{const{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail))(t[n]||i[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,s]of Object.entries(e)){const a=i[n];if(a){const o={detail:{[n]:s},target:t};a(o),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,s]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,T,E,R]=t.subarray(2,6);if(n===w&&s===T&&e===E&&i===R)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:w,borderWidth:T}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const u=n-e,d=s-i,{svgFactory:p}=this,b=p.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=p.createElement("defs");b.append(y);const x=p.createElement("clipPath"),A=`clippath_${this.data.id}`;x.setAttribute("id",A),x.setAttribute("clipPathUnits","objectBoundingBox"),y.append(x);for(let w=2,T=t.length;w<T;w+=8){const E=t[w],R=t[w+1],M=t[w+2],B=t[w+3],U=p.createElement("rect"),z=(M-e)/u,f=(s-R)/d,H=(E-M)/u,V=(R-B)/d;U.setAttribute("x",z),U.setAttribute("y",f),U.setAttribute("width",H),U.setAttribute("height",V),x.append(U),o?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${f}" width="${H}" height="${V}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(b),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let i,n;t?(i={str:t.text},n=t.date):(i=e.contentsObj,n=e.modificationDate);const s=this.#i=new Wl({data:{color:e.color,titleObj:e.titleObj,modificationDate:n,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(s.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}render(){je("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:s,id:a,exportValues:o}of n){if(s===-1||a===e)continue;const u=typeof o=="string"?o:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Us.has(d)){he(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:u,domElement:d})}return i}for(const n of document.getElementsByName(t)){const{exportValue:s}=n,a=n.getAttribute("data-element-id");a!==e&&Us.has(n)&&i.push({id:a,exportValue:s,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class wc extends ni{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),n=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),n=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),n=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",n=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const s=i.get(n);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){he('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:n,refs:s,include:a}=e,o=[];if(n.length!==0||s.length!==0){const p=new Set(s);for(const b of n){const y=this._fieldObjects[b]||[];for(const{id:x}of y)p.add(x)}for(const b of Object.values(this._fieldObjects))for(const y of b)p.has(y.id)===a&&o.push(y)}else for(const p of Object.values(this._fieldObjects))o.push(...p);const u=this.annotationStorage,d=[];for(const p of o){const{id:b}=p;switch(d.push(b),p.type){case"text":{const x=p.defaultValue||"";u.setValue(b,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;u.setValue(b,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";u.setValue(b,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!Us.has(y)){he(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class tm extends ni{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class zs extends ni{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return vi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a)}})})}_setEventListeners(t,e,i,n){for(const[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,a,n),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Nt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Qg,s=t.style;let a;const o=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o),p=Math.round(d/(wl*n))||1,b=d/p;a=Math.min(n,u(b/wl))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,u(d/wl))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Nt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class em extends zs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){const s=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),s.setValue(a.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let s=n.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=n.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const u={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",o??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Us.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:b}=this.data,y=!!p&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),u.formattedValue=null}),i.addEventListener("resetform",A=>{const w=this.data.defaultFieldValue??"";i.value=u.userValue=w,u.formattedValue=null});let x=A=>{const{formattedValue:w}=u;w!=null&&(A.target.value=w),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(u.focused)return;const{target:T}=w;if(y&&(T.type=p,b&&(T.step=b)),u.userValue){const E=u.userValue;if(y)if(p==="time"){const R=new Date(E),M=[R.getHours(),R.getMinutes(),R.getSeconds()];T.value=M.map(B=>B.toString().padStart(2,"0")).join(":")}else T.value=new Date(E-Zg).toISOString().split(p==="date"?"T":".",1)[0];else T.value=E}u.lastCommittedValue=T.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const T={value(E){u.userValue=E.detail.value??"",y||t.setValue(e,{value:u.userValue.toString()}),E.target.value=u.userValue},formattedValue(E){const{formattedValue:R}=E.detail;u.formattedValue=R,R!=null&&E.target!==document.activeElement&&(E.target.value=R);const M={formattedValue:R};y&&(M.value=R),t.setValue(e,M)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:R}=E.detail,{target:M}=E;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let B=u.userValue;!B||B.length<=R||(B=B.slice(0,R),M.value=u.userValue=B,t.setValue(e,{value:B}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:B,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(T,w)}),i.addEventListener("keydown",w=>{u.commitKey=1;let T=-1;if(w.key==="Escape"?T=0:w.key==="Enter"&&!this.data.multiLine?T=2:w.key==="Tab"&&(u.commitKey=3),T===-1)return;const{value:E}=w.target;u.lastCommittedValue!==E&&(u.lastCommittedValue=E,u.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:T,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const A=x;x=null,i.addEventListener("blur",w=>{if(!u.focused||!w.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:T}=w;let{value:E}=T;if(y){if(E&&p==="time"){const R=E.split(":").map(M=>parseInt(M,10));E=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),T.step=""}else E=new Date(E).valueOf();T.type="text"}u.userValue=E,u.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:u.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),A(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{u.lastCommittedValue=null;const{data:T,target:E}=w,{value:R,selectionStart:M,selectionEnd:B}=E;let U=M,z=B;switch(w.inputType){case"deleteWordBackward":{const f=R.substring(0,M).match(/\w*[^\w]*$/);f&&(U-=f[0].length);break}case"deleteWordForward":{const f=R.substring(M).match(/^[^\w]*\w*/);f&&(z+=f[0].length);break}case"deleteContentBackward":M===B&&(U-=1);break;case"deleteContentForward":M===B&&(z+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:T||"",willCommit:!1,selStart:U,selEnd:z}})}),this._setEventListeners(i,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(x&&i.addEventListener("blur",x),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class im extends zs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class nm extends zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Us.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:u}=a.target;for(const d of this._getElementsByName(o,i)){const p=u&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(i,{value:u})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(i,{value:u.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jh extends zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const s=document.createElement("input");if(Us.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:u}=a.target;for(const d of this._getElementsByName(o,i))t.setValue(d.id,{value:!1});t.setValue(i,{value:u})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;s.addEventListener("updatefromsandbox",o=>{const u={value:d=>{const p=a===d.detail.value;for(const b of this._getElementsByName(d.target.name)){const y=p&&b.id===i;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class sm extends wc{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class rm extends zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Us.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",p=>{const b=this.data.defaultFieldValue;for(const y of n.options)y.selected=y.value===b});for(const p of this.data.options){const b=document.createElement("option");b.textContent=p.displayValue,b.value=p.exportValue,i.value.includes(p.exportValue)&&(b.setAttribute("selected",!0),s=!1),n.append(b)}let a=null;if(s){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),n.prepend(p),a=()=>{p.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const o=p=>{const b=p?"value":"textContent",{options:y,multiple:x}=n;return x?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let u=o(!1);const d=p=>{const b=p.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",p=>{const b={value(y){a?.();const x=y.detail.value,A=new Set(Array.isArray(x)?x:[x]);for(const w of n.options)w.selected=A.has(w.value);t.setValue(e,{value:o(!0)}),u=o(!1)},multipleSelection(y){n.multiple=!0},remove(y){const x=n.options,A=y.detail.remove;x[A].selected=!1,n.remove(A),x.length>0&&Array.prototype.findIndex.call(x,T=>T.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:o(!0),items:d(y)}),u=o(!1)},clear(y){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),u=o(!1)},insert(y){const{index:x,displayValue:A,exportValue:w}=y.detail.insert,T=n.children[x],E=document.createElement("option");E.textContent=A,E.value=w,T?T.before(E):n.append(E),t.setValue(e,{value:o(!0),items:d(y)}),u=o(!1)},items(y){const{items:x}=y.detail;for(;n.length!==0;)n.remove(0);for(const A of x){const{displayValue:w,exportValue:T}=A,E=document.createElement("option");E.textContent=w,E.value=T,n.append(E)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:o(!0),items:d(y)}),u=o(!1)},indices(y){const x=new Set(y.detail.indices);for(const A of y.target.options)A.selected=x.has(A.index);t.setValue(e,{value:o(!0)}),u=o(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,p)}),n.addEventListener("input",p=>{const b=o(!0),y=o(!1);t.setValue(e,{value:b}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):n.addEventListener("input",function(p){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Wl extends ni{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ni._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new am({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),i=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(n=>`${uc}${n}`).join(",")),this.container}}class am{#t=this.#L.bind(this);#e=this.#E.bind(this);#i=this.#j.bind(this);#n=this.#M.bind(this);#r=null;#s=null;#a=null;#o=null;#l=null;#c=null;#d=null;#u=null;#f=!1;#g=null;#p=null;#h=null;#m=null;#y=null;#b=null;#_=null;#A=null;#v=null;#x=null;#k=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:a,richText:o,parent:u,rect:d,parentRect:p,open:b,eventBus:y=null}){this.#s=t,this.#v=n,this.#a=a,this.#A=o,this.#d=u,this.#r=e,this.#_=d,this.#u=p,this.#l=i,this.#c=y,this.#o=Ao.toDateObject(s),this.trigger=i.flatMap(x=>x.getElementsToTriggerPopup()),this.#C(),this.#s.hidden=!0,b&&this.#M()}#C(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#n,{signal:t}),e.addEventListener("mouseenter",this.#i,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#t,{signal:t});this.#D()}#S(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition),this.#b=t.commentButtonColor)}#D(){if(this.#m||(this.#y||this.#S(),!this.#y))return;const t=this.#m=document.createElement("button");t.className="annotationCommentButton";const e=this.#l[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;const{signal:i}=this.#p;t.addEventListener("hover",this.#n,{signal:i}),t.addEventListener("keydown",this.#t,{signal:i}),t.addEventListener("click",()=>{const[{data:{id:s},annotationEditorType:a}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:s,mode:a,editComment:!0})},{signal:i});const{style:n}=t;n.left=`calc(${this.#y[0]}%)`,n.top=`calc(${this.#y[1]}% - var(--comment-button-dim))`,this.#b&&(n.backgroundColor=this.#b),e.after(t)}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const n=t.style.outlineColor=Nt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#v?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#v}if(t.append(e),this.#o){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),n.dateTime=this.#o.toISOString(),e.append(n)}const i=this.#T;if(i)yc.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const n=this._formatContents(this.#a);t.append(n)}this.#s.append(t)}get#T(){const t=this.#A,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#A.html||null}get#P(){return this.#T?.attributes?.style?.fontSize||0}get#I(){return this.#T?.attributes?.style?.color||null}#O(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#I,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:n});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let s=0,a=n.length;s<a;++s){const o=n[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}#L(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#M()}updateEdited({rect:t,popup:e,deleted:i}){if(i||e?.deleted){this.remove();return}this.#C(),this.#x||={contentsObj:this.#a,richText:this.#A},t&&(this.#h=null),e&&(this.#A=this.#O(e.text),this.#o=Ao.toDateObject(e.date),this.#a=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#a,richText:this.#A}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#h=null)}remove(){this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#k=!1,this.#f=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#N(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=this.#d;let a=!!this.#u,o=a?this.#u:this.#_;for(const A of this.#l)if(!o||Nt.intersect(A.data.rect,o)!==null){o=A.data.rect,a=!0;break}const u=Nt.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),p=a?o[2]-o[0]+5:0,b=u[0]+p,y=u[1];this.#h=[100*(b-n)/e,100*(y-s)/i];const{style:x}=this.#s;x.left=`${this.#h[0]}%`,x.top=`${this.#h[1]}%`}#M(){this.#f=!this.#f,this.#f?(this.#j(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#E(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#j(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#N(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#E(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#s.hidden=!0)}maybeShow(){this.#C(),this.#k&&(this.#g||this.#j(),this.#k=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Hh extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ce.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class om extends ni{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lm extends ni{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",e-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class cm extends ni{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class $h extends ni{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n},width:s,height:a}=this;if(!e)return this.container;const o=this.svgFactory.create(s,a,!0);let u=[];for(let p=0,b=e.length;p<b;p+=2){const y=e[p]-t[0],x=t[3]-e[p+1];u.push(`${y},${x}`)}u=u.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",u),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class um extends $h{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hm extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _c extends ni{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ce.HIGHLIGHT:ce.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:n,popupRef:s}}=this,{transform:a,width:o,height:u}=this.#i(e,t),d=this.svgFactory.create(o,u,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",n.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let b=0,y=i.length;b<y;b++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",i[b].join(",")),p.append(x)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:n}=t,s=this.#t;if(e>=0&&s.setAttribute("stroke-width",e||1),i)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",i[a].join(","));if(n){const{transform:a,width:o,height:u}=this.#i(this.data.rotation,n);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${u}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:e}=this.data;if(t?.length>=1){let i=-1/0,n=-1/0;for(const s of t)for(let a=0,o=s.length;a<o;a+=2)s[a+1]>n?(n=s[a+1],i=s[a]):s[a+1]===n&&(i=Math.max(i,s[a]));if(i!==1/0)return[i,n]}return e?[e[2],e[3]]:null}}class Uh extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ce.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class dm extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class fm extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class pm extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class qh extends ni{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ce.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class gm extends ni{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:n}=vi.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(n?s.metaKey:s.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Io{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:a,structTreeLayer:o}){this.div=t,this.#t=e,this.#e=i,this.#n=o||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#i.size>0}async#r(t,e,i){const n=t.firstChild||t,s=n.id=`${uc}${e}`,a=await this.#n?.getAriaAttributes(s);if(a)for(const[o,u]of a)n.setAttribute(o,u);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1))}async render(t){const{annotations:e}=t,i=this.div;cs(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new va,annotationStorage:t.annotationStorage||new fc,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const o=a.annotationType===ti.POPUP;if(o){const p=n.get(a.id);if(!p)continue;s.elements=p}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;const u=ku.create(s);if(!u.isRenderable)continue;if(!o&&a.popupRef){const p=n.get(a.popupRef);p?p.push(u):n.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await this.#r(d,a.id,s.elements),u._isEditable&&(this.#i.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#s()}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new va,parent:this};for(const n of t){n.borderStyle||=Io._defaultBorderStyle,i.data=n;const s=ku.create(i);if(!s.isRenderable)continue;const a=s.render();await this.#r(a,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,cs(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i);const a=this.#i.get(e);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,n.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}static get _defaultBorderStyle(){return ve(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:wr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const go=/\r\n?|\n/g;class mi extends ne{#t;#e="";#i=`${this.id}-editor`;#n=null;#r;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=mi.prototype,e=s=>s.isEmpty(),i=ss.TRANSLATE_SMALL,n=ss.TRANSLATE_BIG;return ve(this,"_keyboardManager",new Ea([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=ce.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||mi._defaultColor||ne._defaultLineColor,this.#r=t.fontSize||mi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ne.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ce.FREETEXT_SIZE:mi._defaultFontSize=e;break;case Ce.FREETEXT_COLOR:mi._defaultColor=e;break}}updateParams(t,e){switch(t){case Ce.FREETEXT_SIZE:this.#s(e);break;case Ce.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,mi._defaultFontSize],[Ce.FREETEXT_COLOR,mi._defaultColor||ne._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,this.#r],[Ce.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new ba(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ce.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--total-scale-factor))`,this.translate(0,-(n-this.#r)*this.parentScale),this.#r=n,this.#l()},i=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=n=>{this.#t=this.editorDiv.style.color=n,this._colorPicker?.update(n)},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-mi._internalPadding*t,-(mi._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(mi.#c(i)),e=i);return t.join(`
`)}#l(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:n,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",n.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const i=n=>{if(this.#e=n,!n){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){mi._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,u]=this.getInitialTranslation();[o,u]=this.pageTranslationToScreen(o,u);const[d,p]=this.pageDimensions,[b,y]=this.pageTranslation;let x,A;switch(this.rotation){case 0:x=t+(a[0]-b)/d,A=e+this.height-(a[1]-y)/p;break;case 90:x=t+(a[0]-b)/d,A=e-(a[1]-y)/p,[o,u]=[u,-o];break;case 180:x=t-this.width+(a[0]-b)/d,A=e-(a[1]-y)/p,[o,u]=[-o,-u];break;case 270:x=t+(a[0]-b-this.height*p)/d,A=e+(a[1]-y-this.width*d)/p,[o,u]=[-u,o];break}this.setAt(x*n,A*s,o,u)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(go,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const n=mi.#f(e.getData("text")||"").replaceAll(go,`
`);if(!n)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!n.includes(`
`)){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:o,startOffset:u}=a,d=[],p=[];if(o.nodeType===Node.TEXT_NODE){const x=o.parentElement;if(p.push(o.nodeValue.slice(u).replaceAll(go,"")),x!==this.editorDiv){let A=d;for(const w of this.editorDiv.childNodes){if(w===x){A=p;continue}A.push(mi.#c(w))}}d.push(o.nodeValue.slice(0,u).replaceAll(go,""))}else if(o===this.editorDiv){let x=d,A=0;for(const w of this.editorDiv.childNodes)A++===u&&(x=p),x.push(mi.#c(w))}this.#e=`${d.join(`
`)}${n}${p.join(`
`)}`,this.#d();const b=new Range;let y=Math.sumPrecise(d.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const A=x.nodeValue.length;if(y<=A){b.setStart(x,y),b.setEnd(x,y);break}y-=A}s.removeAllRanges(),s.addRange(b)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll("Â "," ")}static#f(t){return t.replaceAll(" ","Â ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=mi._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let n=null;if(t instanceof Hh){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:u,rotation:d,id:p,popupRef:b,contentsObj:y},textContent:x,textPosition:A,parent:{page:{pageNumber:w}}}=t;if(!x||x.length===0)return null;n=t={annotationType:ce.FREETEXT,color:Array.from(o),fontSize:a,value:x.join(`
`),position:A,pageIndex:w-1,rect:u.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:b,comment:y?.str||null}}const s=await super.deserialize(t,e,i);return s.#r=t.fontSize,s.#t=Nt.makeHexColor(...t.color),s.#e=mi.#f(t.value),s._initialData=n,t.comment&&s.setCommentData(t.comment),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=ne._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),n={annotationType:ce.FREETEXT,color:i,fontSize:this.#r,value:this.#u(),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#g(n)?null:(n.id=this.annotationElementId,n)}#g(t){const{value:e,fontSize:i,color:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==n[o])||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,i.color=this.#t,e.replaceChildren();for(const s of this.#e.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),e.append(a)}const n={rect:this.getPDFRect()};return n.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(n),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Lt{static PRECISION=1e-4;toSVGPath(){je("Abstract method `toSVGPath` must be implemented.")}get box(){je("Abstract getter `box` must be implemented.")}serialize(t,e){je("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,n,s,a){a||=new Float32Array(t.length);for(let o=0,u=t.length;o<u;o+=2)a[o]=e+t[o]*n,a[o+1]=i+t[o+1]*s;return a}static _rescaleAndSwap(t,e,i,n,s,a){a||=new Float32Array(t.length);for(let o=0,u=t.length;o<u;o+=2)a[o]=e+t[o+1]*n,a[o+1]=i+t[o]*s;return a}static _translate(t,e,i,n){n||=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s+=2)n[s]=e+t[s],n[s+1]=i+t[s+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,n,s){switch(s){case 90:return[1-e/i,t/n];case 180:return[1-t/i,1-e/n];case 270:return[e/i,1-t/n];default:return[t/i,e/n]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,n,s,a){return[(t+5*i)/6,(e+5*n)/6,(5*i+s)/6,(5*n+a)/6,(i+s)/2,(n+a)/2]}}class Ns{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#l;#c;#d;#u;#f=[];static#g=8;static#p=2;static#h=Ns.#g+Ns.#p;constructor({x:t,y:e},i,n,s,a,o=0){this.#t=i,this.#u=s*n,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=o,this.#c=Ns.#g*n,this.#l=Ns.#h*n,this.#d=n,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,n,s,a]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/s,(this.#o+(t[1]-e[1])/2-n)/a,(this.#a+(e[0]-t[0])/2-i)/s,(this.#o+(e[1]-t[1])/2-n)/a]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,n,s,a]=this.#t;let[o,u,d,p]=this.#s.subarray(8,12);const b=t-d,y=e-p,x=Math.hypot(b,y);if(x<this.#l)return!1;const A=x-this.#c,w=A/x,T=w*b,E=w*y;let R=o,M=u;o=d,u=p,d+=T,p+=E,this.#f?.push(t,e);const B=-E/A,U=T/A,z=B*this.#u,f=U*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+z,p+f],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-z,p-f],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([o+z,u+f],2),this.#r.push(NaN,NaN,NaN,NaN,(o+z-i)/s,(u+f-n)/a),this.#s.set([o-z,u-f],14),this.#e.push(NaN,NaN,NaN,NaN,(o-z-i)/s,(u-f-n)/a)),this.#s.set([R,M,o,u,d,p],6),!this.isEmpty()):(this.#s.set([R,M,o,u,d,p],6),Math.abs(Math.atan2(M-u,R-o)-Math.atan2(E,T))<Math.PI/2?([o,u,d,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((o+d)/2-i)/s,((u+p)/2-n)/a),[o,u,R,M]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+o)/2-i)/s,((M+u)/2-n)/a),!0):([R,M,o,u,d,p]=this.#s.subarray(0,6),this.#r.push(((R+5*o)/6-i)/s,((M+5*u)/6-n)/a,((5*o+d)/6-i)/s,((5*u+p)/6-n)/a,((o+d)/2-i)/s,((u+p)/2-n)/a),[d,p,o,u,R,M]=this.#s.subarray(12,18),this.#e.push(((R+5*o)/6-i)/s,((M+5*u)/6-n)/a,((5*o+d)/6-i)/s,((5*u+p)/6-n)/a,((o+d)/2-i)/s,((u+p)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);this.#_(i);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return this.#b(i),i.join(" ")}#y(){const[t,e,i,n]=this.#t,[s,a,o,u]=this.#m();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/n} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/n} L${s} ${a} L${o} ${u} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/n} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/n} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#_(t){const[e,i,n,s]=this.#t,a=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[u,d,p,b]=this.#m();t.push(`L${(a[0]-e)/n} ${(a[1]-i)/s} L${u} ${d} L${p} ${b} L${(o[0]-e)/n} ${(o[1]-i)/s}`)}newFreeDrawOutline(t,e,i,n,s,a){return new zh(t,e,i,n,s,a)}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,[n,s,a,o]=this.#t,u=new Float32Array((this.#f?.length??0)+2);for(let b=0,y=u.length-2;b<y;b+=2)u[b]=(this.#f[b]-n)/a,u[b+1]=(this.#f[b+1]-s)/o;if(u[u.length-2]=(this.#a-n)/a,u[u.length-1]=(this.#o-s)/o,isNaN(i[6])&&!this.isEmpty())return this.#A(u);const d=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let b=0;b<p;b+=2){if(isNaN(t[b])){d[b]=d[b+1]=NaN;continue}d[b]=t[b],d[b+1]=t[b+1]}p=this.#x(d,p);for(let b=e.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(e[b+y])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[b+y],d[p+1]=e[b+y+1],p+=2}return this.#v(d,p),this.newFreeDrawOutline(d,u,this.#t,this.#d,this.#i,this.#n)}#A(t){const e=this.#s,[i,n,s,a]=this.#t,[o,u,d,p]=this.#m(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-n)/a,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-n)/a,NaN,NaN,NaN,NaN,o,u,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-n)/a,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-n)/a],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#i,this.#n)}#v(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,a,o,u]=this.#t,[d,p,b,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/u,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/u],e),e+=24}}class zh extends Lt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,i,n,s,a){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=n,this.#i=s,this.#n=a,this.lastPoint=[NaN,NaN],this.#o(a);const[o,u,d,p]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-o)/d,t[b+1]=(t[b+1]-u)/p;for(let b=0,y=e.length;b<y;b+=2)e[b]=(e[b]-o)/d,e[b+1]=(e[b+1]-u)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,n],s){const a=i-t,o=n-e;let u,d;switch(s){case 0:u=Lt._rescale(this.#a,t,n,a,-o),d=Lt._rescale(this.#r,t,n,a,-o);break;case 90:u=Lt._rescaleAndSwap(this.#a,t,e,a,o),d=Lt._rescaleAndSwap(this.#r,t,e,a,o);break;case 180:u=Lt._rescale(this.#a,i,e,-a,o),d=Lt._rescale(this.#r,i,e,-a,o);break;case 270:u=Lt._rescaleAndSwap(this.#a,i,n,-a,-o),d=Lt._rescaleAndSwap(this.#r,i,n,-a,-o);break}return{outline:Array.from(u),points:[Array.from(d)]}}#o(t){const e=this.#a;let i=e[4],n=e[5];const s=[i,n,i,n];let a=i,o=n;const u=t?Math.max:Math.min;for(let p=6,b=e.length;p<b;p+=6){const y=e[p+4],x=e[p+5];if(isNaN(e[p]))Nt.pointBoundingBox(y,x,s),o<x?(a=y,o=x):o===x&&(a=u(a,y));else{const A=[1/0,1/0,-1/0,-1/0];Nt.bezierBoundingBox(i,n,...e.slice(p,p+6),A),Nt.rectBoundingBox(...A,s),o<A[3]?(a=A[2],o=A[3]):o===A[3]&&(a=u(a,A[2]))}i=y,n=x}const d=this.#e;d[0]=s[0]-this.#i,d[1]=s[1]-this.#i,d[2]=s[2]-s[0]+2*this.#i,d[3]=s[3]-s[1]+2*this.#i,this.lastPoint=[a,o]}get box(){return this.#e}newOutliner(t,e,i,n,s,a=0){return new Ns(t,e,i,n,s,a)}getNewOutline(t,e){const[i,n,s,a]=this.#e,[o,u,d,p]=this.#t,b=s*d,y=a*p,x=i*d+o,A=n*p+u,w=this.newOutliner({x:this.#r[0]*b+x,y:this.#r[1]*y+A},this.#t,this.#s,t,this.#n,e??this.#i);for(let T=2;T<this.#r.length;T+=2)w.add({x:this.#r[T]*b+x,y:this.#r[T+1]*y+A});return w.getOutlines()}}class Gl{#t;#e;#i=[];#n=[];constructor(t,e=0,i=0,n=!0){const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x,y:A,width:w,height:T}of t){const E=Math.floor((x-e)/a)*a,R=Math.ceil((x+w+e)/a)*a,M=Math.floor((A-e)/a)*a,B=Math.ceil((A+T+e)/a)*a,U=[E,M,B,!0],z=[R,M,B,!1];this.#i.push(U,z),Nt.rectBoundingBox(E,M,R,B,s)}const o=s[2]-s[0]+2*i,u=s[3]-s[1]+2*i,d=s[0]-i,p=s[1]-i,b=this.#i.at(n?-1:-2),y=[b[0],b[2]];for(const x of this.#i){const[A,w,T]=x;x[0]=(A-d)/o,x[1]=(w-p)/u,x[2]=(T-p)/u}this.#t=new Float32Array([d,p,o,u]),this.#e=y}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#a(e)):(this.#o(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const a of t){const[o,u,d]=a;e.push([o,u,a],[o,d,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const u=e[a][2],d=e[a+1][2];u.push(d),d.push(u),i.add(u),i.add(d)}const n=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,u,d,p,b]=a;i.delete(a);let y=o,x=u;for(s=[o,d],n.push(s);;){let A;if(i.has(p))A=p;else if(i.has(b))A=b;else break;i.delete(A),[o,u,d,p,b]=A,y!==o&&(s.push(y,x,o,x===u?u:d),y=o),x=x===u?d:u}s.push(y,x)}return new mm(n,this.#t,this.#e)}#s(t){const e=this.#n;let i=0,n=e.length-1;for(;i<=n;){const s=i+n>>1,a=e[s][0];if(a===t)return s;a<t?i=s+1:n=s-1}return n+1}#a([,t,e]){const i=this.#s(t);this.#n.splice(i,0,[t,e])}#o([,t,e]){const i=this.#s(t);for(let n=i;n<this.#n.length;n++){const[s,a]=this.#n[n];if(s!==t)break;if(s===t&&a===e){this.#n.splice(n,1);return}}for(let n=i-1;n>=0;n--){const[s,a]=this.#n[n];if(s!==t)break;if(s===t&&a===e){this.#n.splice(n,1);return}}}#l(t){const[e,i,n]=t,s=[[e,i,n]],a=this.#s(n);for(let o=0;o<a;o++){const[u,d]=this.#n[o];for(let p=0,b=s.length;p<b;p++){const[,y,x]=s[p];if(!(d<=y||x<=u)){if(y>=u){if(x>d)s[p][1]=d;else{if(b===1)return[];s.splice(p,1),p--,b--}continue}s[p][2]=u,x>d&&s.push([e,d,x])}}}return s}}class mm extends Lt{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){const a=e[s],o=e[s+1];a===i?(t.push(`V${o}`),n=o):o===n&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],s){const a=[],o=i-t,u=n-e;for(const d of this.#e){const p=new Array(d.length);for(let b=0;b<d.length;b+=2)p[b]=t+d[b]*o,p[b+1]=n-d[b+1]*u;a.push(p)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Vl extends Ns{newFreeDrawOutline(t,e,i,n,s,a){return new bm(t,e,i,n,s,a)}}class bm extends zh{newOutliner(t,e,i,n,s,a=0){return new Vl(t,e,i,n,s,a)}}class ei extends ne{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#l=null;#c=null;#d=null;#u=!1;#f=null;#g;#p=null;#h="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ce.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ei.prototype;return ve(this,"_keyboardManager",new Ea([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ei._defaultColor,this.#m=t.thickness||ei._defaultThickness,this.#g=t.opacity||ei._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#_(t),this.#C()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#C(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Gl(this.#i,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new Gl(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:i}=this.#s;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#_({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#c=t;const n=1.5;if(this.#s=t.getNewOutline(this.#m/2+n,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ei.#S(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ei.#S(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[s,a,o,u]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=u;break;case 90:{const[p,b]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*b/p,this.height=u*p/b;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=u;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*b/p,this.height=u*p/b;break}}const{lastPoint:d}=this.#s;this.#f=[(d[0]-s)/o,(d[1]-a)/u]}static initialize(t,e){ne.initialize(t,e),ei._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ce.HIGHLIGHT_COLOR:ei._defaultColor=e;break;case Ce.HIGHLIGHT_THICKNESS:ei._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Ce.HIGHLIGHT_COLOR:this.#A(e);break;case Ce.HIGHLIGHT_THICKNESS:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,ei._defaultColor],[Ce.HIGHLIGHT_THICKNESS,ei._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||ei._defaultColor],[Ce.HIGHLIGHT_THICKNESS,this.#m||ei._defaultThickness],[Ce.HIGHLIGHT_FREE,this.#u]]}#A(t){const e=(s,a)=>{this.color=s,this.#g=a,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:s,"fill-opacity":a}}),this.#r?.updateColor(s)},i=this.color,n=this.#g;this.addCommands({cmd:e.bind(this,t,ei._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#v(t){const e=this.#m,i=n=>{this.#m=n,this.#x(n)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Qi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#P())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#C(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#k():t&&(this.#C(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#u)return;this.#_({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#k(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#C(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#n))}static#S([t,e,i,n],s){switch(s){case 90:return[1-e-n,t,n,i];case 180:return[1-t-i,1-e-n,i,n];case 270:return[e,1-t-i,n,i]}return[t,e,i,n]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=ei.#S(this.#c.box,t)):i=ei.#S([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:ei.#S(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#l=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),vh(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ei._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#P(){return this.#u?this.rotation:0}#I(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,s=this.#i,a=new Float32Array(s.length*8);let o=0;for(const{x:u,y:d,width:p,height:b}of s){const y=u*t+i,x=(1-d)*e+n;a[o]=a[o+4]=y,a[o+1]=a[o+3]=x,a[o+2]=a[o+6]=y+p*t,a[o+5]=a[o+7]=x-b*e,o+=8}return a}#O(t){return this.#c.serialize(t,this.#P())}static startHighlighting(t,e,{target:i,x:n,y:s}){const{x:a,y:o,width:u,height:d}=i.getBoundingClientRect(),p=new AbortController,b=t.combinedSignal(p),y=x=>{p.abort(),this.#N(t,x)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",ii,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",tn,{signal:b}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:b}),this._freeHighlight=new Vl({x:n,y:s},[a,o,u,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#N(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let n=null;if(t instanceof Uh){const{data:{quadPoints:A,rect:w,rotation:T,id:E,color:R,opacity:M,popupRef:B,contentsObj:U},parent:{page:{pageNumber:z}}}=t;n=t={annotationType:ce.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:A,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:B,comment:U?.str||null}}else if(t instanceof _c){const{data:{inkLists:A,rect:w,rotation:T,id:E,color:R,borderStyle:{rawWidth:M},popupRef:B,contentsObj:U},parent:{page:{pageNumber:z}}}=t;n=t={annotationType:ce.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:A,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:B,comment:U?.str||null}}const{color:s,quadPoints:a,inkLists:o,opacity:u}=t,d=await super.deserialize(t,e,i);d.color=Nt.makeHexColor(...s),d.#g=u||1,o&&(d.#m=t.thickness),d._initialData=n,t.comment&&d.setCommentData(t.comment);const[p,b]=d.pageDimensions,[y,x]=d.pageTranslation;if(a){const A=d.#i=[];for(let w=0;w<a.length;w+=8)A.push({x:(a[w]-y)/p,y:1-(a[w+1]-x)/b,width:(a[w+2]-a[w])/p,height:(a[w+1]-a[w+5])/b});d.#b(),d.#C(),d.rotate(d.rotation)}else if(o){d.#u=!0;const A=o[0],w={x:A[0]-y,y:b-(A[1]-x)},T=new Vl(w,[0,0,p,b],1,d.#m/2,!0,.001);for(let M=0,B=A.length;M<B;M+=2)w.x=A[M]-y,w.y=b-(A[M+1]-x),T.add(w);const{id:E,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);d.#_({highlightOutlines:T.getOutlines(),highlightId:E,clipPathId:R}),d.#C(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=ne._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n={annotationType:ce.HIGHLIGHT,color:i,opacity:this.#g,thickness:this.#m,quadPoints:this.#I(),outlines:this.#O(e),pageIndex:this.pageIndex,rect:e,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.addComment(n),this.annotationElementId&&!this.#M(n)?null:(n.id=this.annotationElementId,n)}#M(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,n)=>i!==e[n])}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class Wh{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){je("Not implemented")}}class se extends ne{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#l=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(se._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[n,s]of Object.entries(e))i.has(n)?Object.assign(t[n],s):t[n]=s;return t}static getDefaultDrawingOptions(t){je("Not implemented")}static get typesMap(){je("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(se.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,n]of this.typesMap)t.push([i,e[n]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,n]of this.constructor.typesMap)t.push([i,e[n]]);return t}_updateProperty(t,e,i){const n=this._drawingOptions,s=n[e],a=o=>{n.updateProperty(e,o);const u=this.#t.updateProperty(e,o);u&&this.#h(u),this.parent?.drawLayer.updateProperties(this._drawId,n.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(o)};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,n]){const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[e,1-t,i*(a/s),n*(s/a)];case 180:return[1-t,1-e,i,n];case 270:return[1-e,t,i*(a/s),n*(s/a)];default:return[t,e,i,n]}}#p(){const{x:t,y:e,width:i,height:n,parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[1-e,t,i*(s/a),n*(a/s)];case 180:return[1-t,1-e,i,n];case 270:return[e,1-t,i*(s/a),n*(a/s)];default:return[t,e,i,n]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#m(){const{x:t,y:e,width:i,height:n,rotation:s,parentRotation:a,parentDimensions:[o,u]}=this;switch((s*4+a)/90){case 1:return[1-e-n,t,n,i];case 2:return[1-t-i,1-e-n,i,n];case 3:return[e,1-t-i,n,i];case 4:return[t,e-i*(o/u),n*(u/o),i*(o/u)];case 5:return[1-e,t,i*(o/u),n*(u/o)];case 6:return[1-t-n*(u/o),1-e,n*(u/o),i*(o/u)];case 7:return[e-i*(o/u),1-t-n*(u/o),i*(o/u),n*(u/o)];case 8:return[t-i,e-n,i,n];case 9:return[1-e,t-i,n,i];case 10:return[1-t,1-e,i,n];case 11:return[e-n,1-t,n,i];case 12:return[t-n*(u/o),e,n*(u/o),i*(o/u)];case 13:return[1-e-i*(o/u),t-n*(u/o),i*(o/u),n*(u/o)];case 14:return[1-t,1-e-i*(o/u),n*(u/o),i*(o/u)];case 15:return[e,1-t,i*(o/u),n*(u/o)];default:return[t,e,i,n]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const n=document.createElement("div");i.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,n,s){je("Not implemented")}static startDrawing(t,e,i,n){const{target:s,offsetX:a,offsetY:o,pointerId:u,pointerType:d}=n;if(se.#a&&se.#a!==d)return;const{viewport:{rotation:p}}=t,{width:b,height:y}=s.getBoundingClientRect(),x=se.#n=new AbortController,A=t.combinedSignal(x);if(se.#s||=u,se.#a??=d,window.addEventListener("pointerup",w=>{se.#s===w.pointerId?this._endDraw(w):se.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointercancel",w=>{se.#s===w.pointerId?this._currentParent.endDrawingSession():se.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointerdown",w=>{se.#a===w.pointerType&&((se.#o||=new Set).add(w.pointerId),se.#i.isCancellable()&&(se.#i.removeLastElement(),se.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",tn,{signal:A}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),s.addEventListener("touchmove",w=>{w.timeStamp===se.#l&&ii(w)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),se.#i){t.drawLayer.updateProperties(this._currentDrawId,se.#i.startNew(a,o,b,y,p));return}e.updateUIForDefaultProperties(this),se.#i=this.createDrawerInstance(a,o,b,y,p),se.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(se.#r.toSVGProperties(),se.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(se.#l=-1,!se.#i)return;const{offsetX:e,offsetY:i,pointerId:n}=t;if(se.#s===n){if(se.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,se.#i.add(e,i)),se.#l=t.timeStamp,ii(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,se.#i=null,se.#r=null,se.#a=null,se.#l=NaN),se.#n&&(se.#n.abort(),se.#n=null,se.#s=NaN,se.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,se.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=se.#i,n=this._currentDrawId,s=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(n,i.setLastElement(s))},undo:()=>{e.drawLayer.updateProperties(n,i.removeLastElement())},mustExec:!1,type:Ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ce.DRAW_STEP),!se.#i.isEmpty()){const{pageDimensions:[i,n],scale:s}=e,a=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:se.#i.getOutlines(i*s,n*s,s,this._INNER_MARGIN),drawingOptions:se.#r,mustBeCommitted:!t});return this._cleanup(!0),a}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,n,s,a){je("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}=e.viewport,u=this.deserializeDraw(a,o,n,s,this._INNER_MARGIN,t),d=await super.deserialize(t,e,i);return d.createDrawingOptions(t),d.#c({drawOutlines:u}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,i]=this.pageTranslation,[n,s]=this.pageDimensions;return this.#t.serialize([e,i,n,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class vm{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#l=new ka;#c;#d;constructor(t,e,i,n,s,a){this.#c=i,this.#d=n,this.#n=s,this.#r=a,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:o,points:this.#s}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#u(t,e){return Lt._normalizePoint(t,e,this.#c,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,n,s,a]=this.#t.subarray(2,6),o=t-s,u=e-a;return Math.hypot(this.#c*o,this.#d*u)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#t.set([s,a,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,n,s,a,t,e],0),this.#e.push(...Lt.createBezierPoints(i,n,s,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,n,s){this.#c=i,this.#d=n,this.#n=s,[t,e]=this.#u(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:a,points:this.#s}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#l.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:n}=this.#i[t];this.#e=i,this.#s=n,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=Lt.svgRound(this.#e[4]),e=Lt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const n=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,n)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const n=Lt.svgRound(this.#e[10]),s=Lt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${n} ${s}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let n=this.#o,s=this.#e.length;n<s;n+=6){const[a,o,u,d,p,b]=this.#e.slice(n,n+6).map(Lt.svgRound);i.push(`C${a} ${o} ${u} ${d} ${p} ${b}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,n){const s=this.#i.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#l.build(this.#i,t,e,i,this.#n,this.#r,n),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ka extends Lt{#t;#e=0;#i;#n;#r;#s;#a;#o;#l;build(t,e,i,n,s,a,o){this.#r=e,this.#s=i,this.#a=n,this.#o=s,this.#l=a,this.#i=o??0,this.#n=t,this.#u()}get thickness(){return this.#l}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Lt.svgRound(e[4])} ${Lt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Lt.svgRound(e[10])} ${Lt.svgRound(e[11])}`);continue}for(let i=6,n=e.length;i<n;i+=6){const[s,a,o,u,d,p]=e.subarray(i,i+6).map(Lt.svgRound);t.push(`C${s} ${a} ${o} ${u} ${d} ${p}`)}}return t.join("")}serialize([t,e,i,n],s){const a=[],o=[],[u,d,p,b]=this.#d();let y,x,A,w,T,E,R,M,B;switch(this.#o){case 0:B=Lt._rescale,y=t,x=e+n,A=i,w=-n,T=t+u*i,E=e+(1-d-b)*n,R=t+(u+p)*i,M=e+(1-d)*n;break;case 90:B=Lt._rescaleAndSwap,y=t,x=e,A=i,w=n,T=t+d*i,E=e+u*n,R=t+(d+b)*i,M=e+(u+p)*n;break;case 180:B=Lt._rescale,y=t+i,x=e,A=-i,w=n,T=t+(1-u-p)*i,E=e+d*n,R=t+(1-u)*i,M=e+(d+b)*n;break;case 270:B=Lt._rescaleAndSwap,y=t+i,x=e+n,A=-i,w=-n,T=t+(1-d-b)*i,E=e+(1-u-p)*n,R=t+(1-d)*i,M=e+(1-u)*n;break}for(const{line:U,points:z}of this.#n)a.push(B(U,y,x,A,w,s?new Array(U.length):null)),o.push(B(z,y,x,A,w,s?new Array(z.length):null));return{lines:a,points:o,rect:[T,E,R,M]}}static deserialize(t,e,i,n,s,{paths:{lines:a,points:o},rotation:u,thickness:d}){const p=[];let b,y,x,A,w;switch(u){case 0:w=Lt._rescale,b=-t/i,y=e/n+1,x=1/i,A=-1/n;break;case 90:w=Lt._rescaleAndSwap,b=-e/n,y=-t/i,x=1/n,A=1/i;break;case 180:w=Lt._rescale,b=t/i+1,y=-e/n,x=-1/i,A=1/n;break;case 270:w=Lt._rescaleAndSwap,b=e/n+1,y=t/i+1,x=-1/n,A=-1/i;break}if(!a){a=[];for(const E of o){const R=E.length;if(R===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(R===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const M=new Float32Array(3*(R-2));a.push(M);let[B,U,z,f]=E.subarray(0,4);M.set([NaN,NaN,NaN,NaN,B,U],0);for(let H=4;H<R;H+=2){const V=E[H],at=E[H+1];M.set(Lt.createBezierPoints(B,U,z,f,V,at),(H-2)*3),[B,U,z,f]=[z,f,V,at]}}}for(let E=0,R=a.length;E<R;E++)p.push({line:w(a[E].map(M=>M??NaN),b,y,x,A),points:w(o[E].map(M=>M??NaN),b,y,x,A)});const T=new this.prototype.constructor;return T.build(p,i,n,1,u,d,s),T}#c(t=this.#l){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,i,n]=this.#t,[s,a]=this.#c(0);return[t+s,e+a,i-2*s,n-2*a]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:n}of this.#n){if(n.length<=12){for(let o=4,u=n.length;o<u;o+=6)Nt.pointBoundingBox(n[o],n[o+1],t);continue}let s=n[4],a=n[5];for(let o=6,u=n.length;o<u;o+=6){const[d,p,b,y,x,A]=n.subarray(o,o+6);Nt.bezierBoundingBox(s,a,d,p,b,y,x,A,t),s=x,a=A}}const[e,i]=this.#c();t[0]=Mi(t[0]-e,0,1),t[1]=Mi(t[1]-i,0,1),t[2]=Mi(t[2]+e,0,1),t[3]=Mi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#c();this.#l=t;const[n,s]=this.#c(),[a,o]=[n-e,s-i],u=this.#t;return u[0]-=a,u[1]-=o,u[2]+=2*a,u[3]+=2*o,u}updateParentDimensions([t,e],i){const[n,s]=this.#c();this.#r=t,this.#s=e,this.#a=i;const[a,o]=this.#c(),u=a-n,d=o-s,p=this.#t;return p[0]-=u,p[1]-=d,p[2]+=2*u,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Lt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Lt.svgRound(t)} ${Lt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,n=0,s=0,a=0,o=0,u=0;switch(this.#e){case 90:n=e/t,s=-t/e,o=t;break;case 180:i=-1,a=-1,o=t,u=e;break;case 270:n=-e/t,s=t/e,u=e;break;default:return""}return`matrix(${i} ${n} ${s} ${a} ${Lt.svgRound(o)} ${Lt.svgRound(u)})`}getPathResizingSVGProperties([t,e,i,n]){const[s,a]=this.#c(),[o,u,d,p]=this.#t;if(Math.abs(d-s)<=Lt.PRECISION||Math.abs(p-a)<=Lt.PRECISION){const w=t+i/2-(o+d/2),T=e+n/2-(u+p/2);return{path:{"transform-origin":`${Lt.svgRound(t)} ${Lt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${T})`}}}const b=(i-2*s)/(d-2*s),y=(n-2*a)/(p-2*a),x=d/i,A=p/n;return{path:{"transform-origin":`${Lt.svgRound(o)} ${Lt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${x} ${A}) translate(${Lt.svgRound(s)} ${Lt.svgRound(a)}) scale(${b} ${y}) translate(${Lt.svgRound(-s)} ${Lt.svgRound(-a)})`}}}getPathResizedSVGProperties([t,e,i,n]){const[s,a]=this.#c(),o=this.#t,[u,d,p,b]=o;if(o[0]=t,o[1]=e,o[2]=i,o[3]=n,Math.abs(p-s)<=Lt.PRECISION||Math.abs(b-a)<=Lt.PRECISION){const T=t+i/2-(u+p/2),E=e+n/2-(d+b/2);for(const{line:R,points:M}of this.#n)Lt._translate(R,T,E,R),Lt._translate(M,T,E,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Lt.svgRound(t)} ${Lt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*s)/(p-2*s),x=(n-2*a)/(b-2*a),A=-y*(u+s)+t+s,w=-x*(d+a)+e+a;if(y!==1||x!==1||A!==0||w!==0)for(const{line:T,points:E}of this.#n)Lt._rescale(T,A,w,y,x,T),Lt._rescale(E,A,w,y,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Lt.svgRound(t)} ${Lt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[n,s]=i,a=this.#t,o=t-a[0],u=e-a[1];if(this.#r===n&&this.#s===s)for(const{line:d,points:p}of this.#n)Lt._translate(d,o,u,d),Lt._translate(p,o,u,p);else{const d=this.#r/n,p=this.#s/s;this.#r=n,this.#s=s;for(const{line:b,points:y}of this.#n)Lt._rescale(b,o,u,d,p,b),Lt._rescale(y,o,u,d,p,y);a[2]*=d,a[3]*=p}return a[0]=t,a[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Lt.svgRound(t)} ${Lt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Lt.svgRound(t[0])} ${Lt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class No extends Wh{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ne._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new No(this._viewParameters);return t.updateAll(this),t}}class Ac extends se{static _type="ink";static _editorType=ce.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ne.initialize(t,e),this._defaultDrawingOptions=new No(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ve(this,"typesMap",new Map([[Ce.INK_THICKNESS,"stroke-width"],[Ce.INK_COLOR,"stroke"],[Ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,n,s){return new vm(t,e,i,n,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,n,s,a){return ka.deserialize(t,e,i,n,s,a)}static async deserialize(t,e,i){let n=null;if(t instanceof _c){const{data:{inkLists:a,rect:o,rotation:u,id:d,color:p,opacity:b,borderStyle:{rawWidth:y},popupRef:x,contentsObj:A},parent:{page:{pageNumber:w}}}=t;n=t={annotationType:ce.INK,color:Array.from(p),thickness:y,opacity:b,paths:{points:a},boxes:null,pageIndex:w-1,rect:o.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:x,comment:A?.str||null}}const s=await super.deserialize(t,e,i);return s._initialData=n,t.comment&&s.setCommentData(t.comment),s}get toolbarButtons(){return this._colorPicker||=new ba(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ce.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Ac.getDefaultDrawingOptions({stroke:Nt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:n}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,u={annotationType:ce.INK,color:ne._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==e[o])||t.thickness!==i||t.opacity!==n||t.pageIndex!==s}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1),n={rect:i,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}class Xl extends ka{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const mo=8,aa=3;class Ls{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,n){return i-=t,n-=e,i===0?n>0?0:4:i===1?n+6:2-n}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,n,s,a,o){const u=this.#e(i,n,s,a);for(let d=0;d<8;d++){const p=(-d+u-o+16)%8,b=this.#i[2*p],y=this.#i[2*p+1];if(t[(i+b)*e+(n+y)]!==0)return p}return-1}static#r(t,e,i,n,s,a,o){const u=this.#e(i,n,s,a);for(let d=0;d<8;d++){const p=(d+u+o+16)%8,b=this.#i[2*p],y=this.#i[2*p+1];if(t[(i+b)*e+(n+y)]!==0)return p}return-1}static#s(t,e,i,n){const s=t.length,a=new Int32Array(s);for(let p=0;p<s;p++)a[p]=t[p]<=n?1:0;for(let p=1;p<i-1;p++)a[p*e]=a[p*e+e-1]=0;for(let p=0;p<e;p++)a[p]=a[e*i-1-p]=0;let o=1,u;const d=[];for(let p=1;p<i-1;p++){u=1;for(let b=1;b<e-1;b++){const y=p*e+b,x=a[y];if(x===0)continue;let A=p,w=b;if(x===1&&a[y-1]===0)o+=1,w-=1;else if(x>=1&&a[y+1]===0)o+=1,w+=1,x>1&&(u=x);else{x!==1&&(u=Math.abs(x));continue}const T=[b,p],E=w===b+1,R={isHole:E,points:T,id:o,parent:0};d.push(R);let M;for(const st of d)if(st.id===u){M=st;break}M?M.isHole?R.parent=E?M.parent:u:R.parent=E?u:M.parent:R.parent=E?u:0;const B=this.#n(a,e,p,b,A,w,0);if(B===-1){a[y]=-o,a[y]!==1&&(u=Math.abs(a[y]));continue}let U=this.#i[2*B],z=this.#i[2*B+1];const f=p+U,H=b+z;A=f,w=H;let V=p,at=b;for(;;){const st=this.#r(a,e,V,at,A,w,1);U=this.#i[2*st],z=this.#i[2*st+1];const ht=V+U,dt=at+z;T.push(dt,ht);const Ht=V*e+at;if(a[Ht+1]===0?a[Ht]=-o:a[Ht]===1&&(a[Ht]=o),ht===p&&dt===b&&V===f&&at===H){a[y]!==1&&(u=Math.abs(a[y]));break}else A=V,w=at,V=ht,at=dt}}}return d}static#a(t,e,i,n){if(i-e<=4){for(let f=e;f<i-2;f+=2)n.push(t[f],t[f+1]);return}const s=t[e],a=t[e+1],o=t[i-4]-s,u=t[i-3]-a,d=Math.hypot(o,u),p=o/d,b=u/d,y=p*a-b*s,x=u/o,A=1/d,w=Math.atan(x),T=Math.cos(w),E=Math.sin(w),R=A*(Math.abs(T)+Math.abs(E)),M=A*(1-R+R**2),B=Math.max(Math.atan(Math.abs(E+T)*M),Math.atan(Math.abs(E-T)*M));let U=0,z=e;for(let f=e+2;f<i-2;f+=2){const H=Math.abs(y-p*t[f+1]+b*t[f]);H>U&&(z=f,U=H)}U>(d*B)**2?(this.#a(t,e,z+2,n),this.#a(t,z,i,n)):n.push(s,a)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#l(t,e,i,n,s,a){const o=new Float32Array(a**2),u=-2*n**2,d=a>>1;for(let w=0;w<a;w++){const T=(w-d)**2;for(let E=0;E<a;E++)o[w*a+E]=Math.exp((T+(E-d)**2)/u)}const p=new Float32Array(256),b=-2*s**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/b);const y=t.length,x=new Uint8Array(y),A=new Uint32Array(256);for(let w=0;w<i;w++)for(let T=0;T<e;T++){const E=w*e+T,R=t[E];let M=0,B=0;for(let z=0;z<a;z++){const f=w+z-d;if(!(f<0||f>=i))for(let H=0;H<a;H++){const V=T+H-d;if(V<0||V>=e)continue;const at=t[f*e+V],st=o[z*a+H]*p[Math.abs(at-R)];M+=at*st,B+=st}}const U=x[E]=Math.round(M/B);A[U]++}return[x,A]}static#c(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let n=-1/0,s=1/0;for(let o=0,u=i.length;o<u;o++){const d=i[o]=t[o<<2];n=Math.max(n,d),s=Math.min(s,d)}const a=255/(n-s);for(let o=0,u=i.length;o<u;o++)i[o]=(i[o]-s)*a;return i}static#u(t){let e,i=-1/0,n=-1/0;const s=t.findIndex(u=>u!==0);let a=s,o=s;for(e=s;e<256;e++){const u=t[e];u>i&&(e-a>n&&(n=e-a,o=e-1),i=u,a=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:n}=t,{maxDim:s}=this.#t;let a=i,o=n;if(i>s||n>s){let y=i,x=n,A=Math.log2(Math.max(i,n)/s);const w=Math.floor(A);A=A===w?w-1:w;for(let E=0;E<A;E++){a=Math.ceil(y/2),o=Math.ceil(x/2);const R=new OffscreenCanvas(a,o);R.getContext("2d").drawImage(t,0,0,y,x,0,0,a,o),y=a,x=o,t!==e&&t.close(),t=R.transferToImageBitmap()}const T=Math.min(s/a,s/o);a=Math.round(a*T),o=Math.round(o*T)}const d=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,o),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,a,o);const p=d.getImageData(0,0,a,o).data;return[this.#d(p),a,o]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:n},s,a,o,u){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const b=200,y=p.font=`${i} ${n} ${b}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:A,actualBoundingBoxAscent:w,actualBoundingBoxDescent:T,fontBoundingBoxAscent:E,fontBoundingBoxDescent:R,width:M}=p.measureText(t),B=1.5,U=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||0,M)*B),z=Math.ceil(Math.max(Math.abs(w)+Math.abs(T)||b,Math.abs(E)+Math.abs(R)||b)*B);d=new OffscreenCanvas(U,z),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,U,z),p.fillStyle="black",p.fillText(t,U*(B-1)/2,z*(3-B)/2);const f=this.#d(p.getImageData(0,0,U,z).data),H=this.#c(f),V=this.#u(H),at=this.#s(f,U,z,V);return this.processDrawnLines({lines:{curves:at,width:U,height:z},pageWidth:s,pageHeight:a,rotation:o,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(t,e,i,n,s){const[a,o,u]=this.#f(t),[d,p]=this.#l(a,o,u,Math.hypot(o,u)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#u(p),y=this.#s(d,o,u,b);return this.processDrawnLines({lines:{curves:y,width:o,height:u},pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:a,areContours:o}){n%180!==0&&([e,i]=[i,e]);const{curves:u,width:d,height:p}=t,b=t.thickness??0,y=[],x=Math.min(e/d,i/p),A=x/e,w=x/i,T=[];for(const{points:R}of u){const M=a?this.#o(R):R;if(!M)continue;T.push(M);const B=M.length,U=new Float32Array(B),z=new Float32Array(3*(B===2?2:B-2));if(y.push({line:z,points:U}),B===2){U[0]=M[0]*A,U[1]=M[1]*w,z.set([NaN,NaN,NaN,NaN,U[0],U[1]],0);continue}let[f,H,V,at]=M;f*=A,H*=w,V*=A,at*=w,U.set([f,H,V,at],0),z.set([NaN,NaN,NaN,NaN,f,H],0);for(let st=4;st<B;st+=2){const ht=U[st]=M[st]*A,dt=U[st+1]=M[st+1]*w;z.set(Lt.createBezierPoints(f,H,V,at,ht,dt),(st-2)*3),[f,H,V,at]=[V,at,ht,dt]}}if(y.length===0)return null;const E=o?new Xl:new ka;return E.build(y,e,i,1,n,o?0:b,s),{outline:E,newCurves:T,areContours:o,thickness:b,width:d,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:n,height:s}){let a=1/0,o=-1/0,u=0;for(const M of t){u+=M.length;for(let B=2,U=M.length;B<U;B++){const z=M[B]-M[B-2];a=Math.min(a,z),o=Math.max(o,z)}}let d;a>=-128&&o<=127?d=Int8Array:a>=-32768&&o<=32767?d=Int16Array:d=Int32Array;const p=t.length,b=mo+aa*p,y=new Uint32Array(b);let x=0;y[x++]=b*Uint32Array.BYTES_PER_ELEMENT+(u-2*p)*d.BYTES_PER_ELEMENT,y[x++]=0,y[x++]=n,y[x++]=s,y[x++]=e?0:1,y[x++]=Math.max(0,Math.floor(i??0)),y[x++]=p,y[x++]=d.BYTES_PER_ELEMENT;for(const M of t)y[x++]=M.length-2,y[x++]=M[0],y[x++]=M[1];const A=new CompressionStream("deflate-raw"),w=A.writable.getWriter();await w.ready,w.write(y);const T=d.prototype.constructor;for(const M of t){const B=new T(M.length-2);for(let U=2,z=M.length;U<z;U++)B[U-2]=M[U]-M[U-2];w.write(B)}w.close();const E=await new Response(A.readable).arrayBuffer(),R=new Uint8Array(E);return ph(R)}static async decompressSignature(t){try{const e=Gp(t),{readable:i,writable:n}=new DecompressionStream("deflate-raw"),s=n.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const M of i)a||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),a.set(M,o),o+=M.length;const u=new Uint32Array(a.buffer,0,a.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=u[2],b=u[3],y=u[4]===0,x=u[5],A=u[6],w=u[7],T=[],E=(mo+aa*A)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(w){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(a.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(a.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(a.buffer,E);break}o=0;for(let M=0;M<A;M++){const B=u[aa*M+mo],U=new Float32Array(B+2);T.push(U);for(let z=0;z<aa-1;z++)U[z]=u[aa*M+mo+z+1];for(let z=0;z<B;z++)U[z+2]=U[z]+R[o++]}return{areContours:y,thickness:x,outlines:T,width:p,height:b}}catch(e){return he(`decompressSignature: ${e}`),null}}}class xc extends Wh{constructor(){super(),super.updateProperties({fill:ne._defaultLineColor,"stroke-width":0})}clone(){const t=new xc;return t.updateAll(this),t}}class Sc extends No{constructor(t){super(t),super.updateProperties({stroke:ne._defaultLineColor,"stroke-width":1})}clone(){const t=new Sc(this._viewParameters);return t.updateAll(this),t}}class Fn extends se{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=ce.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ne.initialize(t,e),this._defaultDrawingOptions=new xc,this._defaultDrawnSignatureOptions=new Sc(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ve(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:n,mustSmooth:s,areContours:a,description:o,uuid:u,heightInPage:d}=this.#i,{rawDims:{pageWidth:p,pageHeight:b},rotation:y}=this.parent.viewport,x=Ls.processDrawnLines({lines:n,pageWidth:p,pageHeight:b,rotation:y,innerMargin:Fn._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(x,d,o,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:n,height:s}=this.#i,a=Math.max(n,s),o=Ls.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:n,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,n){const{x:s,y:a}=this,{outline:o}=this.#i=t;this.#t=o instanceof Xl,this.description=i;let u;this.#t?u=Fn.getDefaultDrawingOptions():(u=Fn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:u});const[d,p]=this.parentDimensions,[,b]=this.pageDimensions;let y=e/b;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,p*this.height),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(n),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!n,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:n}=this.parent.viewport;return Ls.process(t,e,i,n,Fn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return Ls.extractContoursFromText(t,e,i,n,s,Fn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:n}=this.parent.viewport;return Ls.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:n,innerMargin:Fn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Fn.getDefaultDrawingOptions():(this._drawingOptions=Fn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a={annotationType:ce.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.paths={lines:e,points:i},a.uuid=this.#n,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,i,n,s,a){return a.areContours?Xl.deserialize(t,e,i,n,s,a):ka.deserialize(t,e,i,n,s,a)}static async deserialize(t,e,i){const n=await super.deserialize(t,e,i);return n.#t=t.areContours,n.description=t.accessibilityData?.alt||"",n.#n=t.uuid,n}}class ym extends ne{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#l=null;#c=!1;#d=!1;static _type="stamp";static _editorType=ce.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ne.initialize(t,e)}static isHandlingMimeForPasting(t){return xo.includes(t)}static paste(t,e){e.pasteEditor({mode:ce.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:n,width:s,height:a,channels:n.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const u=o.output;return await this.setGuessedAltText(u),e&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#u(n)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(n=>this.#u(n)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=xo.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(n)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:n}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,n&&(this.#t=n),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const t=200;this.#l=setTimeout(()=>{this.#l=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[n,s]=this.pageDimensions,a=.75;if(this.width)e=this.width*n,i=this.height*s;else if(e>a*n||i>a*s){const p=Math.min(a*n/e,a*s/i);e*=p,i*=p}const[o,u]=this.parentDimensions;this.setDims(e*o/n,i*u/s),this._uiManager.enableWaiting(!1);const d=this.#a=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/n,this.height=i/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:n,height:s}=this.#t,a=new An;let o=this.#t,u=n,d=s,p=null;if(e){if(n>e||s>e){const z=Math.min(e/n,e/s);u=Math.floor(n*z),d=Math.floor(s*z)}p=document.createElement("canvas");const y=p.width=Math.ceil(u*a.sx),x=p.height=Math.ceil(d*a.sy);this.#c||(o=this.#h(y,x));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let w="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",T="#42414d");const E=15,R=E*a.sx,M=E*a.sy,B=new OffscreenCanvas(R*2,M*2),U=B.getContext("2d");U.fillStyle=w,U.fillRect(0,0,R*2,M*2),U.fillStyle=T,U.fillRect(0,0,R,M),U.fillRect(R,M,R,M),A.fillStyle=A.createPattern(B,"repeat"),A.fillRect(0,0,y,x),A.drawImage(o,0,0,o.width,o.height,0,0,y,x)}let b=null;if(i){let y,x;if(a.symmetric&&o.width<t&&o.height<t)y=o.width,x=o.height;else if(o=this.#t,n>t||s>t){const T=Math.min(t/n,t/s);y=Math.floor(n*T),x=Math.floor(s*T),this.#c||(o=this.#h(y,x))}const w=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});w.drawImage(o,0,0,o.width,o.height,0,0,y,x),b={width:y,height:x,data:w.getImageData(0,0,y,x).data}}return{canvas:p,width:u,height:d,imageData:b}}#h(t,e){const{width:i,height:n}=this.#t;let s=i,a=n,o=this.#t;for(;s>2*t||a>2*e;){const u=s,d=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(s,a);p.getContext("2d").drawImage(o,0,0,u,d,0,0,s,a),o=p.transferToImageBitmap()}return o}#m(){const[t,e]=this.parentDimensions,{width:i,height:n}=this,s=new An,a=Math.ceil(i*t*s.sx),o=Math.ceil(n*e*s.sy),u=this.#a;if(!u||u.width===a&&u.height===o)return;u.width=a,u.height=o;const d=this.#c?this.#t:this.#h(a,o),p=u.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,a,o)}#y(t){if(t){if(this.#c){const n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,i]=this.pageDimensions,n=Math.round(this.width*e*$s.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*$s.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,s);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,s),a.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let n=null,s=!1;if(t instanceof qh){const{data:{rect:w,rotation:T,id:E,structParent:R,popupRef:M,contentsObj:B},container:U,parent:{page:{pageNumber:z}},canvas:f}=t;let H,V;f?(delete t.canvas,{id:H,bitmap:V}=i.imageManager.getFromCanvas(U.id,f),f.remove()):(s=!0,t._hasNoCanvas=!0);const at=(await e._structTree.getAriaAttributes(`${uc}${E}`))?.get("aria-label")||"";n=t={annotationType:ce.STAMP,bitmapId:H,bitmap:V,pageIndex:z-1,rect:w.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:at},isSvg:!1,structParent:R,popupRef:M,comment:B?.str||null}}const a=await super.deserialize(t,e,i),{rect:o,bitmap:u,bitmapUrl:d,bitmapId:p,isSvg:b,accessibilityData:y}=t;s?(i.addMissingCanvas(t.id,a),a.#o=!0):p&&i.imageManager.isValidId(p)?(a.#e=p,u&&(a.#t=u)):a.#n=d,a.#c=b;const[x,A]=a.pageDimensions;return a.width=(o[2]-o[0])/x,a.height=(o[3]-o[1])/A,y&&(a.altTextData=y),a._initialData=n,t.comment&&a.setCommentData(t.comment),a.#d=!!n,a}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ce.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:n,altText:s}=this.serializeAltText(!1);if(!n&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=this.#b(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const a=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#c){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#b(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,n=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&n&&s,isSameAltText:s}}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class jn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#l=!1;#c=null;#d=null;#u=null;#f=null;#g=null;#p=-1;#h;static _initialized=!1;static#m=new Map([mi,Ac,ym,ei,Fn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:n,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:u,viewport:d,l10n:p}){const b=[...jn.#m.values()];if(!jn._initialized){jn._initialized=!0;for(const y of b)y.initialize(p,t)}t.registerEditorTypes(b),this.#h=t,this.pageIndex=e,this.div=i,this.#t=s,this.#i=a,this.viewport=d,this.#u=u,this.drawLayer=o,this._structTree=n,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===ce.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#v(),t){case ce.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ce.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ce.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of jn.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#i){this.#l=!1;return}const e=this.#i.getEditableAnnotations();for(const i of e){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}this.#l=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#g){this.#g=new AbortController;const n=this.#h.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",s=>{const{clientX:o,clientY:u,timeStamp:d}=s,p=this.#p;if(d-p>500){this.#p=d;return}this.#p=-1;const{classList:b}=this.div;b.toggle("getElements",!0);const y=document.elementsFromPoint(o,u);if(b.toggle("getElements",!1),!this.div.contains(y[0]))return;let x;const A=new RegExp(`^${ch}[0-9]+$`);for(const T of y)if(A.test(T.id)){x=T.id;break}if(!x)return;const w=this.#s.get(x);w?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick())},{signal:n,capture:!0})}const t=new Map,e=new Map;for(const n of this.#s.values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else e.set(n.annotationElementId,n);this.getEditableAnnotation(n.annotationElementId)?.show(),n.remove()}if(this.#i){const n=this.#i.getEditableAnnotations();for(const s of n){const{id:a}=s.data;if(this.#h.isDeletedAnnotationElement(a)){s.updateEdited({deleted:!0});continue}let o=e.get(a);if(o){o.resetAnnotationElement(s),o.show(!1),s.show();continue}o=t.get(a),o&&(this.#h.addChangedExistingAnnotation(o),o.renderAnnotationElement(s)&&o.show(!1)),s.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const n of jn.#m.values())i.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=vi.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ei.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#h.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),ne.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#l),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#h.getId()}get#b(){return jn.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#_(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:i,offsetY:n}=this.#A(),s=this.getNextId(),a=this.#_({parent:this,id:s,x:i,y:n,uiManager:this.#h,isCentered:!0,...e});a&&this.add(a)}async deserialize(t){return await jn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),s=this.#_({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return s&&this.add(s),s}#A(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),u=Math.min(window.innerHeight,e+n),d=(s+o)/2-t,p=(a+u)/2-e,[b,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#h.getMode();if(i===ce.STAMP||i===ce.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===ce.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#h.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#b.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const n=this.#h.findParent(e,i);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,cs(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#v();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,cs(this.div,{rotation:i}),e!==i)for(const n of this.#s.values())n.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class bi{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return ve(this,"_svgFactory",new va)}static#r(t,[e,i,n,s]){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*n}%`,a.height=`${100*s}%`}#s(){const t=bi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=bi._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=bi._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n}#o(t,e){for(const[i,n]of Object.entries(e))n===null?t.removeAttribute(i):t.setAttribute(i,n)}draw(t,e=!1,i=!1){const n=bi.#n++,s=this.#s(),a=bi._svgFactory.createElement("defs");s.append(a);const o=bi._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(n,o);const d=i?this.#a(a,u):null,p=bi._svgFactory.createElement("use");return s.append(p),p.setAttribute("href",`#${u}`),this.updateProperties(s,t),this.#e.set(n,s),{id:n,clipPathId:`url(#${d})`}}drawOutline(t,e){const i=bi.#n++,n=this.#s(),s=bi._svgFactory.createElement("defs");n.append(s);const a=bi._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let u;if(e){const b=bi._svgFactory.createElement("mask");s.append(b),u=`mask_p${this.pageIndex}_${i}`,b.setAttribute("id",u),b.setAttribute("maskUnits","objectBoundingBox");const y=bi._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=bi._svgFactory.createElement("use");b.append(x),x.setAttribute("href",`#${o}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const d=bi._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${o}`),u&&d.setAttribute("mask",`url(#${u})`);const p=d.cloneNode();return n.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(n,t),this.#e.set(i,n),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:n,rootClass:s,path:a}=e,o=typeof t=="number"?this.#e.get(t):t;if(o){if(i&&this.#o(o,i),n&&bi.#r(o,n),s){const{classList:u}=o;for(const[d,p]of Object.entries(s))u.toggle(d,p)}if(a){const d=o.firstChild.firstChild;this.#o(d,a)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Gl};globalThis.pdfjsLib={AbortException:ns,AnnotationEditorLayer:jn,AnnotationEditorParamsType:Ce,AnnotationEditorType:ce,AnnotationEditorUIManager:ss,AnnotationLayer:Io,AnnotationMode:Zn,AnnotationType:ti,build:Bh,ColorPicker:Qi,createValidAbsoluteUrl:oc,DOMSVGFactory:va,DrawLayer:bi,FeatureTest:vi,fetchData:Dr,getDocument:Lh,getFilenameFromUrl:gh,getPdfFilenameFromUrl:mh,getRGB:Sa,getUuid:cc,getXfaPageViewport:bh,GlobalWorkerOptions:Hs,ImageKind:da,InvalidPDFException:_o,isDataScheme:xa,isPdfFile:Oo,isValidExplicitDest:_h,MathClamp:Mi,noContextMenu:tn,normalizeUnicode:fh,OPS:Rr,OutputScale:An,PasswordResponses:hh,PDFDataRangeTransport:vc,PDFDateString:Ao,PDFWorker:Mr,PermissionFlag:uh,PixelsPerInch:$s,RenderingCancelledException:Do,ResponseException:ga,setLayerDimensions:cs,shadow:ve,SignatureExtractor:Ls,stopEvent:ii,SupportedImageMimeTypes:xo,TextLayer:Ri,TouchManager:Ca,updateUrlHash:lc,Util:Nt,VerbosityLevel:wa,version:Fh,XfaLayer:yc};const wm=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ns,AnnotationEditorLayer:jn,AnnotationEditorParamsType:Ce,AnnotationEditorType:ce,AnnotationEditorUIManager:ss,AnnotationLayer:Io,AnnotationMode:Zn,AnnotationType:ti,ColorPicker:Qi,DOMSVGFactory:va,DrawLayer:bi,FeatureTest:vi,GlobalWorkerOptions:Hs,ImageKind:da,InvalidPDFException:_o,MathClamp:Mi,OPS:Rr,OutputScale:An,PDFDataRangeTransport:vc,PDFDateString:Ao,PDFWorker:Mr,PasswordResponses:hh,PermissionFlag:uh,PixelsPerInch:$s,RenderingCancelledException:Do,ResponseException:ga,SignatureExtractor:Ls,SupportedImageMimeTypes:xo,TextLayer:Ri,TouchManager:Ca,Util:Nt,VerbosityLevel:wa,XfaLayer:yc,build:Bh,createValidAbsoluteUrl:oc,fetchData:Dr,getDocument:Lh,getFilenameFromUrl:gh,getPdfFilenameFromUrl:mh,getRGB:Sa,getUuid:cc,getXfaPageViewport:bh,isDataScheme:xa,isPdfFile:Oo,isValidExplicitDest:_h,noContextMenu:tn,normalizeUnicode:fh,setLayerDimensions:cs,shadow:ve,stopEvent:ii,updateUrlHash:lc,version:Fh},Symbol.toStringTag,{value:"Module"})),_m="/build/assets/pdf.worker.min-r-TJsTTt.mjs";window.$=window.jQuery=td;Hs.workerSrc=_m;window.pdfjsLib=wm;Np.data("factCard",r=>({isHovered:!1,currentNumber:0,target:r,hasAnimated:!1,startAnimation(){if(this.hasAnimated)return;this.hasAnimated=!0;const t=1500;let e=null;const i=n=>{e||(e=n);const s=Math.min((n-e)/t,1);this.currentNumber=Math.floor(s*this.target),s<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}}));rc.start();function Am(){jQuery(document).on("click",".tokyo_tm_topbar .trigger .hamburger",function(){console.log("Hamburger clicked via delegation");var r=jQuery(this),t=jQuery(".tokyo_tm_mobile_menu");return r.hasClass("is-active")?(r.removeClass("is-active"),t.removeClass("opened")):(r.addClass("is-active"),t.addClass("opened")),!1}),jQuery(document).on("click",".tokyo_tm_mobile_menu ul li a",function(){return console.log("Menu link clicked via delegation"),jQuery(".tokyo_tm_topbar .trigger .hamburger").removeClass("is-active"),jQuery(".tokyo_tm_mobile_menu").removeClass("opened"),!1})}Am();
